/*! dmn-js - dmn-navigated-viewer v14.1.1 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).DmnJS=t()}(this,function(){"use strict";function R(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach(function(e){I(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,U(i.key),i)}}function l(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};for(var n,i={},r=Object.keys(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=B(n),t=(e=i?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function V(){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?z(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function U(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}var F=Object.prototype.toString,W=Object.prototype.hasOwnProperty;function q(e){return void 0!==e}function X(e){return"[object Array]"===F.call(e)}function Y(e){return"[object Object]"===F.call(e)}function K(e){return"[object Number]"===F.call(e)}function Z(e){e=F.call(e);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}function Q(e){return"[object String]"===F.call(e)}function J(e,n){var t,i;return n=Z(t=n)?t:function(e){return e===t},g(e,function(e,t){if(n(e,t))return i=e,!1}),i}function ee(e,n){var i=[];return g(e,function(e,t){n(e,t)&&i.push(e)}),i}function g(e,t){if(void 0!==e){var n,i,r=X(e)?oe:re;for(n in e)if(i=n,W.call(e,i)&&!1===t(e[n],r(n)))return}}function te(e,n,i){return g(e,function(e,t){i=n(i,e,t)}),i}function ne(e,i){return!!te(e,function(e,t,n){return e&&i(t,n)},!0)}function ie(e){return function(n){return ne(e,function(e,t){return n[t]===e})}}function re(e){return e}function oe(e){return Number(e)}function se(n,i){var r,o,s,a;function t(e){var t=Date.now(),e=e?0:a+i-t;if(0<e)return l(e);n.apply(s,o),c()}function l(e){r=setTimeout(t,e)}function c(){r&&clearTimeout(r),r=a=o=s=void 0}function e(){a=Date.now();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=t,s=this,r||l(i)}return e.flush=function(){r&&t(!0),c()},e.cancel=c,e}function ae(e,t){return e.bind(t)}function w(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign.apply(Object,[e].concat(n))}var le="__fn",ce=Array.prototype.slice;function i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function ue(){}i.prototype.on=function(e,t,n,i){if(e=X(e)?e:[e],Z(t)&&(i=n,n=t,t=1e3),!K(t))throw new Error("priority must be a number");var r=n,o=(i&&((r=ae(n,i))[le]=n[le]||n),this);e.forEach(function(e){o._addListener(e,{priority:t,callback:r,next:null})})},i.prototype.once=function(t,e,n,i){var r=this;if(Z(e)&&(i=n,n=e,e=1e3),!K(e))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var e=n.apply(i,arguments);return r.off(t,o),e}o[le]=n,this.on(t,e,o)},i.prototype.off=function(e,t){e=X(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},i.prototype.createEvent=function(e){var t=new ue;return t.init(e),t},i.prototype.fire=function(e,t){var n,i,r=ce.call(arguments);if(!(e="object"===Ue(e)?(t=e).type:e))throw new Error("no event type specified");if(n=this._listeners[e]){var t=t instanceof ue?t:this.createEvent(t),o=(r[0]=t).type;e!==o&&(t.type=e);try{i=this._invokeListeners(t,r,n)}finally{e!==o&&(t.type=o)}return i=void 0===i&&t.defaultPrevented?!1:i}},i.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},i.prototype._destroy=function(){this._listeners={}},i.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},i.prototype._invokeListener=function(e,t,n){var i,r,o;if(!n.callback.__isTomb)try{r=n.callback,o=t,void 0!==(i=r.apply(null,o))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return i},i.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));i=(n=i).next}n.next=t}else this._setListeners(e,t)},i.prototype._getListeners=function(e){return this._listeners[e]},i.prototype._setListeners=function(e,t){this._listeners[e]=t},i.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r[le]!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},ue.prototype.stopPropagation=function(){this.cancelBubble=!0},ue.prototype.preventDefault=function(){this.defaultPrevented=!0},ue.prototype.init=function(e){w(this,e||{})};var pe=Object.prototype.toString;function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function fe(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return he.apply(void 0,[e].concat(n))}var de=Object.prototype.toString,me=Object.prototype.hasOwnProperty;function ye(e){return"[object String]"===de.call(e)}function ve(e,t){if(void 0!==e){var n,i,r="[object Array]"===de.call(e)?be:ge;for(n in e)if(i=n,me.call(e,i)&&!1===t(e[n],r(n)))return}}function ge(e){return e}function be(e){return Number(e)}function we(e,t){return e.bind(t)}function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function xe(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return _e.apply(void 0,[e].concat(n))}function Ee(){}function ke(e,t){this.model=e,this.properties=t}Ee.prototype.get=function(e){return this.$model.properties.get(this,e)},Ee.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},ke.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Ee.prototype),r=(ve(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e),e.ns.name);function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ve(e,we(function(e,t){this.set(t,e)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var Ce={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Oe={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Se(e,t){e=Oe[e];return e?e(t):t}function Me(e){return Ce[e]}function je(e){return Oe[e]}function u(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function Ne(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Pe(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ve(e,we(this.registerPackage,this))}function De(e,t,n){t=t[n];if(t in e)throw new Error("package with "+n+" <"+t+"> already defined")}function Re(e){this.model=e}function Te(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Ae(e){this.properties=new Re(this),this.factory=new ke(this,this.properties),this.registry=new Pe(e,this.properties),this.typeCache={}}Ne.prototype.build=function(){return t=this,e=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],n={},i=Object(t),ve(e,function(e){e in i&&(n[e]=t[e])}),n;var t,e,n,i},Ne.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);n=this.properties;void 0!==t?n.splice(t,0,e):n.push(e)},Ne.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}e=r.indexOf(e);if(-1===e)throw new Error("property <"+i.name+"> not found in property list");r.splice(e,1),this.addProperty(t,n?void 0:e,s),o[i.name]=o[i.localName]=t},Ne.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,t=t.split("#"),i=u(t[0],i),t=u(t[1],i.prefix).name,i=this.propertiesByName[t];if(!i)throw new Error("refined property <"+t+"> not found");this.replaceProperty(i,e,n),delete e.redefines},Ne.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},Ne.prototype.removeNamedProperty=function(e){var e=e.ns,t=this.propertiesByName;delete t[e.name],delete t[e.localName]},Ne.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},Ne.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},Ne.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},Ne.prototype.hasProperty=function(e){return this.propertiesByName[e]},Ne.prototype.addTrait=function(i,r){var e=this.allTypesByName,t=this.allTypes,n=i.name;n in e||(ve(i.properties,we(function(e){e=xe({},e,{name:e.ns.localName,inherited:r}),Object.defineProperty(e,"definedBy",{value:i});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this)),t.push(i),e[n]=i)},Pe.prototype.getPackage=function(e){return this.packageMap[e]},Pe.prototype.getPackages=function(){return this.packages},Pe.prototype.registerPackage=function(t){t=xe({},t);var e=this.packageMap;De(e,t,"prefix"),De(e,t,"uri"),ve(t.types,we(function(e){this.registerType(e,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},Pe.prototype.registerType=function(e,t){var i=u((e=xe({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:xe(e.meta||{})})).name,t.prefix),n=i.name,r={};ve(e.properties,we(function(e){var t=u(e.name,i.prefix),n=t.name;Me(e.type)||(e.type=u(e.type,t.prefix).name),xe(e,{ns:t,name:n}),r[n]=e},this)),xe(e,{ns:i,name:n,propertiesByName:r}),ve(e.extends,we(function(e){e=this.typeMap[e];e.traits=e.traits||[],e.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e},Pe.prototype.mapTypes=function(n,i,e){var t=Me(n.name)?{name:n.name}:this.typeMap[n.name],r=this;function o(e){return s(e,!0)}function s(e,t){e=u(e,Ce[e]?"":n.prefix);r.mapTypes(e,i,t)}if(!t)throw new Error("unknown type <"+n.name+">");ve(t.superClass,e?o:s),i(t,!e),ve(t.traits,o)},Pe.prototype.getEffectiveDescriptor=function(e){var e=u(e),n=new Ne(e),e=(this.mapTypes(e,function(e,t){n.addTrait(e,t)}),n.build());return this.definePackage(e,e.allTypes[e.allTypes.length-1].$pkg),e},Pe.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},Re.prototype.set=function(e,t,n){if(!ye(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;void 0===n?i?delete e[r]:delete e.$attrs[t]:i?r in e?e[r]=n:Te(e,i,n):e.$attrs[t]=n},Re.prototype.get=function(e,t){var n,i=this.model.getPropertyDescriptor(e,t);return i?(!e[n=i.name]&&i.isMany&&Te(e,i,[]),e[n]):e.$attrs[t]},Re.prototype.define=function(e,t,n){var i;n.writable||(i=n.value,delete(n=xe({},n,{get:function(){return i}})).value),Object.defineProperty(e,t,n)},Re.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Re.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},Ae.prototype.create=function(e,t){var n=this.getType(e);if(n)return new n(t);throw new Error("unknown type <"+e+">")},Ae.prototype.getType=function(e){var t=this.typeCache,n=ye(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},Ae.prototype.createAny=function(e,t,n){var i=u(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},e={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,e),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ve(n,function(e,t){"[object Object]"===de.call(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},Ae.prototype.getPackage=function(e){return this.registry.getPackage(e)},Ae.prototype.getPackages=function(){return this.registry.getPackages()},Ae.prototype.getElementDescriptor=function(e){return e.$descriptor},Ae.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},Ae.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Ae.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Ie=Object.prototype.toString,Be=Object.prototype.hasOwnProperty;function Le(e){return"[object Array]"===Ie.call(e)}function $e(e){return"[object String]"===Ie.call(e)}function Ve(e,t){return Be.call(e,t)}function ze(e,n){var i;return n=We(n),h(e,function(e,t){if(n(e,t))return i=e,!1}),i}function Fe(e,n){var i=[];return h(e,function(e,t){n(e,t)&&i.push(e)}),i}function h(e,t){if(void 0!==e){var n,i=Le(e)?Ge:qe;for(n in e)if(Ve(e,n)&&!1===t(e[n],i(n)))return}}function We(t){return e=t,"[object Function]"===(e=Ie.call(e))||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e?t:function(e){return e===t};var e}function qe(e){return e}function Ge(e){return Number(e)}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Xe(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return He.apply(void 0,[e].concat(n))}var Ye=String.fromCharCode,Ke=Object.prototype.hasOwnProperty,Ze=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Qe={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function Je(e,t,n,i){return i?Ke.call(Qe,i)?Qe[i]:"&"+i+";":Ye(t||parseInt(n,16))}function et(e){return 3<e.length&&-1!==e.indexOf("&")?e.replace(Ze,Je):e}Object.keys(Qe).forEach(function(e){Qe[e.toUpperCase()]=Qe[e]});var tt="xsi:type",nt="non-whitespace outside of root node";function it(e){return new Error(e)}function rt(e){return"missing namespace for prefix <"+e+">"}function ot(e){return{get:e,enumerable:!0}}function st(e){return e+"$uri"}function at(){return{line:0,column:0}}function lt(e){throw e}function ct(e){if(!this)return new ct(e);var E,k,C,O,n,S,M,j,N,P=e&&e.proxy,i=lt,D=at,R=!1,T=!1,t=null,A=!1;function I(e){e instanceof Error||(e=it(e)),i(t=e,D)}function B(e){n&&(e instanceof Error||(e=it(e)),n(e,D))}this.on=function(e,t){if("function"!=typeof t)throw it("required args <name, cb>");switch(e){case"openTag":k=t;break;case"text":E=t;break;case"closeTag":C=t;break;case"error":i=t;break;case"warn":n=t;break;case"cdata":O=t;break;case"attention":j=t;break;case"question":M=t;break;case"comment":S=t;break;default:throw it("unsupported event: "+e)}return this},this.ns=function(e){if("object"!==Ue(e=void 0===e?{}:e))throw it("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n["http://www.w3.org/2001/XMLSchema-instance"]="xsi",T=!0,N=n,this},this.parse=function(e){if("string"!=typeof e)throw it("required args <xml=string>");return t=null,function(s){var e,t,n,i,r,o,a,l,c,u,g,p=T?[]:null,b=T?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[st(n)]=t;return i}(N):null,h=[],w=0,f=!1,d=!1,m=0,y=0,_="",x=0;function v(){if(null!==g)return g;var e,t,n,i,r,o,s,a,l,c,u,p=T&&b.xmlns,h=T&&R?[]:null,f=x,d=_,m=d.length,y={},v={};e:for(;f<m;f++)if(l=!1,!(32===(c=d.charCodeAt(f))||c<14&&8<c)){for((c<65||122<c||90<c&&c<97)&&95!==c&&58!==c&&(B("illegal first char attribute name"),l=!0),u=f+1;u<m;u++)if(!(96<(c=d.charCodeAt(u))&&c<123||64<c&&c<91||47<c&&c<59||46===c||45===c||95===c)){if(32===c||c<14&&8<c){B("missing attribute value"),f=u;continue e}if(61===c)break;B("illegal attribute name char"),l=!0}if("xmlns:xmlns"===(a=d.substring(f,u))&&(B("illegal declaration of xmlns"),l=!0),34===(c=d.charCodeAt(u+1)))-1===(u=d.indexOf('"',f=u+2))&&-1!==(u=d.indexOf("'",f))&&(B("attribute value quote missmatch"),l=!0);else if(39===c)-1===(u=d.indexOf("'",f=u+2))&&-1!==(u=d.indexOf('"',f))&&(B("attribute value quote missmatch"),l=!0);else for(B("missing attribute value quotes"),l=!0,u+=1;u<m&&!(32===(c=d.charCodeAt(u+1))||c<14&&8<c);u++);for(-1===u&&(B("missing closing quotes"),u=m,l=!0),l||(o=d.substring(f,u)),f=u;u+1<m&&!(32===(c=d.charCodeAt(u+1))||c<14&&8<c);u++)f===u&&(B("illegal character after attribute end"),l=!0);if(f=u+1,!l)if(a in v)B("attribute <"+a+"> already defined");else if(v[a]=!0,T)if(R)if(null!==(r="xmlns"===a?"xmlns":120===a.charCodeAt(0)&&"xmlns:"===a.substr(0,6)?a.substr(6):null)){if(e=et(o),t=st(r),!(s=N[e])){if("xmlns"===r||t in b&&b[t]!==e)for(;s="ns"+w++,void 0!==b[s];);else s=r;N[e]=s}b[r]!==s&&(i||(b=function(e){var t,n={};for(t in e)n[t]=e[t];return n}(b),i=!0),b[r]=s,"xmlns"===r&&(b[st(s)]=e,p=s),b[t]=e),y[a]=o}else h.push(a,o);else-1===(c=a.indexOf(":"))?y[a]=o:(n=b[a.substring(0,c)])?((a=p===n?a.substr(c+1):n+a.substr(c))===tt&&(o=-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),(n=b[n]||n)+o.substring(c)):p+":"+o),y[a]=o):B(rt(a.substring(0,c)));else y[a]=o}if(R)for(f=0,m=h.length;f<m;f++){if(a=h[f++],o=h[f],-1!==(c=a.indexOf(":"))){if(!(n=b[a.substring(0,c)])){B(rt(a.substring(0,c)));continue}(a=p===n?a.substr(c+1):n+a.substr(c))===tt&&(o=-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),(n=b[n]||n)+o.substring(c)):p+":"+o)}y[a]=o}return g=y}D=function(){for(var e,t=/(\r\n|\r|\n)/g,n=0,i=0,r=0,o=y;r<=m&&(e=t.exec(s))&&(o=e[0].length+e.index,!(m<o));)n+=1,r=o;return{data:-1==m?(i=o,s.substring(y)):0===y?s.substring(y,m):(i=m-r,-1==y?s.substring(m):s.substring(m,y+1)),line:n,column:i}},P&&(u=Object.create({},{name:ot(function(){return l}),originalName:ot(function(){return c}),attrs:ot(v),ns:ot(function(){return b})}));for(;-1!==y;){if(-1===(m=60===s.charCodeAt(y)?y:s.indexOf("<",y)))return h.length?I("unexpected end of file"):0===y?I("missing start tag"):y<s.length&&s.substring(y).trim()&&B(nt);if(y!==m)if(h.length){if(E&&(E(s.substring(y,m),et,D),A))return}else if(s.substring(y,m).trim()&&(B(nt),A))return;if(33===(r=s.charCodeAt(m+1))){if(91===(i=s.charCodeAt(m+2))&&"CDATA["===s.substr(m+3,6)){if(-1===(y=s.indexOf("]]>",m)))return I("unclosed cdata");if(O&&(O(s.substring(m+9,y),D),A))return;y+=3;continue}if(45===i&&45===s.charCodeAt(m+3)){if(-1===(y=s.indexOf("--\x3e",m)))return I("unclosed comment");if(S&&(S(s.substring(m+4,y),et,D),A))return;y+=3;continue}}if(63===r){if(-1===(y=s.indexOf("?>",m)))return I("unclosed question");if(M&&(M(s.substring(m,y+2),D),A))return;y+=2}else{for(t=m+1;;t++){if(o=s.charCodeAt(t),isNaN(o))return y=-1,I("unclosed tag");if(34===o)i=s.indexOf('"',t+1),t=-1!==i?i:t;else if(39===o)i=s.indexOf("'",t+1),t=-1!==i?i:t;else if(62===o){y=t;break}}if(33===r){if(j&&(j(s.substring(m,y+1),et,D),A))return}else{if(g={},47===r){if(d=!(f=!1),!h.length)return I("missing open tag");if(t=l=h.pop(),i=m+2+t.length,s.substring(m+2,i)!==t)return I("closing tag mismatch");for(;i<y;i++)if(!(32===(r=s.charCodeAt(i))||8<r&&r<14))return I("close tag")}else{if(d=47===s.charCodeAt(y-1)?(t=l=s.substring(m+1,y-1),f=!0):(t=l=s.substring(m+1,y),!(f=!0)),!(96<r&&r<123||64<r&&r<91||95===r||58===r))return I("illegal first char nodeName");for(i=1,n=t.length;i<n;i++)if(!(96<(r=t.charCodeAt(i))&&r<123||64<r&&r<91||47<r&&r<59||45===r||95===r||46==r)){if(32===r||r<14&&8<r){l=t.substring(0,i),g=null;break}return I("invalid nodeName")}d||h.push(l)}if(T){if(e=b,f&&(d||p.push(e),null===g)&&(R=-1!==t.indexOf("xmlns",i))&&(x=i,_=t,v(),R=!1),-1!==(r=(c=l).indexOf(":"))){if(!(a=b[l.substring(0,r)]))return I("missing namespace on <"+c+">");l=l.substr(r+1)}else a=b.xmlns;a&&(l=a+":"+l)}if(f&&(x=i,_=t,k)&&(P?k(u,et,d,D):k(l,v,et,d,D),A))return;if(d){if(C&&(C(P?u:l,et,f,D),A))return;T&&(b=f?e:p.pop())}}y+=1}}}(e),D=at,A=!1,t},this.stop=function(){A=!0}}function ut(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var pt={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},ht="xsi:type";function ft(e){return e.xml&&e.xml.serialize}function dt(e){return ft(e)===ht}function mt(e,t){return ut(t)?e.prefix+":"+((t=e.localName).charAt(0).toUpperCase()+t.slice(1)):e.name}function yt(e){return new Error(e)}function vt(e){return e.$descriptor}function gt(e){Xe(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw yt("expected element");var t=this.elementsById,n=vt(e).idProperty;if(n&&(n=e.get(n.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(n))throw new Error("illegal ID <"+n+">");if(t[n])throw yt("duplicate ID <"+n+">");t[n]=e}},this.addWarning=function(e){this.warnings.push(e)}}function bt(){}function wt(){}function _t(){}function xt(e,t){this.property=e,this.context=t}function Et(e,t){this.element=t,this.propertyDesc=e}function kt(){}function f(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function Ct(e,t,n){f.call(this,e,t,n)}function Ot(e,t,n){this.model=e,this.context=n}function St(e){Xe(this,{lax:!1},e=e instanceof Ae?{model:e}:e)}bt.prototype.handleEnd=function(){},bt.prototype.handleText=function(){},bt.prototype.handleNode=function(){},(wt.prototype=Object.create(bt.prototype)).handleNode=function(){return this},(_t.prototype=Object.create(bt.prototype)).handleText=function(e){this.body=(this.body||"")+e},(xt.prototype=Object.create(_t.prototype)).handleNode=function(e){if(this.element)throw yt("expected no sub nodes");return this.element=this.createReference(e),this},xt.prototype.handleEnd=function(){this.element.id=this.body},xt.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(Et.prototype=Object.create(_t.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc,e=Se(n.type,e);n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(kt.prototype=Object.create(_t.prototype)).handleNode=function(e){var t=this;return this.element?t=this.handleChild(e):(e=this.element=this.createElement(e),this.context.addElement(e)),t},(f.prototype=Object.create(kt.prototype)).addReference=function(e){this.context.addReference(e)},f.prototype.handleText=function(e){if(!vt(this.element).bodyProperty)throw yt("unexpected body text <"+e+">");_t.prototype.handleText.call(this,e)},f.prototype.handleEnd=function(){var e=this.body,t=this.element,n=vt(t).bodyProperty;n&&void 0!==e&&(e=Se(n.type,e),t.set(n.name,e))},f.prototype.createElement=function(e){var i,e=e.attributes,t=this.type,r=vt(t),o=this.context,s=new t({}),a=this.model;return h(e,function(e,t){var n=r.propertiesByName[t];n&&n.isReference?n.isMany?h(e.split(" "),function(e){o.addReference({element:s,property:n.ns.name,id:e})}):o.addReference({element:s,property:n.ns.name,id:e}):(n?e=Se(n.type,e):"xmlns"!==t&&(i=u(t,r.ns.prefix),a.getPackage(i.prefix))&&o.addWarning({message:"unknown attribute <"+t+">",element:s,property:t,value:e}),s.set(t,e))}),s},f.prototype.getPropertyForNode=function(e){var t,n,i,r,o=u(e.name),s=this.type,a=this.model,s=vt(s),l=o.name,l=s.propertiesByName[l];if(l&&!l.isAttr)return dt(l)&&(t=e.attributes[ht])?(e=a,c=u(c=t),e=e=e.getPackage(c.prefix),i=(c=c).name,r=c.localName,t=(e=e.xml&&e.xml.typePrefix)&&0===r.indexOf(e)?c.prefix+":"+r.slice(e.length):i,Xe({},l,{effectiveType:vt(n=a.getType(t)).name})):l;var c=a.getPackage(o.prefix);if(c){if(t=mt(o,c),n=a.getType(t),l=ze(s.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return Xe({},l,{effectiveType:vt(n).name})}else if(l=ze(s.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return l;throw yt("unrecognized element <"+o.name+">")},f.prototype.toString=function(){return"ElementDescriptor["+vt(this.type).name+"]"},f.prototype.valueHandler=function(e,t){return new Et(e,t)},f.prototype.referenceHandler=function(e){return new xt(e,this.context)},f.prototype.handler=function(e){return new("Element"===e?Ot:f)(this.model,e,this.context)},f.prototype.handleChild=function(e){var t=this.getPropertyForNode(e),n=this.element,i=t.effectiveType||t.type;return Oe[i]?this.valueHandler(t,n):(void 0!==(e=(i=(t.isReference?this.referenceHandler(t):this.handler(i)).handleNode(e)).element)&&(t.isMany?n.get(t.name).push(e):n.set(t.name,e),t.isReference?(Xe(e,{element:n}),this.context.addReference(e)):e.$parent=n),i)},(Ct.prototype=Object.create(f.prototype)).createElement=function(e){var t=e.name,n=u(t),i=this.model,r=this.type,i=i.getPackage(n.prefix),n=i&&mt(n,i)||t;if(r.hasType(n))return f.prototype.createElement.call(this,e);throw yt("unexpected element <"+e.originalName+">")},(Ot.prototype=Object.create(kt.prototype)).createElement=function(e){var t=e.name,n=u(t).prefix,n=e.ns[n+"$uri"],e=e.attributes;return this.model.createAny(t,n,e)},Ot.prototype.handleChild=function(e){var e=new Ot(this.model,0,this.context).handleNode(e),t=this.element,n=e.element;return void 0!==n&&((t.$children=t.$children||[]).push(n),n.$parent=t),e},Ot.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},St.prototype.fromXML=function(m,e,t){var y=e.rootHandler,n=(e instanceof f?(y=e,e={}):"string"==typeof e?(y=this.handler(e),e={}):"string"==typeof y&&(y=this.handler(y)),this.model),s=this.lax,v=new gt(Xe({},e,{rootHandler:y})),g=new ct({proxy:!0}),a=(e=[],Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e);function l(e,t,n){var t=t(),i=t.line,r=t.column,t=t.data,t="unparsable content "+((t="<"===t.charAt(0)&&-1!==t.indexOf(" ")?t.slice(0,t.indexOf(" "))+">":t)?t+" ":"")+"detected\n\tline: "+i+"\n\tcolumn: "+r+"\n\tnested error: "+e.message;if(n)return v.addWarning({message:t,error:e}),!0;throw yt(t)}function i(e,t){return l(e,t,!0)}y.context=v,a.push(y);var r=/^<\?xml /i,o=/ encoding="([^"]+)"/i,c=/^utf-8$/i;function u(e,t){try{a.peek().handleText(e)}catch(e){i(e,t)}}e=n.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{"http://www.w3.org/XML/1998/namespace":"xml"});return g.ns(e).on("openTag",function(t,i,e,n){var r=t.attrs||{},o=Object.keys(r).reduce(function(e,t){var n=i(r[t]);return e[t]=n,e},{}),o={name:t.name,originalName:t.originalName,attributes:o,ns:t.ns},t=n,n=a.peek();try{a.push(n.handleNode(o))}catch(e){l(e,t,s)&&a.push(new wt)}}).on("question",function(e){r.test(e)&&(e=(e=o.exec(e))&&e[1])&&!c.test(e)&&v.addWarning({message:"unsupported document encoding <"+e+">, falling back to UTF-8"})}).on("closeTag",function(){a.pop().handleEnd()}).on("cdata",u).on("text",function(e,t,n){t=t(e),e=n,t.trim()&&u(t,e)}).on("error",l).on("warn",i),new Promise(function(e,t){var n;try{g.parse(m);for(var i=v.elementsById,r=v.references,o=0;a=r[o];o++){var s,a,l=a.element,c=i[a.id],u=vt(l).propertiesByName[a.property];c||v.addWarning({message:"unresolved reference <"+a.id+">",element:a.element,property:a.property,value:a.id}),u.isMany?(-1===(a=(s=l.get(u.name)).indexOf(a))&&(a=s.length),c?s[a]=c:s.splice(a,1)):l.set(u.name,c)}}catch(e){n=e}var p=y.element,h=(n||p||(n=yt("failed to parse document as <"+y.type.$descriptor.name+">")),v.warnings),f=v.references,d=v.elementsById;return n?(n.warnings=h,t(n)):e({rootElement:p,elementsById:d,references:f,warnings:h})})},St.prototype.handler=function(e){return new Ct(this.model,e)};var Mt=/<|>|'|"|&|\n\r|\n/g,jt=/<|>|&/g;function Nt(i){var n={},r={},o={},s=[],a=[];this.byUri=function(e){return r[e]||i&&i.byUri(e)},this.add=function(e,t){r[e.uri]=e,(t?s:a).push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return n[e||"xmlns"]},this.mapPrefix=function(e,t){n[e||"xmlns"]=t},this.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},this.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);o[n]=this.byUri(t),i&&i.logUsed(e)},this.getUsed=function(e){var t=this;return[].concat(s,a).filter(function(e){return e=t.getNSKey(e),o[e]})}}function Pt(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Dt(e){return $e(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Rt(e,t){return t.isGeneric?Xe({localName:t.ns.localName},e):Xe({localName:(n=t.ns.localName,ut(t=t.$pkg)?(t=n).charAt(0).toLowerCase()+t.slice(1):n)},e);var n}var Tt={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},At={"<":"lt",">":"gt","&":"amp"};function It(e,t,n){return(e=$e(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function Bt(e){this.tagName=e}function Lt(){}function $t(e){this.tagName=e}function d(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Vt(e,t){d.call(this,e,t)}function zt(){this.value="",this.write=function(e){this.value+=e}}function Ut(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Ft(r){return r=Xe({format:!1,preamble:!0},r||{}),{toXML:function(e,t){var n=t||new zt,i=new Ut(n,r.format);if(r.preamble&&i.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new d).build(e).serializeTo(i),!t)return n.value}}}function Wt(e,t){Ae.call(this,e,t)}Bt.prototype.build=function(e){return this.element=e,this},Bt.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Lt.prototype.serializeValue=Lt.prototype.serializeTo=function(e){e.append(this.escape?It(this.value,jt,At):this.value)},Lt.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(jt)&&(this.escape=!0),this},Pt($t,Lt),$t.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},d.prototype.build=function(e){var n,t=(this.element=e).$descriptor,i=this.propertyDescriptor,r=t.isGeneric,o=r?this.parseGeneric(e):this.parseNsAttributes(e);return this.ns=i?this.nsPropertyTagName(i):this.nsTagName(t),this.tagName=this.addTagName(this.ns),r||(i=Fe((n=e).$descriptor.properties,function(e){var t=e.name;return!e.isVirtual&&Ve(n,t)&&(t=n[t])!==e.default?null!==t&&(!e.isMany||t.length):void 0}),this.parseAttributes(Fe(i,function(e){return e.isAttr})),this.parseContainments(Fe(i,function(e){return!e.isAttr}))),this.parseGenericAttributes(e,o),this},d.prototype.nsTagName=function(e){return Rt(this.logNamespaceUsed(e.ns),e)},d.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Xe({localName:e.ns.localName},t)},d.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},d.prototype.nsAttributeName=function(e){var t=$e(e)?u(e):e.ns;return e.inherited||(e=this.logNamespaceUsed(t),this.getNamespaces().logUsed(e),this.isLocalNs(e))?{localName:t.localName}:Xe({localName:t.localName},e)},d.prototype.parseGeneric=function(n){var i=this,r=this.body,o=[];return h(n,function(e,t){"$body"===t?r.push((new Lt).build({type:"String"},e)):"$children"===t?h(e,function(e){r.push(new d(i).build(e))}):0!==t.indexOf("$")&&i.parseNsAttribute(n,t,e)&&o.push({name:t,value:e})}),o},d.prototype.parseNsAttribute=function(e,t,n){var i,e=e.$model,r=u(t);if("xmlns"===r.prefix&&(i={prefix:r.localName,uri:n}),!(i=r.prefix||"xmlns"!==r.localName?i:{uri:n}))return{name:t,value:n};e&&e.getPackage(n)?this.logNamespace(i,!0,!0):(r=this.logNamespaceUsed(i,!0),this.getNamespaces().logUsed(r))},d.prototype.parseNsAttributes=function(n,e){var i=this,t=n.$attrs,r=[];return h(t,function(e,t){t=i.parseNsAttribute(n,t,e);t&&r.push(t)}),r},d.prototype.parseGenericAttributes=function(n,e){var i=this;h(e,function(t){if(t.name!==ht)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},d.prototype.parseContainments=function(e){var o=this,s=this.body,a=this.element;h(e,function(n){var i,r,e=a.get(n.name),t=n.isReference;n.isMany||(e=[e]),n.isBody?s.push((new Lt).build(n,e[0])):je(n.type)?h(e,function(e){s.push(new $t(o.addTagName(o.nsPropertyTagName(n))).build(n,e))}):t?h(e,function(e){s.push(new Bt(o.addTagName(o.nsPropertyTagName(n))).build(e))}):(i=dt(n),r="property"===ft(n),h(e,function(e){var t=i?new Vt(o,n):r?new d(o,n):new d(o);s.push(t.build(e))}))})},d.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent;return t||(n=n&&n.getNamespaces(),e||!n?this.namespaces=t=new Nt(n):t=n),t},d.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix;return i.byUri(r)&&!n||i.add(e,t),i.mapPrefix(o,r),e},d.prototype.logNamespaceUsed=function(e,t){var n,i,r=this.element.$model,o=this.getNamespaces(t),s=e.prefix,t=e.uri;if(!s&&!t)return{localName:e.localName};if(r=pt[s]||r&&(r.getPackage(s)||{}).uri,!(t=t||r||o.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=o.byUri(t))){for(n=s,i=1;o.uriByPrefix(n);)n=s+"_"+i++;e=this.logNamespace({prefix:n,uri:t},r===t)}return s&&o.mapPrefix(s,t),e},d.prototype.parseAttributes=function(e){var i=this,r=this.element;h(e,function(e){var t,n=r.get(e.name);e.isReference&&(n=e.isMany?(t=[],h(n,function(e){t.push(e.id)}),t.join(" ")):n.id),i.addAttribute(i.nsAttributeName(e),n)})},d.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Dt(e)},d.prototype.addAttribute=function(t,e){var n,i,r=this.attrs,o=($e(e)&&(e=It(e,Mt,Tt)),o=r,n=We(n=function(e){return e.name.localName===t.localName&&e.name.uri===t.uri&&e.name.prefix===t.prefix}),i=Le(o)?-1:void 0,h(o,function(e,t){if(n(e,t))return i=t,!1}),i),e={name:t,value:e};-1!==o?r.splice(o,1,e):r.push(e)},d.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;h(e=n?n.getUsed().filter(function(e){return"xml"!==e.prefix}).map(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}).concat(e):e,function(e){t.append(" ").append(Dt(e.name)).append('="').append(e.value).append('"')})},d.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==Lt;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),h(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},Pt(Vt,d),Vt.prototype.parseNsAttributes=function(e){var t,n=d.prototype.parseNsAttributes.call(this,e),i=e.$descriptor;return i.name!==this.propertyDescriptor.type&&(t=this.typeNs=this.nsTagName(i),this.getNamespaces().logUsed(this.typeNs),e=(e=e.$model.getPackage(t.uri)).xml&&e.xml.typePrefix||"",this.addAttribute(this.nsAttributeName(ht),(t.prefix?t.prefix+":":"")+e+i.ns.localName)),n},Vt.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},(Wt.prototype=Object.create(Ae.prototype)).fromXML=function(e,t,n){i=t,"[object String]"!==pe.call(i)&&(n=t,t="dmn:Definitions");var i=new St(fe({model:this,lax:!0},n)),n=i.handler(t);return i.fromXML(e,n)},Wt.prototype.toXML=function(n,e){var i=new Ft(e);return new Promise(function(e,t){try{return e({xml:i.toXML(n)})}catch(e){return t(e)}})};var qt={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}};function Gt(e,t){return new Wt(fe({},qt,e),t)}function Ht(i,e){return e.forEach(function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach(function(e){var t;"default"===e||e in i||(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))})}),Object.freeze(i)}var Xt=Object.prototype.toString,Yt=Object.prototype.hasOwnProperty;function Kt(e,t){if(void 0!==e){var n,i,r="[object Array]"===Xt.call(e)?Qt:Zt;for(n in e)if(i=n,Yt.call(e,i)&&!1===t(e[n],r(n)))return}}function Zt(e){return e}function Qt(e){return Number(e)}function Jt(e){for(var n=e.style,t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];Kt(i,function(e){e&&Kt(e,function(e,t){n[t]=e})})}function en(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):void e.setAttribute(t,n)}var tn=Object.prototype.toString;function nn(e){return new rn(e)}function rn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function on(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t)}function sn(e,t){return e&&"function"==typeof e.matches&&e.matches(t)}function an(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(sn(i,t))return i;i=i.parentNode}return sn(i,t)?i:null}rn.prototype.add=function(e){return this.list.add(e),this},rn.prototype.remove=function(e){return"[object RegExp]"==tn.call(e)?this.removeMatching(e):(this.list.remove(e),this)},rn.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},rn.prototype.toggle=function(e,t){return void 0!==t&&t===this.list.toggle(e,t)||this.list.toggle(e),this},rn.prototype.array=function(){return Array.from(this.list)},rn.prototype.has=rn.prototype.contains=function(e){return this.list.contains(e)};var e={},ln=window.addEventListener?"addEventListener":"attachEvent",cn=window.removeEventListener?"removeEventListener":"detachEvent",un="addEventListener"!=ln?"on":"",m=Ht({__proto__:null,bind:e.bind=function(e,t,n,i){return e[ln](un+t,n,i||!1),n},unbind:e.unbind=function(e,t,n,i){return e[cn](un+t,n,i||!1),n},default:e},[e]),pn=["focus","blur"];function hn(e,t){if("string"!=typeof e)throw new TypeError("String expected");if(t=t||document,!(o=/<([\w:]+)/.exec(e)))return t.createTextNode(e);if(e=e.replace(/^\s+|\s+$/g,""),"body"==(o=o[1]))return(n=t.createElement("html")).innerHTML=e,n.removeChild(n.lastChild);var n,i=(o=Object.prototype.hasOwnProperty.call(y,o)?y[o]:y._default)[0],r=o[1],o=o[2];for((n=t.createElement("div")).innerHTML=r+e+o;i--;)n=n.lastChild;if(n.firstChild==n.lastChild)return n.removeChild(n.firstChild);for(var s=t.createDocumentFragment();n.firstChild;)s.appendChild(n.removeChild(n.firstChild));return s}var fn={bind:function(n,i,e,r,t){return-1!==pn.indexOf(e)&&(t=!0),m.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=an(t,i,!0),e.delegateTarget&&r.call(n,e)},t)},unbind:function(e,t,n,i){return-1!==pn.indexOf(t)&&(i=!0),m.unbind(e,t,n,i)}},e=!1,y=("undefined"!=typeof document&&((fi=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',e=!fi.getElementsByTagName("link").length,fi=void 0),{legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:e?[1,"X<div>","</div>"]:[0,"",""]});y.td=y.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],y.option=y.optgroup=[1,'<select multiple="multiple">',"</select>"],y.thead=y.tbody=y.colgroup=y.caption=y.tfoot=[1,"<table>","</table>"],y.polyline=y.ellipse=y.polygon=y.circle=y.text=y.line=y.path=y.rect=y.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var dn=hn;function mn(e,t){return(t=t||document).querySelector(e)}function yn(e){e.parentNode&&e.parentNode.removeChild(e)}function vn(t){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var e=arguments.length;if(!(1<=e&&Z(arguments[e-1])))return t.apply(this,arguments);var n=arguments[e-1],e=(console.warn(new Error("Passing callbacks to "+t.name.replace("bound ","")+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html")),Array.prototype.slice.call(arguments,0,-1));t.apply(this,e).then(function(e){var t=Object.keys(e)[0];return n(null,e[t])},function(e){return n(e,e.warnings)})}}function gn(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach(function(e){wn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function wn(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _n={width:"100%",height:"100%",position:"relative"},xn=function(){function n(){var e=this,t=(a(this,n),0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});wn(this,"_viewsChanged",function(){e._emit("views.changed",{views:e._views,activeView:e._activeView})}),this._eventBus=new i,this._viewsChanged=se(this._viewsChanged,0),this._views=[],this._viewers={},this.open=vn(this.open.bind(this)),this.importXML=vn(this.importXML.bind(this)),this.saveXML=vn(this.saveXML.bind(this)),this._init(t)}return l(n,[{key:"importXML",value:function(i,l){var c=this;return l=l||{open:!0},new Promise(function(o,s){var a=c._activeView;c._clear().then(function(){var r;i=c._emit("import.parse.start",{xml:i})||i,c._moddle.fromXML(i,"dmn:Definitions").then(function(e){var t=e.rootElement,n=e.references,i=e.elementsById;if(r=e.warnings,t=c._emit("import.parse.complete",u({error:null,definitions:t,elementsById:i,references:n,warnings:r}))||t,c._setDefinitions(t),l.open)return(e=c._getInitialView(c._views,a))?void c.open(e).then(function(e){return{warnings:e.warnings}}).catch(function(e){return{error:e,warnings:e.warnings}}).then(function(e){var t=[].concat(r,e.warnings);c._emit("import.done",{error:e.error,warnings:t}),e.error?(e.error.warnings=t,s(e.error)):o({warnings:t})}):(i=new Error("no displayable contents"),c._emit("import.done",{error:i,warnings:r}),i.warnings=r,s(i));c._emit("import.done",{error:null,warnings:r}),o({warnings:r})}).catch(function(e){var t,n;return r=e.warnings,e=function(e,t){if("failed to parse document as <dmn:Definitions>"!==e.message)return null;t=-1!==t.indexOf('"http://www.omg.org/spec/DMN/20151101/dmn.xsd"')?"1.1":-1!==t.indexOf('"http://www.omg.org/spec/DMN/20180521/MODEL/"')&&"1.2";return t?(e=new Error("unsupported DMN "+t+" file detected; only DMN 1.3 files can be opened"),console.error("Cannot open what looks like a DMN "+t+" diagram. Please refer to https://bpmn.io/l/dmn-compatibility.html to learn how to make the toolkit compatible with older DMN files",e),e):null}(e,i)||(t=e,(n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(t.message))?(t.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid DMN 1.3 diagram file"+n[2],t):null)||e,c._emit("import.parse.complete",u({error:e,warnings:r})),c._emit("import.done",{error:e,warnings:r}),e.warnings=r,s(e)})}).catch(function(e){return c._emit("import.done",{error:e,warnings:[]}),e.warnings=[],s(e)})});function u(e){var t=c._eventBus.createEvent(e);return Object.defineProperty(t,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:e.warnings,references:e.references,elementsById:e.elementsById}}}),t}}},{key:"getDefinitions",value:function(){return this._definitions}},{key:"getActiveView",value:function(){return this._activeView}},{key:"getActiveViewer",value:function(){var e=this.getActiveView();return e&&this._getViewer(e)}},{key:"getView",value:function(t){return this._views.filter(function(e){return e.element===t})[0]}},{key:"getViews",value:function(){return this._views}},{key:"saveXML",value:function(e){var i=this,r=(e=e||{},this._definitions);return new Promise(function(t,n){r?(r=i._emit("saveXML.start",{definitions:r})||r,i._moddle.toXML(r,e).then(function(e){e=e.xml;return{xml:i._emit("saveXML.serialized",{xml:e})||e}}).catch(function(e){return{error:e}}).then(function(e){i._emit("saveXML.done",e),e.error?n(e.error):t({xml:e.xml})})):n(new Error("no definitions loaded"))})}},{key:"on",value:function(){var e;(e=this._eventBus).on.apply(e,arguments)}},{key:"off",value:function(){var e;(e=this._eventBus).off.apply(e,arguments)}},{key:"once",value:function(){var e;(e=this._eventBus).once.apply(e,arguments)}},{key:"attachTo",value:function(e){(e="string"==typeof(e=e.get&&e.constructor.prototype.jquery?e.get(0):e)?mn(e):e).appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){this._emit("detach",{}),yn(this._container)}},{key:"destroy",value:function(){var t=this;Object.keys(this._viewers).forEach(function(e){On(t._viewers[e],"destroy")}),yn(this._container)}},{key:"_init",value:function(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];var t=dn('<div class="dmn-js-parent"></div>'),n=w({},_n,e);w(t.style,{width:En(n.width),height:En(n.height),position:n.position}),this._container=t,e.container&&this.attachTo(e.container)}},{key:"_clear",value:function(){return this._switchView(null)}},{key:"open",value:function(e){return this._switchView(e)}},{key:"_setDefinitions",value:function(e){this._definitions=e,this._updateViews()}},{key:"_updateViews",value:function(){var e=this._definitions;if(e){for(var t=this._getViewProviders(),e=[e].concat(p(e.drgElement||[])),n=this._views,i=[],r=0,o=e;r<o.length;r++){var s=o[r],a=J(t,function(e){return"string"==typeof e.opens?e.opens===s.$type:e.opens(s)});a&&(a={element:s,id:s.id,name:s.name,type:a.id},i.push(a))}var l,c,u=this._activeView;u&&!(l=J(i,function(e){return kn(u,e)})||this._getInitialView(i))?this._switchView(null):(e=!kn(u,l)||Cn(u,l),c=n.length!==i.length||!ne(i,function(t){return J(n,function(e){return kn(e,t)&&!Cn(e,t)})}),this._activeView=l,this._views=i,(e||c)&&this._viewsChanged())}else this._views=[],this._switchView(null)}},{key:"_getInitialView",value:function(e,t){var n;return(n=t?J(e,function(e){return kn(e,t)})||J(e,function(e){return e.type===t}):n)||e[0]}},{key:"_switchView",value:function(a){var l=this;return new Promise(function(n,i){function t(e,t){l._viewsChanged(),e?i(e):n(t)}var e,r=l.getActiveView(),o=a&&l._getViewer(a),s=a&&a.element;r&&(e=l._getViewer(r))!==o&&(On(e,"clear"),e.detach()),l._activeView=a,o?(e!==o&&o.attachTo(l._container),l._emit("import.render.start",{view:a,element:s}),o.open(s).then(function(e){l._emit("import.render.complete",{view:a,error:null,warnings:e.warnings}),t(null,e)}).catch(function(e){l._emit("import.render.complete",{view:a,error:e,warnings:e.warnings}),t(e,null)})):t()})}},{key:"_getViewer",value:function(e){var t=e.type,n=this._viewers[t];return n||(n=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:n})),n}},{key:"_createViewer",value:function(t){var e,n=J(this._getViewProviders(),function(e){return e.id===t});if(n)return n=n.constructor,e=this._options[t]||{},new n(bn(bn(bn({},this._options.common||{}),e),{},{additionalModules:[].concat(p(e.additionalModules||[]),[{_parent:["value",this],moddle:["value",this._moddle]}])}));throw new Error("no provider for view type <"+t+">")}},{key:"_emit",value:function(){var e;return(e=this._eventBus).fire.apply(e,arguments)}},{key:"_createModdle",value:function(e){return new Gt(e.moddleExtensions)}},{key:"_getViewProviders",value:function(){return[]}}]),n}();function En(e){return e+(K(e)?"px":"")}function kn(e,t){return q(e)?!!q(t)&&(e.element===t.element||e.id===t.id):!q(t)}function Cn(e,t){return!e||!t||e.name!==t.name}function On(e,t){Z(e[t])&&e[t]()}function Sn(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}var Mn=/^class[ {]/;function jn(e){return Array.isArray(e)}function Nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(t=p(t=1===t.length&&jn(t[0])?t[0]:t)).pop();return i.$inject=t,i}var Dn=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Rn=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Tn=/\/\*([^*]*)\*\//m;function An(e){if("function"!=typeof e)throw new Error('Cannot annotate "'.concat(e,'". Expected a function!'));var e=e.toString().match(Mn.test(e.toString())?Dn:Rn);return(e=e&&(e[1]||e[2]))&&e.split(",").map(function(e){var t=e.match(Tn);return(t&&t[1]||e).trim()})||[]}function In(e,r){r=r||{get:function(e,t){if(o.push(e),!1===t)return null;throw a('No provider for "'.concat(e,'"!'))}};var o=[],f=this._providers=Object.create(r._providers||null),s=this._instances=Object.create(null),d=s.injector=this,a=function(e){var t=o.join(" -> ");return o.length=0,new Error(t?"".concat(e," (Resolving: ").concat(t,")"):e)};function l(e,t){if(!f[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),i=l(n.shift());n.length;)i=i[n.shift()];return i}if(Nn(s,e))return s[e];if(Nn(f,e)){if(-1!==o.indexOf(e))throw o.push(e),a("Cannot resolve circular dependency!");return o.push(e),s[e]=f[e][0](f[e][1]),o.pop(),s[e]}return r.get(e,t)}function i(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!jn(e))throw a('Cannot invoke "'.concat(e,'". Expected a function!'));e=Pn(e.slice())}return{fn:e,dependencies:(e.$inject||An(e)).map(function(e){return Nn(t,e)?t[e]:l(e)})}}function t(e){var e=i(e),t=e.fn,e=e.dependencies;return new(Function.prototype.bind.apply(t,[null].concat(e)))}function n(e,t,n){e=i(e,n),n=e.fn,e=e.dependencies;return n.apply(t,e)}function c(e,i){if(i&&i.length){var r,o,s,a,t,l=Object.create(null),c=Object.create(null),u=[],p=[],h=[],n=function(t){var n;r=f[t],-1!==i.indexOf(t)&&("private"===r[2]?-1===(o=u.indexOf(r[3]))?(s=r[3].createChild([],i),n=s,a=Pn(function(e){return n.get(e)}),u.push(r[3]),p.push(s),h.push(a),l[t]=[a,t,"private",s]):l[t]=[h[o],t,"private",p[o]]:l[t]=[r[2],r[1]],c[t]=!0),"factory"!==r[2]&&"type"!==r[2]||!r[1].$scope||i.forEach(function(e){-1!==r[1].$scope.indexOf(e)&&(l[t]=[r[2],r[1]],c[e]=!0)})};for(t in f)n(t);i.forEach(function(e){if(!c[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(l)}return new In(e,d)}var u,p,h={factory:n,type:t,value:function(e){return e}};function m(e,t){var n=e.__init__||[];return function(){n.forEach(function(e){"string"==typeof e?t.get(e):t.invoke(e)})}}function y(i){var e,t,n,r,o=i.__exports__;return o?(r=i.__modules__,e=Object.keys(i).reduce(function(e,t){return"__exports__"!==t&&"__modules__"!==t&&"__init__"!==t&&"__depends__"!==t&&(e[t]=i[t]),e},Object.create(null)),t=c((r||[]).concat(e)),n=Pn(function(e){return t.get(e)}),o.forEach(function(e){f[e]=[n,e,"private",t]}),(r=(i.__init__||[]).slice()).unshift(function(){t.init()}),m(i=Object.assign({},i,{__init__:r}),t)):(Object.keys(i).forEach(function(e){var t,n;"__init__"!==e&&"__depends__"!==e&&("private"===i[e][2]?f[e]=i[e]:(t=i[e][0],n=i[e][1],f[e]=[h[t],function(e,t){"value"!==e&&jn(t)&&(t=Pn(t.slice()));return t}(t,n),t]))}),m(i,d))}function v(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(v,e)).indexOf(t)?e:e.concat(t)}this.get=l,this.invoke=n,this.instantiate=t,this.createChild=c,this.init=(u=e.reduce(v,[]).map(y),p=!1,function(){p||(p=!0,u.forEach(function(e){return e()}))})}function Bn(e,t){var r=this;e.on(["render.shape","render.connection"],t=t||1e3,function(e,t){var e=e.type,n=t.element,i=t.gfx,t=t.attrs;if(r.canRender(n))return"render.shape"===e?r.drawShape(i,n,t):r.drawConnection(i,n,t)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(r.canRender(t))return"render.getShapePath"===e.type?r.getShapePath(t):r.getConnectionPath(t)})}function Ln(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function _(e,t){Ln(t,e)}Bn.prototype.canRender=function(){},Bn.prototype.drawShape=function(){},Bn.prototype.drawConnection=function(){},Bn.prototype.getShapePath=function(){},Bn.prototype.getConnectionPath=function(){};var $n=2,Vn={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":$n,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":$n,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function zn(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Vn[i];r?(r===$n&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function x(e,t,n){if("string"==typeof t){if(void 0===n)return l=e,Vn[c=t]?l.style[c]:l.getAttributeNS(null,c);zn(e,t,n)}else for(var i,r=e,o=t,s=Object.keys(o),a=0;i=s[a];a++)zn(r,i,o[i]);var l,c;return e}var Un=Object.prototype.toString;function Fn(e){return new Wn(e)}function Wn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function qn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Gn(e){for(var t;t=e.firstChild;)qn(t)}Wn.prototype.add=function(e){return this.list.add(e),this},Wn.prototype.remove=function(e){return"[object RegExp]"==Un.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Wn.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Wn.prototype.toggle=function(e,t){return void 0!==t&&t===this.list.toggle(e,t)||this.list.toggle(e),this},Wn.prototype.array=function(){return Array.from(this.list)},Wn.prototype.has=Wn.prototype.contains=function(e){return this.list.contains(e)};var Hn={svg:"http://www.w3.org/2000/svg"},Xn='<svg xmlns="'+Hn.svg+'"';function Yn(e){var t=!1,n=("<svg"===e.substring(0,4)?-1===e.indexOf(Hn.svg)&&(e=Xn+e.substring(4)):(e=Xn+">"+e+"</svg>",t=!0),e=e,(n=new DOMParser).async=!1,n.parseFromString(e,"text/xml"));if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function E(e,t){var n="<"===e.charAt(0)?(n=Yn(e).firstChild,document.importNode(n,!0)):document.createElementNS(Hn.svg,e);return t&&x(n,t),n}var Kn=null;function Zn(){return Kn=null===Kn?E("svg"):Kn}function Qn(e,t){for(var n,i=Object.keys(t),r=0;n=i[r];r++)e[n]=t[n];return e}var Jn=/([&<>]{1})/g,ei=/([\n\r"]{1})/g,ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function ni(e,t){return e.replace(t,function(e,t){return ti[t]||t})}function ii(e,t){var n=Yn(t);if(Gn(e),t){"#document-fragment"!==n.nodeName&&(n=n.documentElement);t=n.childNodes;for(var i=Array.prototype.slice.call(t),r=0;r<i.length;r++)Ln(i[r],e)}}function ri(e){for(var t=e.firstChild,n=[];t;)!function e(t,n){var i,r,o,s,a;switch(t.nodeType){case 3:n.push(ni(t.textContent,Jn));break;case 1:if(n.push("<",t.tagName),t.hasAttributes())for(i=0,r=(o=t.attributes).length;i<r;++i)s=o.item(i),n.push(" ",s.name,'="',ni(s.value,ei),'"');if(t.hasChildNodes()){for(n.push(">"),i=0,r=(a=t.childNodes).length;i<r;++i)e(a.item(i),n);n.push("</",t.tagName,">")}else n.push("/>");break;case 8:n.push("\x3c!--",ni(t.nodeValue,Jn),"--\x3e");break;case 4:n.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}}(t,n),t=t.nextSibling;return n.join("")}function oi(e,t){var n,i,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem((i=e,(r=r)instanceof SVGMatrix?i.createSVGTransformFromMatrix(r):r))}function si(e,t){e=e.transform.baseVal;return t&&oi(e,t=Array.isArray(t)?t:[t]),e.consolidate()}function ai(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function li(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}function ci(e,t){var n=E("polyline");return x(n,{points:li(e)}),t&&x(n,t),n}function ui(e,r){var o,s,a,l;return r=!!r,g(e=X(e)?e:[e],function(e){var t=e,e=(t=e.waypoints&&!r?ui(e.waypoints,!0):t).x,n=t.y,i=t.height||0,t=t.width||0;(e<o||void 0===o)&&(o=e),(n<s||void 0===s)&&(s=n),(a<e+t||void 0===a)&&(a=e+t),(l<n+i||void 0===l)&&(l=n+i)}),{x:o,y:s,height:l-s,width:a-o}}function pi(e){return!(!e||!e.isFrame)}function hi(e,t){Bn.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Sn(hi,Bn),hi.prototype.canRender=function(){return!0},hi.prototype.drawShape=function(e,t,n){var i=E("rect");return x(i,{x:0,y:0,width:t.width||0,height:t.height||0}),pi(t)?x(i,w({},this.FRAME_STYLE,n||{})):x(i,w({},this.SHAPE_STYLE,n||{})),_(e,i),i},hi.prototype.drawConnection=function(e,t,n){t=ci(t.waypoints,w({},this.CONNECTION_STYLE,n||{}));return _(e,t),t},hi.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return ai([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])},hi.prototype.getConnectionPath=function(e){for(var t,n=e.waypoints,i=[],r=0;t=n[r];r++)t=t.original||t,i.push([0===r?"M":"L",t.x,t.y]);return ai(i)},hi.$inject=["eventBus","styles"];var fi={__init__:["defaultRenderer"],defaultRenderer:["type",hi],styles:["type",function(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},i=this;this.cls=function(e,t,n){return w(this.style(t,n),{class:e})},this.style=function(e,t){X(e)||t||(t=e,e=[]);e=te(e,function(e,t){return w(e,n[t]||{})},{});return t?w(e,t):e},this.computeStyle=function(e,t,n){return X(t)||(n=t,t=[]),i.style(t||[],w({},n,e||{}))}}]};function di(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function mi(e,t){return Math.round(e*t)/t}function yi(e){return K(e)?e+"px":e}function vi(e,t,n){var i=E("g"),t=(Fn(i).add(t),void 0!==n?n:e.childNodes.length-1);return e.insertBefore(i,e.childNodes[t]||null),i}var gi={shape:["x","y","width","height"],connection:["waypoints"]};function t(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}function bi(e,t){t="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",t)}t.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t.prototype._init=function(e){var t,n,i=this._eventBus,r=this._container=(t=(r=w({},{width:"100%",height:"100%"},r=e)).container||document.body,(n=document.createElement("div")).setAttribute("class","djs-container djs-parent"),Jt(n,{position:"relative",overflow:"hidden",width:yi(r.width),height:yi(r.height)}),t.appendChild(n),n),o=this._svg=E("svg"),s=(x(o,{width:"100%",height:"100%"}),_(r,o),this._viewport=vi(o,"viewport"));!1!==e.deferUpdate&&(this._viewboxChanged=se(ae(this._viewboxChanged,this),300)),i.on("diagram.init",function(){i.fire("canvas.init",{svg:o,viewport:s})},this),i.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],function(){delete this._cachedViewbox},this),i.on("diagram.destroy",500,this._destroy,this),i.on("diagram.clear",500,this._clear,this)},t.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},t.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t="waypoints"in(t=e)?"connection":"x"in t?"shape":"root";"root"==t?n.removeRootElement(e):n._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},t.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},t.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=(n=this._layers[e])||(this._layers[e]=this._createLayer(e,t));if(void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},t.prototype._getChildIndex=function(n){return te(this._layers,function(e,t){return t.visible&&n>=t.index&&e++,e},0)},t.prototype._createLayer=function(e,t){var n=this._getChildIndex(t=void 0===t?1:t);return{group:vi(this._viewport,"layer-"+e,n),index:t,visible:!0}},t.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");var t,n,i,r=this._layers[e];if(r)return t=this._viewport,n=r.group,i=r.index,r.visible||(i=this._getChildIndex(i),t.insertBefore(n,t.childNodes[i]||null),r.visible=!0),n;throw new Error("layer <"+e+"> does not exist")},t.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");var t,n=this._layers[e];if(n)return t=n.group,n.visible&&(qn(t),n.visible=!1),t;throw new Error("layer <"+e+"> does not exist")},t.prototype._removeLayer=function(e){var t=this._layers[e];t&&(delete this._layers[e],qn(t.group))},t.prototype.getActiveLayer=function(){var e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},t.prototype.findRoot=function(e){if(e="string"==typeof e?this._elementRegistry.get(e):e)return(this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{}).rootElement},t.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},t.prototype._findPlaneForRoot=function(t){return J(this._planes,function(e){return e.rootElement===t})},t.prototype.getContainer=function(){return this._container},t.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(g([i.gfx,i.secondaryGfx],function(e){e&&(n?Fn(e).add(t):Fn(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},t.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},t.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},t.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),Fn(this.getGraphics(e)).has(t)},t.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},t.prototype.getRootElement=function(){var e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},t.prototype.addRootElement=function(e){var t=this._rootsIdx++,t=(e=e||{id:"__implicitroot_"+t,children:[],isImplicit:!0}).layer="root-"+t,n=(this._ensureValid("root",e),this.getLayer(t,0));return this.hideLayer(t),this._addRoot(e,n),this._planes.push({rootElement:e,layer:n}),e},t.prototype.removeRootElement=function(t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._findPlaneForRoot(t))return this._removeRoot(t),this._removeLayer(t.layer),this._planes=this._planes.filter(function(e){return e.rootElement!==t}),this._rootElement===t&&(this._rootElement=null),t},t.prototype.setRootElement=function(e,t){if(q(t))throw new Error("override not supported");if(e!==this._rootElement){if(e)return this._findPlaneForRoot(e)||(e=this.addRootElement(e)),this._setRoot(e),e;throw new Error("rootElement required")}},t.prototype._removeRoot=function(e){var t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},t.prototype._addRoot=function(e,t){var n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})},t.prototype._setRoot=function(e,t){var n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t=t||this._findPlaneForRoot(e).layer,this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},t.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");var n=gi[e];if(!ne(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},t.prototype._setParent=function(e,t,n){!function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}(t.children,e,n),e.parent=t},t.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory,n=(this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i),o.create(e,t,i));return this._elementRegistry.add(t,n),o.update(e,t,n),r.fire(e+".added",{element:t,gfx:n}),t},t.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},t.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},t.prototype._removeElement=function(e,t){var n,i=this._elementRegistry,r=this._graphicsFactory,o=this._eventBus;if(e=i.get(e.id||e))return o.fire(t+".remove",{element:e}),r.remove(e),r=e.parent&&e.parent.children,n=e,r&&n&&-1!==(n=r.indexOf(n))&&r.splice(n,1),e.parent=null,o.fire(t+".removed",{element:e}),i.remove(e),e},t.prototype.removeShape=function(e){return this._removeElement(e,"shape")},t.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},t.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},t.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},t.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},t.prototype.viewbox=function(t){var n,i,e,r,o,s;return void 0===t&&this._cachedViewbox?this._cachedViewbox:(n=this._viewport,i=this.getSize(),t?(this._changeViewbox(function(){r=Math.min(i.width/t.width,i.height/t.height);var e=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);si(n,e)}),t):(e=(e=this._rootElement?this.getActiveLayer():null)&&e.getBBox()||{},s=(s=si(n))?s.matrix:function(e,t,n,i,r,o){var s=Zn().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return Qn(s,e);case 6:return Qn(s,{a:e,b:t,c:n,d:i,e:r,f:o})}}(),r=mi(s.a,1e3),o=mi(-s.e||0,1e3),s=mi(-s.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:s?s/r:0,width:i.width/r,height:i.height/r,scale:r,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:i}))},t.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=w({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),bi(t,n)}),{x:n.e,y:n.f}},t.prototype.scrollToElement=function(e,t){var n,i,r,o=100,s=("string"==typeof e&&(e=this._elementRegistry.get(e)),this.findRoot(e)),s=(s!==this.getRootElement()&&this.setRootElement(s),"number"==typeof(t=t||{})&&(o=t),t={top:t.top||o,right:t.right||o,bottom:t.bottom||o,left:t.left||o},ui(e)),o=di(s),e=this.viewbox(),a=this.zoom(),t=(e.y+=t.top/a,e.x+=t.left/a,e.width-=(t.right+t.left)/a,e.height-=(t.bottom+t.top)/a,di(e));t=s.width<e.width&&s.height<e.height?(r=Math.max(0,o.right-t.right),n=Math.min(0,o.left-t.left),i=Math.max(0,o.bottom-t.bottom),o=Math.min(0,o.top-t.top),r=r||n,i||o):(r=s.x-e.x,s.y-e.y),this.scroll({dx:-r*a,dy:-t*a})},t.prototype.zoom=function(e,t){var n,i;return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!==Ue(t)&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),mi(i.a,1e3)):this.viewbox(e).scale},t.prototype._fitViewport=function(e){var t,n=this.viewbox(),i=n.outer,n=n.inner,e=0<=n.x&&0<=n.y&&n.x+n.width<=i.width&&n.y+n.height<=i.height&&!e?{x:0,y:0,width:Math.max(n.width+n.x,i.width),height:Math.max(n.height+n.y,i.height)}:(t=Math.min(1,i.width/n.width,i.height/n.height),{x:n.x+(e?n.width/2-i.width/t/2:0),y:n.y+(e?n.height/2-i.height/t/2:0),width:i.width/t,height:i.height/t});return this.viewbox(e),this.viewbox(!1).scale},t.prototype._setZoom=function(e,t){var n=this._svg,i=this._viewport,r=n.createSVGMatrix(),n=n.createSVGPoint(),i=i.getCTM(),o=i.a,o=t?(n=w(n,t).matrixTransform(i.inverse()),t=r.translate(n.x,n.y).scale(1/o*e).translate(-n.x,-n.y),i.multiply(t)):r.scale(e);return bi(this._viewport,o),o},t.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},t.prototype.getAbsoluteBBox=function(e){var t=this.viewbox();return{x:(e=e.waypoints?this.getGraphics(e).getBBox():e).x*t.scale-t.x*t.scale,y:e.y*t.scale-t.y*t.scale,width:e.width*t.scale,height:e.height*t.scale}},t.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var wi="data-element-id";function n(e){this._elements={},this._eventBus=e}n.$inject=["eventBus"],n.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),x(t,wi,i),n&&x(n,wi,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},n.prototype.remove=function(e){var t=this._elements,e=e.id||e,n=e&&t[e];n&&(x(n.gfx,wi,""),n.secondaryGfx&&x(n.secondaryGfx,wi,""),delete t[e])},n.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},n.prototype.updateGraphics=function(e,t,n){var e=e.id||e,i=this._elements[e];return n?i.secondaryGfx=t:i.gfx=t,t&&x(t,wi,e),t},n.prototype.get=function(e){e="string"==typeof e?e:e&&x(e,wi),e=this._elements[e];return e&&e.element},n.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},n.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=t[n[i]],o=r.element;if(e(o,r.gfx))return o}},n.prototype.getAll=function(){return this.filter(function(e){return e})},n.prototype.forEach=function(n){var i=this._elements;Object.keys(i).forEach(function(e){var e=i[e],t=e.element,e=e.gfx;return n(t,e)})},n.prototype.getGraphics=function(e,t){e=e.id||e,e=this._elements[e];return e&&(t?e.secondaryGfx:e.gfx)},n.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var _i={extend:function(e,i,t,r){var o=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),i.unset(e,o,r)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,t){var n=this.indexOf(e);if(void 0===t){if(-1!==n)return;t=this.length}-1!==n&&this.splice(n,1),this.splice(t,0,e),-1===n&&i.set(e,o,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},isExtended:function(e){return!0===e.__refs_collection}};function xi(t,n,i){var e=_i.extend(i[n.name]||[],t,n,i);Object.defineProperty(i,n.name,{enumerable:n.enumerable,value:e}),e.length&&e.forEach(function(e){t.set(e,n.inverse,i)})}function Ei(e,t){if(!(this instanceof Ei))return new Ei(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ei.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}var n,i,r,o;t.collection?xi(this,t,e):(n=this,i=e,r=(e=t).inverse,o=i[e.name],Object.defineProperty(i,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return o},set:function(e){var t;e!==o&&(t=o,o=null,t&&n.unset(t,r,i),o=e,n.set(o,r,i))}}))},Ei.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return _i.isExtended(n)||xi(this,t,e),n},Ei.prototype.ensureBound=function(e,t){var n;n=t,Object.prototype.hasOwnProperty.call(e,n.name||n)||this.bind(e,t)},Ei.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},Ei.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var e=Ei,ki=(e.Collection=_i,new e({name:"children",enumerable:!0,collection:!0},{name:"parent"})),Ci=new e({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Oi=new e({name:"attachers",collection:!0},{name:"host"}),Si=new e({name:"outgoing",collection:!0},{name:"source"}),Mi=new e({name:"incoming",collection:!0},{name:"target"});function ji(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),ki.bind(this,"parent"),Ci.bind(this,"labels"),Si.bind(this,"outgoing"),Mi.bind(this,"incoming")}function Ni(){ji.call(this),ki.bind(this,"children"),Oi.bind(this,"host"),Oi.bind(this,"attachers")}function Pi(){Ni.call(this)}function Di(){Ni.call(this),Ci.bind(this,"labelTarget")}function Ri(){ji.call(this),Si.bind(this,"source"),Mi.bind(this,"target")}Sn(Ni,ji),Sn(Pi,Ni),Sn(Di,Ni),Sn(Ri,ji);var Ti={connection:Ri,shape:Ni,label:Di,root:Pi};function Ai(){this._uid=12}function Ii(e,t,n){var i=i?Zn().createSVGTransformFromMatrix(i):Zn().createSVGTransform();i.setTranslate(t,n),si(e,i)}function Bi(e,t){this._eventBus=e,this._elementRegistry=t}function Li(e,t,n){n=n||t.firstChild;e!==n&&t.insertBefore(e,n)}Ai.prototype.createRoot=function(e){return this.create("root",e)},Ai.prototype.createLabel=function(e){return this.create("label",e)},Ai.prototype.createShape=function(e){return this.create("shape",e)},Ai.prototype.createConnection=function(e){return this.create("connection",e)},Ai.prototype.create=function(e,t){(t=w({},t||{})).id||(t.id=e+"_"+this._uid++);var n=Ti[e];if(n)return w(new n,t);throw new Error("unknown type: <"+e+">")},Bi.$inject=["eventBus","elementRegistry"],Bi.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=n.parentNode.childNodes[1])||(Fn(t=E("g")).add("djs-children"),_(n.parentNode,t)):t=n,t},Bi.prototype._clear=function(e){e=e.childNodes[0];return on(e),e},Bi.prototype._createContainer=function(e,t,n,i){var r=E("g"),n=(Fn(r).add("djs-group"),void 0!==n?Li(r,t,t.childNodes[n]):_(t,r),E("g")),t=(Fn(n).add("djs-element"),Fn(n).add("djs-"+e),i&&Fn(n).add("djs-frame"),_(r,n),E("g"));return Fn(t).add("djs-visual"),_(n,t),n},Bi.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,pi(t))},Bi.prototype.updateContainments=function(e){var i=this,r=this._elementRegistry;g(te(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),function(e){var t,n=e.children;n&&(t=i._getChildrenContainer(e),g(n.slice().reverse(),function(e){Li(r.getGraphics(e).parentNode,t)}))})},Bi.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},Bi.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},Bi.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},Bi.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},Bi.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),Ii(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?x(n,"display","none"):x(n,"display","block")}},Bi.prototype.remove=function(e){qn(this._elementRegistry.getGraphics(e).parentNode)};var $i={__depends__:[fi],__init__:["canvas"],canvas:["type",t],elementRegistry:["type",n],elementFactory:["type",Ai],eventBus:["type",i],graphicsFactory:["type",Bi]};function Vi(e){var e=[{config:["value",e=e||{}]},$i].concat(e.modules||[]);return(e=new In(e=e)).init(),e}function zi(e,t){this.injector=t=t||Vi(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}function k(e,t){e=Ui(e);return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function Ui(e){return e&&e.businessObject||e}zi.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},zi.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Fi=new e({name:"dmnElementRef",enumerable:!0},{name:"di",configurable:!0});function Wi(i,e){var r=[];function o(t){try{t.di&&function(e){if(e.gfx)throw new Error("already rendered "+e.id);i.element(e)}(t)}catch(e){n(e.message,{element:t,error:e})}}function s(e){var t;(t=(e=e).dmnElementRef)?t.di?n("multiple DI elements defined for element",{element:t}):(Fi.bind(t,"di"),t.di=e):n("no DMN element referenced in element",{element:e})}function a(e){r.push(e)}function n(e,t){i.error(e,t)}return{handleDefinitions:function(e,t){var n=e.dmnDI;if(!n)throw new Error("no dmndi:DMNDI");if(n=n.diagrams||[],t&&-1===n.indexOf(t))throw new Error("diagram not part of dmndi:DMNDI");if(!(t=!t&&n&&n.length?n[0]:t))throw new Error("no diagram to display");g((e.di=t).diagramElements,s),i.root(e),g(e.get("drgElement"),function(e){var t;o(e),t=e,g(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(e){g(t[e],function(e){a(function(){o(e)})})})}),g(e.get("artifact"),function(e){var t;k(e,"dmn:Association")?(t=e,a(function(){o(t)})):o(e)}),g(r,function(e){e()})}}}function qi(e,t,n){var i,r=e.get("drdImporter"),e=e.get("eventBus"),o=[];e.fire("import.start",{definitions:t});try{new Wi({root:function(e){return r.root(e)},element:function(e,t){return r.add(e,t)},error:function(e,t){o.push({message:e,context:t})}}).handleDefinitions(t)}catch(e){i=e}e.fire("import.done",{error:i,warnings:o}),n(i,o)}(function(e){var a=e.exports=function(e,t){if(t=t||16,(e=void 0===e?128:e)<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var r=n-Math.floor(n),o="",i=0;i<Math.floor(n);i++)o=Math.floor(Math.random()*t).toString(t)+o;r&&(r=Math.pow(t,r),o=Math.floor(Math.random()*r).toString(t)+o);r=parseInt(o,t);return r!==1/0&&r>=Math.pow(2,e)?a(e,t):o};a.rack=function(i,r,o){function n(e){var t=0;do{if(10<t++){if(!o)throw new Error("too many ID collisions, use more bits");i+=o}var n=a(i,r)}while(Object.hasOwnProperty.call(s,n));return s[n]=e,n}var s=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=i||128,n.base=r||16,n}})(fi={exports:{}});var Gi=fi.exports;function Hi(e){if(!(this instanceof Hi))return new Hi(e);this._seed=(e=e||[128,36,1]).length?Gi.rack(e[0],e[1],e[2]):e}Hi.prototype.next=function(e){return this._seed(e||!0)},Hi.prototype.nextPrefixed=function(e,t){for(var n;n=e+this.next(!0),this.assigned(n););return this.claim(n,t),n},Hi.prototype.claim=function(e,t){this._seed.set(e,t||!0)},Hi.prototype.assigned=function(e){return this._seed.get(e)||!1},Hi.prototype.unclaim=function(e){delete this._seed.hats[e]},Hi.prototype.clear=function(){for(var e in this._seed.hats)this.unclaim(e)};var Xi=new Hi,Yi="hsl(225, 10%, 15%)";function Ki(e,t,i,n,r,s){Bn.call(this,t);var o=Xi.next(),a=n.computeStyle,l={},c=e&&e.defaultFillColor||"white",u=e&&e.defaultStrokeColor||Yi,p=e&&e.defaultLabelColor;function h(e,t,n){var i,r,t=e+"-"+Qi(t)+"-"+Qi(n)+"-"+o;return l[t]||(i=t,n=n,"association-start"===(e=e)?(x(r=E("path"),{d:"M 11 5 L 1 10 L 11 15"}),f(i,{element:r,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})):"association-end"===e?(x(r=E("path"),{d:"M 1 5 L 11 10 L 1 15"}),f(i,{element:r,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})):"information-requirement-end"===e?(x(r=E("path"),{d:"M 1 5 L 11 10 L 1 15 Z"}),f(i,{element:r,attrs:{fill:n,stroke:"none"},ref:{x:11,y:10},scale:1})):"knowledge-requirement-end"===e?(x(r=E("path"),{d:"M 1 3 L 11 10 L 1 17"}),f(i,{element:r,attrs:{fill:"none",stroke:n,strokeWidth:2},ref:{x:11,y:10},scale:.8})):"authority-requirement-end"===e&&(x(r=E("circle"),{cx:3,cy:3,r:3}),f(i,{element:r,attrs:{fill:n,stroke:"none"},ref:{x:3,y:3},scale:.9}))),"url(#"+t+")"}function f(e,t){var n=w({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1,o=("none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]),E("marker")),n=(x(t.element,n),_(o,t.element),x(o,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:"auto"}),mn("defs",s._svg));n||(n=E("defs"),_(s._svg,n)),_(n,o),l[e]=o}function d(e,t,n,i,r,o){Y(r)&&(o=r,r=0),r=r||0,o=a(o,{stroke:Yi,strokeWidth:2,fill:"white"});var s=E("rect");return x(s,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),x(s,o),_(e,s),s}function m(e,t,n){t=r.createText(t||"",n);return en(t,"class","djs-label"),_(e,t),t}function y(e,t,n,i){m(e,Ui(t).name,i=w({box:t,align:n,padding:5,style:{fill:Ji(0,p,u)}},i))}function v(e,t,n){n=a(n,["no-fill"],{strokeWidth:2,stroke:Yi});var i=E("path");return x(i,{d:t}),x(i,n),_(e,i),i}var g={"dmn:Decision":function(e,t){var n=d(e,t.width,t.height,0,{stroke:u,fill:c});return y(e,t,"center-middle"),n},"dmn:KnowledgeSource":function(e,t){var n=v(e,i.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.075}}),{strokeWidth:2,fill:c,stroke:u});return y(e,t,"center-middle"),n},"dmn:BusinessKnowledgeModel":function(e,t){var n=v(e,i.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.3}}),{strokeWidth:2,fill:c,stroke:u});return y(e,t,"center-middle"),n},"dmn:InputData":function(e,t){var n=d(e,t.width,t.height,22,{stroke:u,fill:c});return y(e,t,"center-middle"),n},"dmn:TextAnnotation":function(e,t){var n=d(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return v(e,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:u}),m(e,Zi(t).text||"",{style:{fill:Ji(0,p,u)},box:t,align:"left-top",padding:5}),n},"dmn:Association":function(e,t){var n=Zi(t),i=c,r=u,o={stroke:r,strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"};return"One"!==n.associationDirection&&"Both"!==n.associationDirection||(o.markerEnd=h("association-end",i,r)),"Both"===n.associationDirection&&(o.markerStart=h("association-start",i,r)),b(e,t.waypoints,o)},"dmn:InformationRequirement":function(e,t){var n={stroke:u,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:h("information-requirement-end",c,u)};return b(e,t.waypoints,n)},"dmn:KnowledgeRequirement":function(e,t){var n={stroke:u,strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:h("knowledge-requirement-end",c,u)};return b(e,t.waypoints,n)},"dmn:AuthorityRequirement":function(e,t){var n={stroke:u,strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:h("authority-requirement-end",c,u)};return b(e,t.waypoints,n)}};function b(e,t,n){t=ci(t,n=a(n,["no-fill"],{stroke:Yi,strokeWidth:2,fill:"none"}));return _(e,t),t}this.canRender=function(e){return k(e,"dmn:DMNElement")||k(e,"dmn:InformationRequirement")||k(e,"dmn:KnowledgeRequirement")||k(e,"dmn:AuthorityRequirement")},this.drawShape=function(e,t){var n=g[t.type];return n?n(e,t):Bn.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type;return(n=g[n])?n(e,t):Bn.prototype.drawConnection.apply(this,[e,t])}}function Zi(e){return e.businessObject}function Qi(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function Ji(e,t,n){return t||n}Sn(Ki,Bn),Ki.$inject=["config.drdRenderer","eventBus","pathMap","styles","textRenderer","canvas"];var er={width:150,height:50};function tr(e,t,n){for(var i,r,o,s,a,l=e.shift(),c=l;;){if((a=function(e,t){var n;t.textContent=e;try{var i,r=""===e;return t.textContent=r?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}(c,n)).width=c?a.width:0," "===c||""===c||a.width<Math.round(t)||c.length<2)return i=e,o=l,s=a,(r=c).length<o.length&&(o=o.slice(r.length).trim(),i.unshift(o)),{width:s.width,height:s.height,text:r};c=function(e,t,n){n=Math.max(e.length*(n/t),1),t=function(e,t){var n,i=e.split(/(\s|-|\u00AD)/g),r=[],o=0;if(1<i.length)for(;n=i.shift();){if(!(n.length+o<t)){"-"!==n&&n!==nr||r.pop();break}r.push(n),o+=n.length}e=r[r.length-1];e&&e===nr&&(r[r.length-1]="-");return r.join("")}(e,n);t=t||e.slice(0,Math.max(Math.round(n-1),1));return t}(c,a.width,t)}}var nr="­";function ir(e){this._config=w({},{size:er,padding:0,style:{},align:"center-top"},e||{})}ir.prototype.createText=function(e,t){return this.layoutText(e,t).element},ir.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},ir.prototype.layoutText=function(e,t){var n,i=w({},this._config.size,t.box),r=w({},this._config.style,t.style),o={horizontal:(n=(n=t.align||this._config.align).split("-"))[0]||"center",vertical:n[1]||"top"},s=Y(n=(void 0!==t.padding?t:this._config).padding)?w({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n},a=t.fitBox||!1,l=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(r),c=e.split(/\u00AD?\r?\n/),u=[],p=i.width-s.left-s.right,h=E("text");for(x(h,{x:0,y:0}),x(h,r),(n=document.getElementById("helper-svg"))||(x(n=E("svg"),{id:"helper-svg"}),Jt(n,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(n)),_(n,h);c.length;)u.push(tr(c,p,h));"middle"===o.vertical&&(s.top=s.bottom=0);var t=te(u,function(e,t,n){return e+(l||t.height)},0)+s.top+s.bottom,f=te(u,function(e,t,n){return t.width>e?t.width:e},0),d=s.top,m=("middle"===o.vertical&&(d+=(i.height-t)/2),d-=(l||u[0].height)/4,E("text"));return x(m,r),g(u,function(e){var t;switch(d+=l||e.height,o.horizontal){case"left":t=s.left;break;case"right":t=(a?f:p)-s.right-e.width;break;default:t=Math.max(((a?f:p)-e.width)/2+s.left,0)}var n=E("tspan");x(n,{x:t,y:d}),n.textContent=e.text,_(m,n)}),qn(h),{dimensions:{width:f,height:t},element:m}};function rr(e){var n=w({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),t=parseInt(n.fontSize,10)-1,i=w({},n,{fontSize:t},e&&e.externalStyle||{}),r=new ir({style:n});this.getExternalLabelBounds=function(e,t){t=r.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-t.width/2),y:Math.round(e.y),width:Math.ceil(t.width),height:Math.ceil(t.height)}},this.getTextAnnotationBounds=function(e,t){t=r.getDimensions(t,{box:e,style:n,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(t.height))}},this.createText=function(e,t){return r.createText(e,t||{})},this.getDefaultStyle=function(){return n},this.getExternalStyle=function(){return i}}rr.$inject=["config.textRenderer"];var or=/\{([^{}]+)\}/g,sr=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;e={__init__:["drdRenderer"],drdRenderer:["type",Ki],textRenderer:["type",rr],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e],e=t.abspos?(n=t.abspos.x,t.abspos.y):(n=t.containerWidth*t.position.mx,t.containerHeight*t.position.my),o={};if(t.position){for(var s=t.containerHeight/r.height*t.yScaleFactor,a=t.containerWidth/r.width*t.xScaleFactor,l=0;l<r.heightElements.length;l++)o["y"+l]=r.heightElements[l]*s;for(var c=0;c<r.widthElements.length;c++)o["x"+c]=r.widthElements[c]*a}return t=r.d,i={mx:n,my:e,e:o},String(t).replace(or,function(e,t){return e=e,o=n=i,t.replace(sr,function(e,t,n,i,r){t=t||i,o&&"function"==typeof(o=t in o?o[t]:o)&&r&&(o=o())}),o=(null==o||o==n?e:o)+"";var n,o})}}]};function ar(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._elementFactory=n}function lr(e,t){return w({id:e.id,type:e.$type,businessObject:e},t)}function cr(e){return e.split("#").pop()}ar.$inject=["eventBus","canvas","elementFactory","elementRegistry"],ar.prototype.root=function(e){e=this._elementFactory.createRoot(lr(e));return this._canvas.setRootElement(e),e},ar.prototype.add=function(e){var t,n,i,r,o,s=this._elementFactory,a=this._canvas,l=this._eventBus,c=e.di;if(c.$instanceOf("dmndi:DMNShape"))o=c.bounds,o=lr(e,{x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}),t=s.createShape(o),a.addShape(t),l.fire("drdElement.added",{element:t,di:c});else{if(!c.$instanceOf("dmndi:DMNEdge"))throw new Error("unknown di for element "+e.id);n=function(e){e=e.waypoint;if(e)return function(e,n){var i=[];return g(e,function(e,t){i.push(n(e,t))}),i}(e,function(e){e={x:e.x,y:e.y};return w({original:e},e)})}(c),i=this._getSource(e),r=this._getTarget(e),i&&r&&(o=lr(e,{hidden:!1,source:i,target:r,waypoints:n}),t=s.createConnection(o),a.addConnection(t),l.fire("drdElement.added",{element:t,di:c}))}return t},ar.prototype._getSource=function(e){var t,n;if(k(e,"dmn:Association")?n=e.sourceRef:k(e,"dmn:InformationRequirement")?n=e.requiredDecision||e.requiredInput:k(e,"dmn:KnowledgeRequirement")?n=e.requiredKnowledge:k(e,"dmn:AuthorityRequirement")&&(n=e.requiredDecision||e.requiredInput||e.requiredAuthority),t=n?n.href:t)return this._getShape(cr(t))},ar.prototype._getTarget=function(e){return k(e,"dmn:Association")?e.targetRef&&this._getShape(cr(e.targetRef.href)):this._getShape(e.$parent.id)},ar.prototype._getShape=function(e){return this._elementRegistry.get(e)};e={__depends__:[e,{drdImporter:["type",ar]}]};var ur={translate:["value",function(e,n){return n=n||{},e.replace(/{([^}]+)}/g,function(e,t){return n[t]||"{"+t+"}"})}]};function pr(e){return e.originalEvent||e.srcEvent}function hr(e){return(e=(e=e.pointers&&e.pointers.length?e.pointers[0]:e).touches&&e.touches.length?e.touches[0]:e)?{x:e.clientX,y:e.clientY}:null}function fr(e,t){return(pr(e)||e).button===t}function dr(e){return fr(e,0)}function mr(e){var t=pr(e)||e;return!!dr(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function yr(e){return!0}function vr(e){return dr(e)||fr(e,1)}function gr(o,s,n){var i=this;function a(e,t,n){var i,r;(u[e]||dr)(t)&&(n?r=s.getGraphics(n):(i=t.delegateTarget||t.target)&&(n=s.get(r=i)),r)&&n&&!1===o.fire(e,{element:n,gfx:r,originalEvent:t})&&(t.stopPropagation(),t.preventDefault())}var l={};function r(e){return l[e]}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":yr,"element.mousedown":vr,"element.mouseup":vr,"element.click":vr,"element.dblclick":vr};var p="svg, .djs-element";function h(e,t,n,i){var r=l[n]=function(e){a(n,e)};i&&(u[n]=i),r.$delegate=fn.bind(e,p,t,r)}function f(e,t,n){n=r(n);n&&fn.unbind(e,t,n.$delegate)}o.on("canvas.destroy",function(e){var n;n=e.svg,g(c,function(e,t){f(n,t,e)})}),o.on("canvas.init",function(e){var n;n=e.svg,g(c,function(e,t){h(n,t,e)})}),o.on(["shape.added","connection.added"],function(e){var t=e.element,e=e.gfx;o.fire("interactionEvents.createHit",{element:t,gfx:e})}),o.on(["shape.changed","connection.changed"],500,function(e){var t=e.element,e=e.gfx;o.fire("interactionEvents.updateHit",{element:t,gfx:e})}),o.on("interactionEvents.createHit",500,function(e){var t=e.element,e=e.gfx;i.createDefaultHit(t,e)}),o.on("interactionEvents.updateHit",function(e){var t=e.element,e=e.gfx;i.updateDefaultHit(t,e)});var e=m("djs-hit djs-hit-stroke"),t=m("djs-hit djs-hit-click-stroke"),d={all:m("djs-hit djs-hit-all"),"click-stroke":t,stroke:e,"no-move":m("djs-hit djs-hit-no-move")};function m(e,t){return t=w({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function y(e,t){var n=d[t];if(!n)throw new Error("invalid hit type <"+t+">");x(e,n)}function v(e,t){_(e,t)}this.removeHits=function(e){var t;t=".djs-hit",g((e||document).querySelectorAll(t),qn)},this.createDefaultHit=function(e,t){var n=e.waypoints,i=e.isFrame;return n?this.createWaypointsHit(t,n):this.createBoxHit(t,i?"stroke":"all",{width:e.width,height:e.height})},this.createWaypointsHit=function(e,t){t=ci(t);return y(t,"stroke"),v(e,t),t},this.createBoxHit=function(e,t,n){n=w({x:0,y:0},n);var i=E("rect");return y(i,t),x(i,n),v(e,i),i},this.updateDefaultHit=function(e,t){var n,i,t=mn(".djs-hit",t);if(t)return e.waypoints?(n=t,i=e.waypoints,x(n,{points:li(i)})):x(t,{width:e.width,height:e.height}),t},this.fire=a,this.triggerMouseEvent=function(e,t,n){var i=c[e];if(i)return a(i,t,n);throw new Error("unmapped DOM event name <"+e+">")},this.mouseHandler=r,this.registerEvent=h,this.unregisterEvent=f}gr.$inject=["eventBus","elementRegistry","styles"];var br={__init__:["interactionEvents"],interactionEvents:["type",gr]};function wr(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e){var t=E("rect");return x(t,w({x:10,y:10,rx:3,width:100,height:100},i)),_(e,t),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,e=e.gfx,n=(n=mn(".djs-outline",e))||o(e);r.updateShapeOutline(n,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,e=e.gfx,n=(n=mn(".djs-outline",e))||o(e);r.updateConnectionOutline(n,t)})}wr.prototype.updateShapeOutline=function(e,t){x(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},wr.prototype.updateConnectionOutline=function(e,t){t=ui(t);x(e,{x:t.x-this.offset,y:t.y-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},wr.$inject=["eventBus","styles","elementRegistry"];var _r={__init__:["outline"],outline:["type",wr]};function xr(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){e=e.element;n.deselect(e)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}xr.$inject=["eventBus","canvas"],xr.prototype.deselect=function(e){var t,n=this._selectedElements,e=n.indexOf(e);-1!==e&&(t=n.slice(),n.splice(e,1),this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:n}))},xr.prototype.get=function(){return this._selectedElements},xr.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},xr.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice(),r=(X(e)||(e=e?[e]:[]),this._canvas),o=r.getRootElement();e=e.filter(function(e){e=r.findRoot(e);return o===e}),t?g(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Er="selected";function kr(n,e,t){this._canvas=n;var i=this;function r(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){r(e.element,"hover")}),e.on("element.out",function(e){o(e.element,"hover")}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;g(t,function(e){-1===n.indexOf(e)&&o(e,Er)}),g(n,function(e){-1===t.indexOf(e)&&r(e,Er)}),i._updateSelectionOutline(n)}),e.on("element.changed",function(e){t.isSelected(e.element)&&i._updateSelectionOutline(t.get())})}function Cr(e,o,s,i){e.on("create.end",500,function(e){var e=e.context,t=e.canExecute,n=e.elements,e=(e.hints||{}).autoSelect;t&&!1!==e&&(X(e)?o.select(e):o.select(n.filter(Or)))}),e.on("connect.end",500,function(e){e=e.context.connection;e&&o.select(e)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=i.get(e.context.shape.id);J(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){if(dr(e)){var t,n=e.element,i=(n===s.getRootElement()&&(n=null),o.isSelected(n)),r=1<o.get().length,e=mr(e)||(t=pr(e=e)||e,dr(e)&&t.shiftKey);if(i&&r)return e?o.deselect(n):o.select(n);i?o.deselect(n):o.select(n,e)}})}function Or(e){return!e.hidden}kr.$inject=["canvas","eventBus","selection"],kr.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline"),n=(Gn(t),1<e.length);Fn(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n&&(e={x:(n=ui(e)).x-6,y:n.y-6,width:n.width+12,height:n.height+12},x(n=E("rect"),w({rx:3},e)),Fn(n).add("djs-selection-outline"),_(t,n))},Cr.$inject=["eventBus","selection","canvas","elementRegistry"];_r={__init__:["selectionVisuals","selectionBehavior"],__depends__:[br,_r],selection:["type",xr],selectionVisuals:["type",kr],selectionBehavior:["type",Cr]};function Sr(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}Sr.prototype.next=function(){return this._prefix+ ++this._counter};var Mr=new Sr("ov");function r(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Mr,this._overlayDefaults=w({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(t=n.getContainer(),Jt(i=dn('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),t.insertBefore(i,t.firstChild),i),this._init()}function jr(e,t,n){Jt(e,{left:t+"px",top:n+"px"})}function Nr(e,t){e.style.display=!1===t?"none":""}function Pr(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}r.$inject=["config.overlays","eventBus","canvas","elementRegistry"],r.prototype.get=function(e){var t;return Q(e)&&(e={id:e}),Q(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element?(t=this._getOverlayContainer(e.element,!0))?e.type?ee(t.overlays,ie({type:e.type})):t.overlays.slice():[]:e.type?ee(this._overlays,ie({type:e.type})):e.id?this._overlays[e.id]:null},r.prototype.add=function(e,t,n){if(Y(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");var i;if(e)return i=this._ids.next(),n=w({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i;throw new Error("invalid element specified")},r.prototype.remove=function(e){var e=this.get(e)||[],n=(X(e)||(e=[e]),this);g(e,function(e){var t=n._getOverlayContainer(e.element,!0);e&&(yn(e.html),yn(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t&&-1!==(e=t.overlays.indexOf(e))&&t.overlays.splice(e,1)})},r.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},r.prototype.show=function(){Nr(this._overlayRoot)},r.prototype.hide=function(){Nr(this._overlayRoot,!1)},r.prototype.clear=function(){this._overlays={},this._overlayContainers=[],on(this._overlayRoot)},r.prototype._updateOverlayContainer=function(e){var t,n=e.element,i=e.html,r=n.x,o=n.y;n.waypoints&&(r=(t=ui(n)).x,o=t.y),jr(i,r,o),en(e.html,"data-container-id",n.id)},r.prototype._updateOverlay=function(e){var t,n=e.position,i=e.htmlContainer,r=e.element,o=n.left,s=n.top;void 0!==n.right&&(t=(r.waypoints?ui(r):r).width,o=-1*n.right+t),void 0!==n.bottom&&(t=(r.waypoints?ui(r):r).height,s=-1*n.bottom+t),jr(i,o||0,s||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},r.prototype._createOverlayContainer=function(e){var t=dn('<div class="djs-overlays" />'),t=(Jt(t,{position:"absolute"}),this._overlayRoot.appendChild(t),{html:t,element:e,overlays:[]});return this._updateOverlayContainer(t),this._overlayContainers.push(t),t},r.prototype._updateRoot=function(e){var t=e.scale||1,e="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Pr(this._overlayRoot,e)},r.prototype._getOverlayContainer=function(t,e){var n=J(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},r.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html,o=(Q(o=o.get&&o.constructor.prototype.jquery?o.get(0):o)&&(o=dn(o)),n=this._getOverlayContainer(r),Jt(t=dn('<div class="djs-overlay" data-overlay-id="'+i+'">'),{position:"absolute"}),t.appendChild(o),e.type&&nn(t).add("djs-overlay-"+e.type),this._canvas.findRoot(r));Nr(t,o===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},r.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,s=!0;Nr(e.htmlContainer,s=i!==this._canvas.getRootElement()||n&&(q(r)&&r>t.scale||q(o)&&o<t.scale)?!1:s),this._updateOverlayScale(e,t)},r.prototype._updateOverlayScale=function(e,t){var n,i,r=e.scale,e=e.htmlContainer,o="";!0!==r&&(r=!1===r?n=1:(n=r.min,r.max),q(n)&&t.scale<n&&(i=(1/t.scale||1)*n),q(r))&&t.scale>r&&(i=(1/t.scale||1)*r),Pr(e,o=q(i)?"scale("+i+","+i+")":o)},r.prototype._updateOverlaysVisibilty=function(t){var n=this;g(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},r.prototype._init=function(){var e=this._eventBus,n=this;e.on("canvas.viewbox.changing",function(e){n.hide()}),e.on("canvas.viewbox.changed",function(e){e=e.viewbox,n._updateRoot(e),n._updateOverlaysVisibilty(e),n.show()}),e.on(["shape.remove","connection.remove"],function(e){var e=e.element,e=(g(n.get({element:e}),function(e){n.remove(e.id)}),n._getOverlayContainer(e));e&&(yn(e.html),-1!==(e=n._overlayContainers.indexOf(e)))&&n._overlayContainers.splice(e,1)}),e.on("element.changed",500,function(e){e=e.element,e=n._getOverlayContainer(e,!0);e&&(g(e.overlays,function(e){n._updateOverlay(e)}),n._updateOverlayContainer(e))}),e.on("element.marker.update",function(e){var t=n._getOverlayContainer(e.element,!0);t&&nn(t.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){n._updateOverlaysVisibilty(n._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};var Dr={__init__:["overlays"],overlays:["type",r]};function Rr(e,t,n){this._eventBus=e,this._canvas=t,this._translate=n,e.on("diagram.init",function(){this._init()},this),e.on("import.done",function(e){e.error||this.update()},this),this.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="'+this._translate("Definition Name")+'" spellcheck="false"></div><div class="dmn-definitions-id" title="'+this._translate("Definition ID")+'" spellcheck="false"></div></div>'}function Tr(e,n){function t(e,t){nn(n.getContainer()).toggle(e,t)}e.on("palette.create",function(){t("with-palette",!0)}),e.on("palette.changed",function(e){t("with-palette-two-column",e.twoColumn)})}Rr.$inject=["eventBus","canvas","translate"],Rr.prototype._init=function(){var e=this._canvas,t=this._eventBus,e=e.getContainer(),n=this._container=dn(this.HTML_MARKUP);e.appendChild(n),this.nameElement=mn(".dmn-definitions-name",this._container),this.idElement=mn(".dmn-definitions-id",this._container),fn.bind(n,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(e){e.stopPropagation()}),t.fire("definitionIdView.create",{html:n})},Rr.prototype.update=function(){var e=this._canvas.getRootElement().businessObject;this.nameElement.textContent=e.name,this.idElement.textContent=e.id},Tr.$inject=["eventBus","canvas"];var v={__depends__:[ur],__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",Rr],definitionPropertiesPaletteAdapter:["type",Tr]},Ar=[{className:"dmn-icon-decision-table",matches:function(e){e=e.businessObject;return k(e,"dmn:Decision")&&k(e.decisionLogic,"dmn:DecisionTable")}},{className:"dmn-icon-literal-expression",matches:function(e){e=e.businessObject;return k(e,"dmn:Decision")&&k(e.decisionLogic,"dmn:LiteralExpression")}}],Ir=function(){function r(e,t,n,i){var o=this;a(this,r),this._injector=e,this._eventBus=t,this._overlays=n,this._config=i||{enabled:!0},t.on(["shape.added"],function(e){for(var t=e.element,n=0;n<Ar.length;n++){var i=Ar[n],r=i.matches,i=i.className;r&&r(t)&&o.addOverlay(t,i)}})}return l(r,[{key:"addOverlay",value:function(e,t){var t=dn('\n      <div class="drill-down-overlay">\n        <span class="'.concat(t,'"></span>\n      </div>\n    ')),n=this._overlays.add(e,{position:{top:2,left:2},html:t});!1!==this._config.enabled&&(nn(t).add("interactive"),this.bindEventListener(e,t,n))}},{key:"bindEventListener",value:function(e,t,n){var i=this,r=this._overlays,o=this._eventBus,r=r._overlayRoot;fn.bind(r,'[data-overlay-id="'+n+'"]',"click",function(){!1!==o.fire("drillDown.click",{element:e})&&i.drillDown(e)})}},{key:"drillDown",value:function(e){var t=this._injector.get("_parent",!1);return!!t&&!!(e=t.getView(e.businessObject))&&(t.open(e),!0)}}]),r}(),Ir=(Ir.$inject=["injector","eventBus","overlays","config.drillDown"],{__depends__:[Dr],__init__:["drillDown"],drillDown:["type",Ir]}),Br='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="#000000" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="#000000" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function Lr(e){return e.join(";")}var $r,Vr='<div class="bjs-powered-by-lightbox" style="'+Lr(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Lr(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+Lr(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;">'+Br+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';var zr=["additionalModules","canvas"];function Ur(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function Fr(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],(e=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function Wr(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}function b(e){
/**
   * Adds the project logo to the diagram container as
   * required by the bpmn.io license.
   *
   * @see http://bpmn.io/license
   *
   * @param {Element} container
   */
var t,n;this._container=this._createContainer(),t=this._container,n=dn('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100;">'+Br+"</a>"),t.appendChild(n),m.bind(n,"click",function(e){$r||($r=dn(Vr),fn.bind($r,".backdrop","click",function(e){document.body.removeChild($r)})),document.body.appendChild($r),e.preventDefault()}),this._init(this._container,e)}function qr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gr(e){return Math.log(e)/Math.log(10)}function Hr(e,t){var n=Gr(e.min),e=Gr(e.max);return(Math.abs(n)+Math.abs(e))/t}Sn(b,zi),b.prototype.saveSVG=vn(function(e){var r=this;return new Promise(function(e){var t=r.get("canvas"),n=t.getActiveLayer(),t=mn("defs",t._svg),i=function(e,t){if(void 0===t)return ri(e);try{ii(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}(n),t=t&&t.outerHTML||"",n=n.getBBox();e({svg:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+n.width+'" height="'+n.height+'" viewBox="'+n.x+" "+n.y+" "+n.width+" "+n.height+'" version="1.1">'+t+i+"</svg>"})})}),b.prototype.getModules=function(){return this._modules},b.prototype.destroy=function(){zi.prototype.destroy.call(this),yn(this._container)},b.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},b.prototype.off=function(e,t){this.get("eventBus").off(e,t)},b.prototype._init=function(e,t){var n=t.additionalModules,i=t.canvas,r=Wr(t,zr),o=t.modules||this.getModules(),o=[].concat([{drd:["value",this]}],p(o),p(n||[])),n=Fr(Fr({},r),{},{canvas:Fr(Fr({},i),{},{container:e}),modules:o});zi.call(this,n),t&&t.container&&this.attachTo(t.container)},b.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},b.prototype._createContainer=function(){return dn('<div class="dmn-drd-container"></div>')},b.prototype.open=function(e){var r=this;return new Promise(function(n,i){var t;try{return r._definitions&&r.clear(),r._definitions=e,qi(r,e,function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})})}catch(e){t=e}t?(t.warnings=t.warnings||[],i(t)):n({warnings:[]})})},b.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{}),this.get("canvas").resized()},b.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},b.prototype._modules=[e,ur,_r,Dr,v,Ir];var Xr=Math.sign||function(e){return 0<=e?1:-1},Yr={min:.2,max:4};function Kr(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=ae(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",function(e){i._init(!1!==t.enabled)})}Kr.$inject=["config.zoomScroll","eventBus","canvas"],Kr.prototype.scroll=function(e){this._canvas.scroll(e)},Kr.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Kr.prototype.zoom=function(e,t){var n=Hr(Yr,20);this._totalDelta+=e,.1<Math.abs(this._totalDelta)&&(this._zoom(e,t,n),this._totalDelta=0)},Kr.prototype._handleWheel=function(e){var t,n,i,r,o;an(e.target,".djs-scrollable",!0)||(r=this._container,e.preventDefault(),i=e.ctrlKey,t=e.shiftKey,n=-1*this._scale,n*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i?(i=r.getBoundingClientRect(),r={x:e.clientX-i.left,y:e.clientY-i.top},o=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Xr(e.deltaY)*n,this.zoom(o,r)):(o=t?{dx:n*e.deltaY,dy:0}:{dx:n*e.deltaX,dy:n*e.deltaY},this.scroll(o)))},Kr.prototype.stepZoom=function(e,t){var n=Hr(Yr,10);this._zoom(e,t,n)},Kr.prototype._zoom=function(e,t,n){var i=this._canvas,e=0<e?1:-1,r=Gr(i.zoom()),r=Math.round(r/n)*n,n=(r+=n*e,Math.pow(10,r));i.zoom(Math.max(Yr.min,Math.min(Yr.max,n)),t)},Kr.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return i!==(e=void 0===e?!i:e)&&m[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e},Kr.prototype._init=function(e){this.toggle(e)};var e={__init__:["zoomScroll"],zoomScroll:["type",Kr]},Zr=/^djs-cursor-.*$/;function Qr(e){var t=nn(document.body);t.removeMatching(Zr),e&&t.add("djs-cursor-"+e)}var Jr=5e3;function eo(a,l){var c;function n(e){var t,n,i=c.start,r=c.button,o=hr(e),i=qr(o,i);function s(){return!1}!c.dragging&&(n=i,15<Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)))&&(c.dragging=!0,0===r&&(t=t||"element.click",a.once(t,Jr,s)),Qr("grab")),c.dragging&&(i=qr(o,c.last||c.start),l.scroll({dx:i.x,dy:i.y}),c.last=o),e.preventDefault()}function i(e){m.unbind(document,"mousemove",n),m.unbind(document,"mouseup",i),Qr(c=null)}a.on("element.mousedown",500,function(e){e=e.originalEvent;if(!an(e.target,".djs-draggable")){var t=e.button;if(!(2<=t||e.ctrlKey||e.shiftKey||e.altKey))return c={button:t,start:hr(e)},m.bind(document,"mousemove",n),m.bind(document,"mouseup",i),!0}}),this.isActive=function(){return!!c}}eo.$inject=["eventBus","canvas"];_r={__init__:["moveCanvas"],moveCanvas:["type",eo]};(function(I){
/*! Hammer.JS - v2.0.7 - 2016-04-22
     * http://hammerjs.github.io/
     *
     * Copyright (c) 2016 Jorik Tangelder;
     * Licensed under the MIT license */
var r=window,B=document,u=void 0,L=["","webkit","Moz","MS","ms","o"],$=B.createElement("div"),V="function",o=Math.round,p=Math.abs,z=Date.now;function U(e,t,n){return setTimeout(G(e,n),t)}function n(e,t,n){return Array.isArray(e)&&(s(e,n[t],n),1)}function s(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==u)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function F(n,e,t){var i="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),e=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",t=r.console&&(r.console.warn||r.console.log);return t&&t.call(r.console,i,e),n.apply(this,arguments)}}var a="function"!=typeof Object.assign?function(e){if(e===u||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==u&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign,W=F(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)n&&e[i[r]]!==u||(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),q=F(function(e,t){return W(e,t,!0)},"merge","Use `assign`.");function e(e,t,n){var t=t.prototype,i=e.prototype=Object.create(t);i.constructor=e,i._super=t,n&&a(i,n)}function G(e,t){return function(){return e.apply(t,arguments)}}function H(e,t){return Ue(e)==V?e.apply(t&&t[0]||u,t):e}function X(e,t){return e===u?t:e}function t(t,e,n){s(c(e),function(e){t.addEventListener(e,n,!1)})}function i(t,e,n){s(c(e),function(e){t.removeEventListener(e,n,!1)})}function Y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function l(e,t){return-1<e.indexOf(t)}function c(e){return e.trim().split(/\s+/g)}function h(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function f(e){return Array.prototype.slice.call(e,0)}function K(e,n,t){for(var i=[],r=[],o=0;o<e.length;){var s=n?e[o][n]:e[o];h(r,s)<0&&i.push(e[o]),r[o]=s,o++}return i=t?n?i.sort(function(e,t){return e[n]>t[n]}):i.sort():i}function d(e,t){for(var n,i=t[0].toUpperCase()+t.slice(1),r=0;r<L.length;){if((n=(n=L[r])?n+i:t)in e)return n;r++}return u}var Z=1;function Q(e){e=e.ownerDocument||e;return e.defaultView||e.parentWindow||r}var J="ontouchstart"in r,ee=d(r,"PointerEvent")!==u,te=J&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),m="touch",ne=25,y=1,v=4,g=8,b=1,w=2,_=4,x=8,E=16,k=w|_,C=x|E,ie=k|C,re=["x","y"],O=["clientX","clientY"];function S(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){H(t.options.enable,[t])&&n.handler(e)},this.init()}function oe(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&y&&i-r==0,i=t&(v|g)&&i-r==0,r=(n.isFirst=!!o,n.isFinal=!!i,o&&(e.session={}),n.eventType=t,e),i=n,o=r.session,t=i.pointers,s=t.length,s=(o.firstInput||(o.firstInput=se(i)),1<s&&!o.firstMultiple?o.firstMultiple=se(i):1===s&&(o.firstMultiple=!1),o.firstInput),a=o.firstMultiple,l=(a||s).center,c=i.center=ae(t),s=(i.timeStamp=z(),i.deltaTime=i.timeStamp-s.timeStamp,i.angle=ue(l,c),i.distance=M(l,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==y&&o.eventType!==v||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(o,i),i.offsetDirection=ce(i.deltaX,i.deltaY),le(i.deltaTime,i.deltaX,i.deltaY)),l=(i.overallVelocityX=s.x,i.overallVelocityY=s.y,i.overallVelocity=p(s.x)>p(s.y)?s.x:s.y,i.scale=a?function(e,t){return M(t[0],t[1],O)/M(e[0],e[1],O)}(a.pointers,t):1,i.rotation=a?function(e,t){return ue(t[1],t[0],O)+ue(e[1],e[0],O)}(a.pointers,t):0,i.maxPointers=!o.prevInput||i.pointers.length>o.prevInput.maxPointers?i.pointers.length:o.prevInput.maxPointers,function(e,t){var n,i,r,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;{var a,l;t.eventType!=g&&(ne<s||o.velocity===u)?(a=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,s=le(s,a,l),i=s.x,r=s.y,n=p(s.x)>p(s.y)?s.x:s.y,a=ce(a,l),e.lastInterval=t):(n=o.velocity,i=o.velocityX,r=o.velocityY,a=o.direction)}t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=a}(o,i),r.element);Y(i.srcEvent.target,l)&&(l=i.srcEvent.target),i.target=l,e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function se(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:o(e.pointers[n].clientX),clientY:o(e.pointers[n].clientY)},n++;return{timeStamp:z(),pointers:t,center:ae(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ae(e){var t=e.length;if(1===t)return{x:o(e[0].clientX),y:o(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:o(n/t),y:o(i/t)}}function le(e,t,n){return{x:t/e||0,y:n/e||0}}function ce(e,t){return e===t?b:p(e)>=p(t)?e<0?w:_:t<0?x:E}function M(e,t,n){var i=t[(n=n||re)[0]]-e[n[0]],t=t[n[1]]-e[n[1]];return Math.sqrt(i*i+t*t)}function ue(e,t,n){var i=t[(n=n||re)[0]]-e[n[0]],t=t[n[1]]-e[n[1]];return 180*Math.atan2(t,i)/Math.PI}S.prototype={handler:function(){},init:function(){this.evEl&&t(this.element,this.evEl,this.domHandler),this.evTarget&&t(this.target,this.evTarget,this.domHandler),this.evWin&&t(Q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&i(this.element,this.evEl,this.domHandler),this.evTarget&&i(this.target,this.evTarget,this.domHandler),this.evWin&&i(Q(this.element),this.evWin,this.domHandler)}};var pe={mousedown:y,mousemove:2,mouseup:v};function j(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,S.apply(this,arguments)}e(j,S,{handler:function(e){var t=pe[e.type];t&y&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=v),this.pressed&&(t&v&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var he={pointerdown:y,pointermove:2,pointerup:v,pointercancel:g,pointerout:g},fe={2:m,3:"pen",4:"mouse",5:"kinect"},de="pointerdown",me="pointermove pointerup pointercancel";function ye(){this.evEl=de,this.evWin=me,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(de="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),e(ye,S,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),i=he[i],r=fe[e.pointerType]||e.pointerType,o=r==m,s=h(t,e.pointerId,"pointerId");i&y&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):i&(v|g)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(s,1))}});var ve={touchstart:y,touchmove:2,touchend:v,touchcancel:g};function ge(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,S.apply(this,arguments)}e(ge,S,{handler:function(e){var t,n=ve[e.type];n===y&&(this.started=!0),this.started&&(t=function(e,t){var n=f(e.touches),e=f(e.changedTouches);t&(v|g)&&(n=K(n.concat(e),"identifier",!0));return[n,e]}.call(this,e,n),n&(v|g)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:m,srcEvent:e}))}});var be={touchstart:y,touchmove:2,touchend:v,touchcancel:g};function we(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},S.apply(this,arguments)}e(we,S,{handler:function(e){var t=be[e.type],n=function(e,t){var n=f(e.touches),i=this.targetIds;if(t&(2|y)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=f(e.changedTouches),a=[],l=this.target;if(o=n.filter(function(e){return Y(e.target,l)}),t===y)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;r=0;for(;r<s.length;)i[s[r].identifier]&&a.push(s[r]),t&(v|g)&&delete i[s[r].identifier],r++;if(a.length)return[K(o.concat(a),"identifier",!0),a]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:m,srcEvent:e})}});var _e=2500;function xe(){S.apply(this,arguments);var e=G(this.handler,this);this.touch=new we(this.manager,e),this.mouse=new j(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ee(e){var t,n,e=e.changedPointers[0];e.identifier===this.primaryTouch&&(t={x:e.clientX,y:e.clientY},this.lastTouches.push(t),n=this.lastTouches,setTimeout(function(){var e=n.indexOf(t);-1<e&&n.splice(e,1)},_e))}e(xe,S,{handler:function(e,t,n){var i=n.pointerType==m,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)!function(e,t){e&y?(this.primaryTouch=t.changedPointers[0].identifier,Ee.call(this,t)):e&(v|g)&&Ee.call(this,t)}.call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),r=Math.abs(n-r.y);if(o<=25&&r<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ke,Ce,Oe=d($.style,"touchAction"),Se=Oe!==u,Me="manipulation",N="none",P="pan-x",D="pan-y",je=Se&&(ke={},Ce=r.CSS&&r.CSS.supports,["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){ke[e]=!Ce||r.CSS.supports("touch-action",e)}),ke);function Ne(e,t){this.manager=e,this.set(t)}function R(e){this.options=a({},this.defaults,e||{}),this.id=Z++,this.manager=null,this.options.enable=X(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function De(e){return e==E?"down":e==x?"up":e==w?"left":e==_?"right":""}function Re(e,t){t=t.manager;return t?t.get(e):e}function T(){R.apply(this,arguments)}function Te(){T.apply(this,arguments),this.pX=null,this.pY=null}function Ae(){T.apply(this,arguments)}function Ie(){R.apply(this,arguments),this._timer=null,this._input=null}function Be(){T.apply(this,arguments)}function Le(){T.apply(this,arguments)}function $e(){R.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function A(e,t){return(t=t||{}).recognizers=X(t.recognizers,A.defaults.preset),new Ve(e,t)}function Ve(e,t){this.options=a({},A.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((t=this).options.inputClass||(ee?ye:te?we:J?xe:j))(t,oe),this.touchAction=new Ne(this,this.options.touchAction),ze(this,!0),s(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ze(n,i){var r,o=n.element;o.style&&(s(n.options.cssProps,function(e,t){r=d(o.style,t),i?(n.oldCssProps[r]=o.style[r],o.style[r]=e):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}Ne.prototype={set:function(e){"compute"==e&&(e=this.compute()),Se&&this.manager.element.style&&je[e]&&(this.manager.element.style[Oe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e,t,n=[],i=(s(this.manager.recognizers,function(e){H(e.options.enable,[e])&&(n=n.concat(e.getTouchAction()))}),n.join(" "));return l(i,N)||(e=l(i,P),t=l(i,D),e&&t)?N:e||t?e?P:D:l(i,Me)?Me:"auto"},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(!this.manager.session.prevented){var i=this.actions,r=l(i,N)&&!je.none,o=l(i,D)&&!je[D],i=l(i,P)&&!je[P];if(r){var s=1===e.pointers.length,a=e.distance<2,e=e.deltaTime<250;if(s&&a&&e)return}return i&&o?void 0:r||o&&n&k||i&&n&C?this.preventSrc(t):void 0}t.preventDefault()},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}},R.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){var t;return n(e,"recognizeWith",this)||(t=this.simultaneous)[(e=Re(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Re(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){var t;return n(e,"requireFailure",this)||-1===h(t=this.requireFail,e=Re(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){return n(e,"dropRequireFailure",this)||(e=Re(e,this),-1<(e=h(this.requireFail,e))&&this.requireFail.splice(e,1)),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function i(e){n.manager.emit(e,t)}e<8&&i(n.options.event+Pe(e)),i(n.options.event),t.additionalEvent&&i(t.additionalEvent),8<=e&&i(n.options.event+Pe(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){e=a({},e);H(this.options.enable,[this,e])?(56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)):(this.reset(),this.state=32)},process:function(e){},getTouchAction:function(){},reset:function(){}},e(T,R,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,e=this.attrTest(e);return i&&(n&g||!e)?16|t:i||e?n&v?8|t:2&t?4|t:2:32}}),e(Te,T,{defaults:{event:"pan",threshold:10,pointers:1,direction:ie},getTouchAction:function(){var e=this.options.direction,t=[];return e&k&&t.push(D),e&C&&t.push(P),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(i=t.direction&k?(r=0===o?b:o<0?w:_,n=o!=this.pX,Math.abs(e.deltaX)):(r=0===s?b:s<0?x:E,n=s!=this.pY,Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return T.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=De(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),e(Ae,T,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[N]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),e(Ie,R,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(v|g)&&!r)this.reset();else if(e.eventType&y)this.reset(),this._timer=U(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&v)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&v?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=z(),this.manager.emit(this.options.event,this._input)))}}),e(Be,T,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[N]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),e(Le,T,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:k|C,pointers:1},getTouchAction:function(){return Te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(k|C)?t=e.overallVelocity:n&k?t=e.overallVelocityX:n&C&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&e.eventType&v},emit:function(e){var t=De(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),e($e,R,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Me]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&y&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=v)return this.failTimeout();i=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||M(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,r&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=U(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=U(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),A.VERSION="2.0.7",A.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Be,{enable:!1}],[Ae,{enable:!1},["rotate"]],[Le,{direction:k}],[Te,{direction:k},["swipe"]],[$e],[$e,{event:"doubletap",taps:2},["tap"]],[Ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ve.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);for(var n,i=this.recognizers,r=t.curRecognizer,o=((!r||8&r.state)&&(r=t.curRecognizer=null),0);o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof R)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){var t;return n(e,"add",this)?this:((t=this.get(e.options.event))&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e)},remove:function(e){var t;return n(e,"remove",this)||(e=this.get(e))&&-1!==(e=h(t=this.recognizers,e))&&(t.splice(e,1),this.touchAction.update()),this},on:function(e,t){var n;if(e!==u&&t!==u)return n=this.handlers,s(c(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n;if(e!==u)return n=this.handlers,s(c(e),function(e){t?n[e]&&n[e].splice(h(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&(n=e,i=t,(r=B.createEvent("Event")).initEvent(n,!0,!0),(r.gesture=i).target.dispatchEvent(r));var n,i,r,o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var s=0;s<o.length;)o[s](t),s++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(A,{INPUT_START:y,INPUT_MOVE:2,INPUT_END:v,INPUT_CANCEL:g,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:b,DIRECTION_LEFT:w,DIRECTION_RIGHT:_,DIRECTION_UP:x,DIRECTION_DOWN:E,DIRECTION_HORIZONTAL:k,DIRECTION_VERTICAL:C,DIRECTION_ALL:ie,Manager:Ve,Input:S,TouchAction:Ne,TouchInput:we,MouseInput:j,PointerEventInput:ye,TouchMouseInput:xe,SingleTouchInput:ge,Recognizer:R,AttrRecognizer:T,Tap:$e,Pan:Te,Swipe:Le,Pinch:Ae,Rotate:Be,Press:Ie,on:t,off:i,each:s,merge:q,extend:W,assign:a,inherit:e,bindFn:G,prefixed:d}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=A,"function"==typeof u&&u.amd?u(function(){return A}):I.exports?I.exports=A:r.Hammer=A})(Dr={exports:{}});var to=Dr.exports,no=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function io(e,t){return t.get(e,!1)}function ro(e){e.preventDefault(),"function"==typeof e.stopPropagation?e.stopPropagation():e.srcEvent&&"function"==typeof e.srcEvent.stopPropagation&&e.srcEvent.stopPropagation(),"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function oo(t){function e(e){setTimeout(function(){g(no,function(e){m.unbind(t,e,ro,!0)})},500)}m.bind(t,"touchstart",function(e){g(no,function(e){m.bind(t,e,ro,!0)})},!0),m.bind(t,"touchend",e,!0),m.bind(t,"touchcancel",e,!0);var r=new to.Manager(t,{inputClass:to.TouchInput,recognizers:[],domEvents:!0}),n=new to.Tap,i=new to.Pan({threshold:10}),o=new to.Press,s=new to.Pinch,a=new to.Tap({event:"doubletap",taps:2});return s.requireFailure(i),s.requireFailure(o),r.add([i,o,s,a,n]),r.reset=function(e){var n=this.recognizers,i=this.session;i.stopped||(r.stop(e),setTimeout(function(){for(var e,t=0;e=n[t];t++)e.reset(),e.state=8;i.curRecognizer=null},0))},r.on("hammer.input",function(e){e.srcEvent.defaultPrevented&&r.reset(!0)}),r}function so(e,s,t,a,r){var l,i=io("dragging",e),c=io("move",e),n=io("contextPad",e),o=io("palette",e);function u(n,i){return function(e){var t=p(e.target),t=t&&a.get(t);return i&&(e.srcEvent.button=i),r.fire(n,e,t)}}function p(e){return an(e,"svg, .djs-element",!0)}function h(e){function t(e){var i,r,t=p(e.target),t=t&&a.get(t);if(c&&s.getRootElement()!==t)return c.start(e,t,!0);function n(e){var t=e.deltaX-i,n=e.deltaY-r;s.scroll({dx:t,dy:n}),i=e.deltaX,r=e.deltaY}function o(e){l.off("panmove",n),l.off("panend",o),l.off("pancancel",o)}r=i=0,l.on("panmove",n),l.on("panend",o),l.on("pancancel",o)}(l=oo(e)).on("tap",u("element.click")),l.on("doubletap",u("element.dblclick",1)),l.on("panstart",t),l.on("press",t),l.on("pinchstart",function(e){var n=s.zoom(),i=e.center;function t(e){var t=1-(1-e.scale)/1.5,t=Math.max(.2,Math.min(4,t*n));s.zoom(t,i),ro(e)}function r(e){l.off("pinchmove",t),l.off("pinchend",r),l.off("pinchcancel",r),l.reset(!0)}l.on("pinchmove",t),l.on("pinchend",r),l.on("pinchcancel",r)})}i&&t.on("drag.move",function(e){var t,n=e.originalEvent;!n||n instanceof MouseEvent||(n=hr(n),(t=(n=p(document.elementFromPoint(n.x,n.y)))&&a.get(n))!==e.hover&&(e.hover&&i.out(e),t)&&(i.hover({element:t,gfx:n}),e.hover=t,e.hoverGfx=n))}),n&&t.on("contextPad.create",function(e){e=oo(e.pad.html);e.on("panstart",function(e){n.trigger("dragstart",e,!0)}),e.on("press",function(e){n.trigger("dragstart",e,!0)}),e.on("tap",function(e){n.trigger("click",e)})}),o&&t.on("palette.create",function(e){e=oo(e.container);e.on("panstart",function(e){o.trigger("dragstart",e,!0)}),e.on("press",function(e){o.trigger("dragstart",e,!0)}),e.on("tap",function(e){o.trigger("click",e)})}),t.on("canvas.init",function(e){h(e.svg)})}function ao(e,t){var n=this;t.on("canvas.init",function(e){n.addBBoxMarker(e.svg)})}so.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],ao.$inject=["canvas","eventBus"],ao.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=E("rect"),n=(x(n,{x:-1e4,y:1e4,width:10,height:10}),x(n,t),_(e,n),E("rect"));x(n,{x:1e4,y:1e4,width:10,height:10}),x(n,t),_(e,n)};v={__depends__:[{__depends__:[br],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",so],touchFix:["type",ao]}]};function lo(e){b.call(this,e)}Sn(lo,b),lo.prototype._modules=[].concat(lo.prototype._modules,lo.prototype._navigationModules=[e,_r,v]);var co=l(function e(t){a(this,e),w(this,t),po(this,"businessObject",{writable:!0})}),uo={root:function(){o(n,co);var t=c(n);function n(e){return a(this,n),po(s(e=t.call(this,e)),"rows",{enumerable:!0,value:e.rows||[]}),po(s(e),"cols",{enumerable:!0,value:e.cols||[]}),e}return l(n)}(),row:function(){o(n,co);var t=c(n);function n(e){return a(this,n),po(s(e=t.call(this,e)),"root",{writable:!0}),po(s(e),"cells",{enumerable:!0,value:e.cells||[]}),e}return l(n)}(),col:function(){o(n,co);var t=c(n);function n(e){return a(this,n),po(s(e=t.call(this,e)),"root",{writable:!0}),po(s(e),"cells",{enumerable:!0,value:e.cells||[]}),e}return l(n)}(),cell:function(){o(n,co);var t=c(n);function n(e){return a(this,n),po(s(e=t.call(this,e)),"row",{writable:!0}),po(s(e),"col",{writable:!0}),e}return l(n)}()};function po(e,t,n){Object.defineProperty(e,t,n)}Ir=function(){function e(){a(this,e),this._uid=12}return l(e,[{key:"create",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(t.id||(t.id=e+"_"+this._uid++),uo[e]);if(n)return new n(t);throw new Error("unknown type "+e)}},{key:"createRoot",value:function(e){return this.create("root",e)}},{key:"createRow",value:function(e){return this.create("row",e)}},{key:"createCol",value:function(e){return this.create("col",e)}},{key:"createCell",value:function(e){return this.create("cell",e)}}]),e}(),Dr=function(){function t(e){a(this,t),this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}return l(t,[{key:"add",value:function(e,t){var n=e.id;this._elements[n]=e}},{key:"remove",value:function(e){e=e.id||e;delete this._elements[e]}},{key:"get",value:function(e){return this._elements[e]}},{key:"getAll",value:function(){return ho(this._elements)}},{key:"forEach",value:function(t){ho(this._elements).forEach(function(e){return t(e)})}},{key:"filter",value:function(t){return ho(this._elements).filter(function(e){return t(e)})}},{key:"clear",value:function(){this._elements={}}},{key:"updateId",value:function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}},{key:"_validateId",value:function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}}]),t}();function ho(t){return Object.keys(t).map(function(e){return t[e]})}Dr.$inject=["eventBus"];var br=function(){function e(n){var i=this;a(this,e),this._listeners={},n.on("elements.changed",function(e){e=e.elements;i.elementsChanged(e)}),n.on("root.remove",function(e){var t=e.root.id;i._listeners[t]&&n.once("root.add",function(e){e=e.root.id;i.updateId(t,e)})}),n.on("element.updateId",function(e){var t=e.element,e=e.newId;i.updateId(t.id,e)})}return l(e,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,i=0;i<n;i++){var r=e[i].id;if(t[r])return;t[r]=!0;var o=this._listeners[r]&&this._listeners[r].length;if(o)for(var s=0;s<o;s++)this._listeners[r][s]&&this._listeners[r][s]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){this._listeners[e]&&(t?-1!==(t=this._listeners[e].indexOf(t))&&this._listeners[e].splice(t,1):this._listeners[e].length=0)}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),e}(),e=(br.$inject=["eventBus"],function(){function e(){a(this,e),this._listeners={}}return l(e,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var i,r=0;r<n.length&&!(i=n[r].callback(t));r++);return i}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e],i=[];if(n)for(var r=0;r<n.length;r++){var o=n[r].callback(t);o&&i.push(o)}return i}},{key:"onGetComponent",value:function(e,t,n){if(Z(t)&&(n=t,t=1e3),!K(t))throw new Error("priority must be a number");for(var i,r=this._getListeners(e),o={priority:t,callback:n},s=0;i=r[s];s++)if(i.priority<t)return void r.splice(s,0,o);r.push(o)}},{key:"offGetComponent",value:function(e,t){var n,i,r=this._getListeners(e);if(t)for(i=r.length-1;n=r[i];i--)n.callback===t&&r.splice(i,1);else r.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),e}()),fo="$NO_OP",mo="a runtime error occured! Use Inferno in development environment to find the error.",_r=!("undefined"==typeof window||!window.document),yo=Array.isArray;function vo(e){e=Ue(e);return"string"===e||"number"===e}function S(e){return _o(e)||C(e)}function go(e){return C(e)||!1===e||!0===e||_o(e)}function M(e){return"function"==typeof e}function bo(e){return"string"==typeof e}function wo(e){return"number"==typeof e}function C(e){return null===e}function _o(e){return void 0===e}function j(e){throw e=e||mo,new Error("Inferno Error: "+e)}function xo(e){console.error(e)}function Eo(e,t){var n={};if(e)for(var i in e)n[i]=e[i];if(t)for(var r in t)n[r]=t[r];return n}function ko(e){var t;return">> "+(yo(e)?"Array("+(3<e.length?e.slice(0,3).toString()+",...":e.toString())+")":vo(e)?"Text("+e+")":go(e)?"InvalidVNode("+e+")":481&(t=e.flags)?"<"+e.type+(e.className?' class="'+e.className+'"':"")+">":16&t?"Text("+e.children+")":1024&t?"Portal*":"<"+((t=e.type).name||t.displayName||t.constructor.name||(t.toString().match(/^function\s*([^\s(]+)/)||[])[1])+" />")+"\n"}function Co(e){var t;1&e.childFlags||(64&e.flags&&j("input elements can't have children."),128&e.flags&&j("textarea elements can't have children."),481&e.flags&&(t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],"media"===(e=e.type.toLowerCase())&&j("media elements can't have children."),-1!==(e=t.indexOf(e)))&&j(t[e]+" elements can't have children."))}function Oo(e){var t;!1===e.isValidated&&e.children&&481&e.flags&&(t=function e(t,n){for(var i={},r=0,o=t.length;r<o;r++){var s=t[r];if(yo(s))return"Encountered ARRAY in mount, array must be flattened, or normalize used. Location: \n"+ko(s);if(go(s)){if(n)return"Encountered invalid node when preparing to keyed algorithm. Location: \n"+ko(s);if(0!==Object.keys(i).length)return"Encountered invalid node with mixed keys. Location: \n"+ko(s)}else{"object"===Ue(s)&&(s.isValidated=!0);var a=s.key;if(!S(a)&&!vo(a))return"Encountered child vNode where key property is not string or number. Location: \n"+ko(s);var l=s.children,c=s.childFlags;if(!go(l)){var u=void 0;if(12&c?u=e(l,8&s.childFlags):2===c&&(u=e([l],8&s.childFlags)),u)return u+=ko(s)}if(n&&S(a))return"Encountered child without key during keyed algorithm. If this error points to Array make sure children is flat list. Location: \n"+ko(s);if(!n&&S(a)){if(0!==Object.keys(i).length)return"Encountered children with key missing. Location: \n"+ko(s)}else{if(i[a])return"Encountered two children with same key: {"+a+"}. Location: \n"+ko(s);i[a]=!0}}}}(Array.isArray(e.children)?e.children:[e.children],0<(8&e.childFlags)))&&j(t+ko(e)),e.isValidated=!0}var So="$";function Mo(e,t,n,i,r,o,s,a){return{childFlags:e,children:t,className:n,dom:null,flags:i,isValidated:!1,key:void 0===r?null:r,parentVNode:null,props:void 0===o?null:o,ref:void 0===s?null:s,type:a}}function O(e,t,n,i,r,o,s,a){14&e&&j("Creating Component vNodes using createVNode is not allowed. Use Inferno.createComponentVNode method.");r=void 0===r?1:r,i=Mo(r,i,n,e,s,o,a,t),n=Ro.createVNode;return"function"==typeof n&&n(i),0===r&&Do(i,i.children),Co(i),i}function N(e,t,n,i,r){1&e&&j("Creating element vNodes using createComponentVNode is not allowed. Use Inferno.createVNode method."),0<(2&e)&&(e=t.prototype&&M(t.prototype.render)?4:8);var o=t.defaultProps;if(!S(o))for(var s in n=n||{},o)_o(n[s])&&(n[s]=o[s]);if(0<(8&e)){var a=t.defaultHooks;if(!S(a))if(r)for(var l in a)_o(r[l])&&(r[l]=a[l]);else r=a}e=Mo(1,null,null,e,i,n,r,t),i=Ro.createVNode;return M(i)&&i(e),e}function jo(e,t){return Mo(1,S(e)?"":e,null,16,t,null,null,null)}function No(e){var t,n=e.props;return n&&(481&(t=e.flags)&&(void 0!==n.children&&S(e.children)&&Do(e,n.children),void 0!==n.className)&&(e.className=n.className||null,n.className=void 0),void 0!==n.key&&(e.key=n.key,n.key=void 0),void 0!==n.ref)&&(e.ref=8&t?Eo(e.ref,n.ref):n.ref,n.ref=void 0),e}function G(e){var t,n=e.flags;if(14&n){var i,r=e.props;if(!C(r))for(var o in i={},r)i[o]=r[o];t=N(n,e.type,i,e.key,e.ref)}else 481&n?t=O(n,e.type,e.className,e.children,e.childFlags,e.props,e.key,e.ref):16&n?t=jo(e.children,e.key):1024&n&&(t=e);return t}function Po(){return jo("",null)}function Do(e,t){var n,i=1;if(go(t))n=t;else if(bo(t))i=2,n=jo(t);else if(wo(t))i=2,n=jo(t+"");else if(yo(t)){var r=t.length;if(0===r)n=null,i=1;else{!Object.isFrozen(t)&&!0!==t.$||(t=t.slice());for(var i=8,o=0;o<r;o++){var s,a,l,c=t[o];if(go(c)||yo(c)){n=n||t.slice(0,o),!function e(t,n,i,r){for(var o=t.length;i<o;i++){var s,a,l,c=t[i];go(c)||(s=r+So+i,yo(c)?e(c,n,0,s):(vo(c)?c=jo(c,s):(l=bo(a=c.key)&&a[0]===So,C(c.dom)&&!l||(c=G(c)),C(a)||l?c.key=s:c.key=r+a),n.push(c)))}}(t,n,o,"");break}vo(c)?(n=n||t.slice(0,o)).push(jo(c,So+o)):(l=c.key,s=C(c.dom),l=!(a=C(l))&&bo(l)&&l[0]===So,!s||a||l?(n=n||t.slice(0,o),s&&!l||(c=G(c)),(a||l)&&(c.key=So+o),n.push(c)):n&&n.push(c))}(n=n||t).$=!0}}else C((n=t).dom)||(n=G(t)),i=2;e.children=n,e.childFlags=i,Co(e)}var Ro={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},v="http://www.w3.org/1999/xlink",To="http://www.w3.org/XML/1998/namespace",Ao="http://www.w3.org/2000/svg",Io={"xlink:actuate":v,"xlink:arcrole":v,"xlink:href":v,"xlink:role":v,"xlink:show":v,"xlink:title":v,"xlink:type":v,"xml:base":To,"xml:lang":To,"xml:space":To},P={},Bo=[];function Lo(e,t){e.appendChild(t)}function $o(e,t,n){S(n)?Lo(e,t):e.insertBefore(t,n)}function Vo(e,t,n){e.replaceChild(t,n)}function zo(e){for(var t;void 0!==(t=e.shift());)t()}Object.freeze(P);var Uo={},Fo={};function Wo(e,t,n){var c,i=Uo[e],r=n.$EV;function o(e){var t=e.type;if((t="click"===t||"dblclick"===t)&&0!==e.button)return e.stopPropagation(),!1;e.stopPropagation=Go;for(var n={dom:document},i=(Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return n.dom}}),e),e=e.target,r=t,o=c,s=n,a=e;!C(a);){if(r&&a.disabled)return;var l=a.$EV;if(l){l=l[o];if(l&&(s.dom=a,l.event?l.event(l.data,i):l(i),i.cancelBubble))return}a=a.parentNode}}t?(i||(Fo[e]=(c=e,document.addEventListener(qo(c),o),o),Uo[e]=0),(r=r||(n.$EV={}))[e]||Uo[e]++,r[e]=t):r&&r[e]&&(Uo[e]--,1===i&&(document.removeEventListener(qo(e),Fo[e]),Fo[e]=null),r[e]=t)}function qo(e){return e.substr(2).toLowerCase()}function Go(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function Ho(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function Xo(e,t,n){var i;e[t]?(i=e[t]).event?i.event(i.data,n):i(n):e[i=t.toLowerCase()]&&e[i](n)}function Yo(s,a){function e(e){if(e.stopPropagation(),r=this.$V){var t,n,i=r.props||P,r=r.dom;if(bo(s))Xo(i,s,e);else for(var o=0;o<s.length;o++)Xo(i,s[o],e);M(a)&&(n=(t=this.$V).props||P,a(n,r,!1,t))}}return Object.defineProperty(e,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),e}function Ko(e){return"checkbox"===e||"radio"===e}var Zo=Yo("onInput",es),Qo=Yo(["onClick","onChange"],es);function Jo(e){e.stopPropagation()}function es(e,t){var n=e.type,i=e.value,r=e.checked,o=e.multiple,e=e.defaultValue,s=!S(i);n&&n!==t.type&&t.setAttribute("type",n),S(o)||o===t.multiple||(t.multiple=o),S(e)||s||(t.defaultValue=e+""),Ko(n)?(s&&(t.value=i),S(r)||(t.checked=r)):s&&t.value!==i?(t.defaultValue=i,t.value=i):S(r)||(t.checked=r)}function ts(e,t){if("optgroup"===e.type){var n=e.children,i=e.childFlags;if(12&i)for(var r=0,o=n.length;r<o;r++)ns(n[r],t);else 2===i&&ns(n,t)}else ns(e,t)}function ns(e,t){var n=e.props||P,e=e.dom;e.value=n.value,yo(t)&&-1!==t.indexOf(n.value)||n.value===t?e.selected=!0:S(t)&&S(n.selected)||(e.selected=n.selected||!1)}Jo.wrapped=!0;var is=Yo("onChange",rs);function rs(e,t,n,i){var r=Boolean(e.multiple),t=(S(e.multiple)||r===t.multiple||(t.multiple=r),i.childFlags);if(0==(1&t)){var o=i.children,s=e.value;if(n&&S(s)&&(s=e.defaultValue),12&t)for(var a=0,l=o.length;a<l;a++)ts(o[a],s);else 2===t&&ts(o,s)}}var os=Yo("onInput",as),ss=Yo("onChange");function as(e,t,n){var i=e.value,r=t.value;S(i)?n&&!S(n=e.defaultValue)&&n!==r&&(t.defaultValue=n,t.value=n):r!==i&&(t.defaultValue=i,t.value=i)}function ls(e,t,n,i,r,o){64&e?es(i,n):256&e?rs(i,n,r,t):128&e&&as(i,n,r),o&&(n.$V=t)}function cs(e,t,n){var i;64&e?(i=t,Ko(n.type)?(i.onchange=Qo,i.onclick=Jo):i.oninput=Zo):256&e?t.onchange=is:128&e&&(i=n,(e=t).oninput=os,i.onChange)&&(e.onchange=ss)}function us(e){return e.type&&Ko(e.type)?!S(e.checked):!S(e.value)}function ps(e,t){var n;hs(e),t&&e.dom&&(n=e.dom,t.removeChild(n),e.dom=null)}function hs(e){var t=e.flags;if(481&t){var n=e.ref,i=e.props,n=(M(n)&&n(null),e.children),r=e.childFlags;if(12&r?fs(n):2===r&&hs(n),!C(i))for(var o in i)switch(o){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Wo(o,null,e.dom)}}else{r=e.children;r&&(14&t?(n=e.ref,4&t?(M(r.componentWillUnmount)&&r.componentWillUnmount(),M(n)&&n(null),r.$UN=!0,r.$LI&&hs(r.$LI)):(!S(n)&&M(n.onComponentWillUnmount)&&n.onComponentWillUnmount(e.dom,e.props||P),hs(r))):1024&t&&ps(r,e.type))}}function fs(e){for(var t=0,n=e.length;t<n;t++)hs(e[t])}function ds(e,t){fs(t),e.textContent=""}function ms(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function ys(e,t,n,i,r,o,s){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Wo(e,n,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":i.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e]=!!n;break;case"defaultChecked":case"value":case"volume":o&&"value"===e||(a=S(n)?"":n,i[e]!==a&&(i[e]=a));break;case"dangerouslySetInnerHTML":var a=t&&t.__html||"",l=n&&n.__html||"";a===l||S(l)||Ho(i,l)||(C(s)||(12&s.childFlags?fs(s.children):2===s.childFlags&&hs(s.children),s.children=null,s.childFlags=1),i.innerHTML=l);break;default:if("o"===e[0]&&"n"===e[1])a=n,l=i,g=(d=e).toLowerCase(),M(a)||S(a)?(m=l[g])&&m.wrapped||(l[g]=a):(m=a.event)&&M(m)?l[g]=(y=m,v=a,function(e){y(v.data,e)}):j('an event on a VNode "'+d+'". was not a function or a valid linkEvent.');else if(S(n))i.removeAttribute(e);else if("style"===e){var c,u,p=t,h=n,f=i.style;if(bo(h))f.cssText=h;else if(S(p)||bo(p))for(c in h)u=h[c],f[c]=wo(u)?ms(c,u):u;else{for(c in h)(u=h[c])!==p[c]&&(f[c]=wo(u)?ms(c,u):u);for(c in p)S(h[c])&&(f[c]="")}}else r&&Io[e]?i.setAttributeNS(Io[e],e,n):i.setAttribute(e,n)}var d,m,y,v,g}function vs(e,t,n,i,r){var o,s=!1,a=0<(448&t);for(o in a&&(s=us(n))&&cs(t,i,n),n)ys(o,null,n[o],i,r,s,null);a&&ls(t,e,i,n,!0,s)}function gs(e,t,n,i){t=new t(n,i);if((e.children=t).$V=e,t.$BS=!1,t.context=i,t.props===P&&(t.props=n),t.$UN=!1,M(t.componentWillMount)){if(t.$BR=!0,t.componentWillMount(),t.$PSS){var r=t.state,o=t.$PS;if(C(r))t.state=o;else for(var s in o)r[s]=o[s];t.$PSS=!1,t.$PS=null}t.$BR=!1}M(Ro.beforeRender)&&Ro.beforeRender(t);var a,n=bs(t.render(n,t.state,i),e);return S(a=M(t.getChildContext)?t.getChildContext():a)?t.$CX=i:t.$CX=Eo(i,a),M(Ro.afterRender)&&Ro.afterRender(t),t.$LI=n,t}function bs(e,t){return yo(e)&&j("a valid Inferno VNode (or null) must be returned from a component render. You may have returned an array or an invalid object."),go(e)?e=Po():vo(e)?e=jo(e,null):14&(e=e.dom?G(e):e).flags&&(e.parentVNode=t),e}function H(e,t,n,i){var r,o,s,a,l,c,u,p,h=e.flags;return 481&h?_s(e,t,n,i):14&h?(o=t,s=n,i=i,a=0<(4&h),c=(r=e).type,u=r.props||P,p=r.ref,a?(a=gs(r,c,u,s),r.dom=l=H(a.$LI,null,a.$CX,i),Es(r,p,a),a.$UPD=!1):(a=bs(c(u,s),r),r.children=a,r.dom=l=H(a,null,s,i),ks(u,p,l)),C(o)||Lo(o,l),l):512&h||16&h?ws(e,t):1024&h?(H(e.children,e.type,n,!1),e.dom=ws(Po(),t)):void("object"===Ue(e)?j("mount() received an object that's not a valid VNode, you should stringify it first, fix createVNode flags or call normalizeChildren. Object: \""+JSON.stringify(e)+'".'):j('mount() expects a valid VNode, instead it received an object with the type "'+Ue(e)+'".'))}function ws(e,t){e=e.dom=document.createTextNode(e.children);return C(t)||Lo(t,e),e}function _s(e,t,n,i){var r=e.flags,o=e.children,s=e.props,a=e.className,l=e.ref,c=e.childFlags,u=(i=i||0<(32&r),u=e.type,i?document.createElementNS(Ao,u):document.createElement(u));return e.dom=u,S(a)||""===a||(i?u.setAttribute("class",a):u.className=a),Oo(e),C(t)||Lo(t,u),0==(1&c)&&(a=!0===i&&"foreignObject"!==e.type,2===c?H(o,u,n,a):12&c&&xs(o,u,n,a)),C(s)||vs(e,r,s,u,i),bo(l)&&j('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'),M(l)&&Cs(u,l),u}function xs(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var s=e[r];C(s.dom)||(e[r]=s=G(s)),H(s,t,n,i)}}function Es(e,t,n){var i;M(t)?t(n):vo(t)?j('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'):!S(t)&&"object"===Ue(t)&&4&e.flags&&j("functional component lifecycle events are not supported on ES2015 class components."),M(n.componentDidMount)&&Bo.push((i=n,function(){i.$UPD=!0,i.componentDidMount(),i.$UPD=!1}))}function ks(e,t,n){var i,r,o;S(t)||(M(t.onComponentWillMount)&&t.onComponentWillMount(e),M(t.onComponentDidMount)&&Bo.push((i=t,r=n,o=e,function(){return i.onComponentDidMount(r,o)})))}function Cs(e,t){Bo.push(function(){return t(e)})}function Os(e,t,n,i){var r,o=e.children,s=e.props,a=e.className,l=e.flags,c=e.ref;if(i=i||0<(32&l),1!==t.nodeType||t.tagName.toLowerCase()!==e.type){xo("Inferno hydration: Server-side markup doesn't match client-side markup or Initial render target is not empty");var u=_s(e,null,n,i);e.dom=u,Vo(t.parentNode,u,t)}else{var p=(e.dom=t).firstChild,u=e.childFlags;if(0==(1&u)){for(var h=null;p;)h=p.nextSibling,8===p.nodeType&&("!"===p.data?t.replaceChild(document.createTextNode(""),p):t.removeChild(p)),p=h;if(p=t.firstChild,2===u)C(p)?H(o,t,n,i):(h=p.nextSibling,Ss(o,p,n,i),p=h);else if(12&u)for(var f=0,d=o.length;f<d;f++){var m=o[f];C(p)?H(m,t,n,i):(h=p.nextSibling,Ss(m,p,n,i),p=h)}for(;p;)h=p.nextSibling,t.removeChild(p),p=h}else C(t.firstChild)||(u=t,r=s,Boolean(r&&r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html&&Ho(u,r.dangerouslySetInnerHTML.__html)))||(t.textContent="",448&l&&(t.defaultValue=""));C(s)||vs(e,l,s,t,i),S(a)?""!==t.className&&t.removeAttribute("class"):i?t.setAttribute("class",a):t.className=a,M(c)?Cs(t,c):bo(c)&&j('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}function Ss(e,t,n,i){var r,o,s,a,l,c,u,p,h,f,d=e.flags;14&d?(s=t,a=n,l=i,c=0<(4&d),p=(o=e).type,h=o.ref,f=o.props||P,c?(Ss(u=(c=gs(o,p,f,a)).$LI,s,c.$CX,l),o.dom=u.dom,Es(o,h,c),c.$UPD=!1):(Ss(u=bs(p(f,a),o),s,a,l),o.children=u,o.dom=u.dom,ks(f,h,s))):481&d?Os(e,t,n,i):16&d?(c=e,3!==(p=t).nodeType?(r=ws(c,null),c.dom=r,Vo(p.parentNode,r,p)):(r=c.children,p.nodeValue!==r&&(p.nodeValue=r),c.dom=p)):512&d?e.dom=t:(j('hydrate() expects a valid VNode, instead it received an object with the type "'+Ue(e)+'".'),j())}function Ms(e,t,n,i,r){hs(e),Vo(n,H(t,null,i,r),e.dom)}function js(e,t,n,i,r){var o,s=0|t.flags;if(e.flags!==s||2048&s)Ms(e,t,n,i,r);else if(481&s){var a,l=e,c=t,u=n,p=i,h=r,f=s,d=c.type;if(l.type!==d)Ms(l,c,u,p,h);else{var m=l.dom,u=l.props,y=c.props,v=!1,g=!1;if(c.dom=m,h=h||0<(32&f),u!==y){var b=u||P;if((a=y||P)!==P)for(var w in(v=0<(448&f))&&(g=us(a)),a){var _=b[w],x=a[w];_!==x&&ys(w,_,x,m,h,g,l)}if(b!==P)for(var E in b)a.hasOwnProperty(E)||S(b[E])||ys(E,b[E],null,m,h,g,l)}var u=l.children,y=c.children,k=c.ref,C=l.className,O=c.className;Oo(c),4096&f?function(e,t){e.textContent!==t.children&&(e.textContent=t.children)}(m,y):Ns(l.childFlags,c.childFlags,u,y,m,p,h&&"foreignObject"!==d),v&&ls(f,c,m,a,!1,g),C!==O&&(S(O)?m.removeAttribute("class"):h?m.setAttribute("class",O):m.className=O),M(k)&&l.ref!==k?Cs(m,k):bo(k)&&j('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}else 14&s?(u=e,y=n,p=i,d=r,v=0<(4&s),c=(f=t).type,C=u.key,O=f.key,u.type!==c||C!==O?Ms(u,f,y,p,d):(C=f.props||P,v?((O=u.children).$UPD=!0,O.$V=f,Ps(O,O.state,f,C,y,p,d,!1,!1),O.$UPD=!1):(v=!0,O=u.props,k=f.ref,n=!S(k),r=u.children,f.dom=u.dom,f.children=r,!1!==(v=n&&M(k.onComponentShouldUpdate)?k.onComponentShouldUpdate(O,C):v)?(n&&M(k.onComponentWillUpdate)&&k.onComponentWillUpdate(O,C),(u=c(C,p))!==fo&&(u=bs(u,f),js(r,u,y,p,d),f.children=u,f.dom=u.dom,n)&&M(k.onComponentDidUpdate)&&k.onComponentDidUpdate(O,C)):14&r.flags&&(r.parentVNode=f)))):16&s?(r=(n=t).children,o=e.dom,r!==e.children&&(o.nodeValue=r),n.dom=o):512&s?t.dom=e.dom:(r=t,n=i,s=(o=e).type,t=r.type,i=r.children,Ns(o.childFlags,r.childFlags,o.children,i,s,n,!1),r.dom=o.dom,s===t||go(i)||(n=i.dom,s.removeChild(n),t.appendChild(n)))}function Ns(I,e,t,n,i,r,o){switch(I){case 2:switch(e){case 2:js(t,n,i,r,o);break;case 1:ps(t,i);break;default:ps(t,i),xs(n,i,r,o)}break;case 1:switch(e){case 2:H(n,i,r,o);break;case 1:break;default:xs(n,i,r,o)}break;default:if(12&e){var s=t.length,a=n.length;if(0===s)0<a&&xs(n,i,r,o);else if(0===a)ds(i,t);else if(8===e&&8===I){var l,c,u=t,p=n,h=i,f=r,d=o,B=s,m=a,y=B-1,v=m-1,g=0,b=u[g],w=p[g];e:{for(;b.key===w.key;){if(w.dom&&(p[g]=w=G(w)),js(b,w,h,f,d),u[g]=w,y<++g||v<g)break e;b=u[g],w=p[g]}for(b=u[y],w=p[v];b.key===w.key;){if(w.dom&&(p[v]=w=G(w)),js(b,w,h,f,d),u[y]=w,v--,--y<g||v<g)break e;b=u[y],w=p[v]}}if(y<g){if(g<=v)for(var L=(c=v+1)<m?p[c].dom:null;g<=v;)(w=p[g]).dom&&(p[g]=w=G(w)),g++,$o(h,H(w,null,f,d),L)}else if(v<g)for(;g<=y;)ps(u[g++],h);else{var _=g,x=g,$=y-g+1,E=v-g+1,k=[];for(l=0;l<E;l++)k.push(0);var C=$===B,O=!1,S=0,M=0;if(m<4||($|E)<32)for(l=_;l<=y;l++)if(b=u[l],M<E){for(g=x;g<=v;g++)if(w=p[g],b.key===w.key){if(k[g-x]=l+1,C)for(C=!1;_<l;)ps(u[_++],h);g<S?O=!0:S=g,w.dom&&(p[g]=w=G(w)),js(b,w,h,f,d),M++;break}!C&&v<g&&ps(b,h)}else C||ps(b,h);else{var V={};for(l=x;l<=v;l++)V[p[l].key]=l;for(l=_;l<=y;l++)if(b=u[l],M<E)if(void 0!==(g=V[b.key])){if(C)for(C=!1;_<l;)ps(u[_++],h);w=p[g],k[g-x]=l+1,g<S?O=!0:S=g,w.dom&&(p[g]=w=G(w)),js(b,w,h,f,d),M++}else C||ps(b,h);else C||ps(b,h)}if(C)ds(h,u),xs(p,h,f,d);else if(O){var z=function(e){var t,n,i,r,o,s=e.slice(),a=[0],l=e.length;for(t=0;t<l;t++){var c=e[t];if(0!==c)if(n=a[a.length-1],e[n]<c)s[t]=n,a.push(t);else{for(i=0,r=a.length-1;i<r;)e[a[o=(i+r)/2|0]]<c?i=1+o:r=o;c<e[a[i]]&&(0<i&&(s[t]=a[i-1]),a[i]=t)}}i=a.length,r=a[i-1];for(;0<i--;)a[i]=r,r=s[r];return a}(k);for(g=z.length-1,l=E-1;0<=l;l--)0===k[l]?((w=p[S=l+x]).dom&&(p[S]=w=G(w)),c=S+1,$o(h,H(w,null,f,d),c<m?p[c].dom:null)):g<0||l!==z[g]?(w=p[S=l+x],c=S+1,$o(h,w.dom,c<m?p[c].dom:null)):g--}else if(M!==E)for(l=E-1;0<=l;l--)0===k[l]&&((w=p[S=l+x]).dom&&(p[S]=w=G(w)),c=S+1,$o(h,H(w,null,f,d),c<m?p[c].dom:null))}}else{for(var j,U,N=t,P=n,D=i,F=r,W=o,R=s,T=a,q=T<R?T:R,A=0;A<q;A++)j=P[A],U=N[A],j.dom&&(j=P[A]=G(j)),js(U,j,D,F,W),N[A]=j;if(R<T)for(A=q;A<T;A++)H(j=(j=P[A]).dom?P[A]=G(j):j,D,F,W);else if(T<R)for(A=q;A<R;A++)ps(N[A],D)}}else 1===e?ds(i,t):2===e&&(ds(i,t),H(n,i,r,o))}}function Ps(e,t,n,i,r,o,s,a,l){var c=e.state,u=e.props;if((n.children=e).$UN)xo("Inferno Error: Can only update a mounted or mounting component. This usually means you called setState() or forceUpdate() on an unmounted component. This is a no-op.");else{if(u!==i||i===P){if(!l&&M(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(i,o),e.$UN)return;e.$BR=!1}e.$PSS&&(t=Eo(t,e.$PS),e.$PSS=!1,e.$PS=null)}var p,l=Boolean(e.shouldComponentUpdate);a||!l||l&&e.shouldComponentUpdate(i,t,o)?(M(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(i,t,o),e.$BS=!1),e.props=i,e.state=t,e.context=o,M(Ro.beforeRender)&&Ro.beforeRender(e),a=e.render(i,t,o),M(Ro.afterRender)&&Ro.afterRender(e),l=a!==fo,p=S(p=M(e.getChildContext)?e.getChildContext():p)?o:Eo(o,p),e.$CX=p,l&&(js(e.$LI,l=bs(a,n),r,p,s),e.$LI=l,M(e.componentDidUpdate))&&e.componentDidUpdate(u,c)):(e.props=i,e.state=t,e.context=o),n.dom=e.$LI.dom}}_r&&null===document.body&&xo('Inferno warning: you cannot initialize inferno without "document.body". Wait on "DOMContentLoaded" event, add script to bottom of body, or use async/defer attributes on script tag.');var Ds=_r?document.body:null;function Rs(e,t,n){if(Ds===t&&j('you cannot render() to the "document.body". Use an empty element as a container instead.'),e!==fo){var i=t.$V;if(S(i)){if(!go(e)){if(e.dom&&(e=G(e)),C(t.firstChild))H(e,t,P,!1),t.$V=e;else{var r=e,o=t,s=void 0,a=o.firstChild;if(!C(a))for(go(r)||Ss(r,a,P,!1),a=o.firstChild;a=a.nextSibling;)o.removeChild(a);0<Bo.length&&zo(Bo),o.$V=r,M(s)&&s()}i=e}}else S(e)?(ps(i,t),t.$V=null):(js(i,e=e.dom?G(e):e,t,P,!1),i=t.$V=e);0<Bo.length&&zo(Bo),M(n)&&n(),M(Ro.renderComplete)&&Ro.renderComplete(i),i&&14&i.flags&&i.children}}var Ts="undefined"==typeof Promise?null:Promise.resolve(),As="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function Is(e,t,n,i){M(t)&&(t=t(e.state,e.props,e.context));var r,o,s,a=e.$PS;if(S(a))e.$PS=t;else for(var l in t)a[l]=t[l];e.$PSS||e.$BR?(e.$PSS=!0,e.$BR&&M(n)&&Bo.push(n.bind(e))):e.$UPD?(C(r=e.$QU)&&(r=e.$QU=[],function(e){if(Ts)return Ts.then(e);As(e)}((o=e,s=r,function(){o.$QU=null,o.$UPD=!0,Bs(o,!1,function(){for(var e=0,t=s.length;e<t;e++)s[e].call(o)}),o.$UPD=!1}))),M(n)&&r.push(n)):(e.$PSS=!0,e.$UPD=!0,Bs(e,i,n),e.$UPD=!1)}function Bs(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var i=e.$PS,i=Eo(e.state,i),r=e.props,o=e.context,s=(e.$PS=null,e.$V),a=e.$LI;if(Ps(e,i,s,r,a.dom&&a.dom.parentNode,o,0<(32&s.flags),t,!0),e.$UN)return;if(0==(1024&e.$LI.flags))for(var l=e.$LI.dom;!C(s=s.parentVNode);)0<(14&s.flags)&&(s.dom=l);0<Bo.length&&zo(Bo)}else e.state=e.$PS,e.$PS=null;M(n)&&n.call(e)}}function D(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||P,this.context=t||P}function Ls(){}D.prototype.forceUpdate=function(e){this.$UN||Is(this,{},e,!0)},D.prototype.setState=function(e,t){this.$UN||(this.$BS?j("cannot update state via setState() in componentWillUpdate() or constructor."):Is(this,e,t,!1))},D.prototype.render=function(e,t,n){};console.info("Inferno is in development mode."),-1===(Ls.name||Ls.toString()).indexOf("testFn")&&xo("It looks like you're using a minified copy of the development build of Inferno. When deploying Inferno apps to production, make sure to use the production build which skips development warnings and is faster. See http://infernojs.org for more details.");var $s=function(){o(i,D);var n=c(i);function i(e){a(this,i);var t,e=(t=n.call(this,e))._injector=e.injector,e=(t._sheet=e.get("sheet"),t._changeSupport=e.get("changeSupport"),t._components=e.get("components"),t._eventBus=e.get("eventBus"),e.get("throttle"));return t.onElementsChanged=t.onElementsChanged.bind(s(t)),t.onScroll=e(t.onScroll.bind(s(t))),t}return l(i,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"onScroll",value:function(){this._eventBus.fire("sheet.scroll")}},{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}},{key:"componentWillMount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.onElementsChanged(e,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.offElementsChanged(e,this.onElementsChanged)}},{key:"render",value:function(){var e=this._sheet.getRoot(),t=e.rows,e=e.cols,n=this._components.getComponents("table.before"),i=this._components.getComponents("table.after"),r=this._components.getComponent("table.head"),o=this._components.getComponent("table.body"),s=this._components.getComponent("table.foot");return O(1,"div","tjs-container",[n&&n.map(function(e,t){return N(2,e,null,t)}),O(1,"div","tjs-table-container",O(1,"table","tjs-table",[r&&N(2,r,{rows:t,cols:e}),o&&N(2,o,{rows:t,cols:e}),s&&N(2,s,{rows:t,cols:e})],0),2,{onScroll:this.onScroll}),i&&i.map(function(e,t){return N(2,e,null,t)})],0)}}]),i}(),v=function(){function s(e,t,n,i,r){a(this,s);var o=n.container;this._container=o,i.on("root.added",function(){Rs(N(2,$s,{injector:r}),o)}),i.on("root.remove",function(){Rs(null,o)})}return l(s,[{key:"getContainer",value:function(){return this._container}}]),s}(),To=(v.$inject=["changeSupport","components","config.renderer","eventBus","injector"],{__init__:["changeSupport","components","renderer"],changeSupport:["type",br],components:["type",e],renderer:["type",v]}),_r=function(){function i(e,t){var n=this;a(this,i),this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",function(){n.setRoot(null)})}return l(i,[{key:"setRoot",value:function(e){var t;this._root&&(t=this._root,this._eventBus.fire("root.remove",{root:t}),this._root=null,this._eventBus.fire("root.removed",{root:t})),e&&this._eventBus.fire("root.add",{root:e}),(this._root=e)&&this._eventBus.fire("root.added",{root:e})}},{key:"getRoot",value:function(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}},{key:"addRow",value:function(n,i){var r=this,o=this.getRoot();if(o.cols.length!=n.cells.length)throw new Error("number of cells is not equal to number of cols");return Vs(i=void 0===i?o.rows.length:i,o.rows,n),n.root=o,this._elementRegistry.add(n),n.cells.forEach(function(e,t){r._elementRegistry.add(e),e.row=n,e.col=o.cols[t],Vs(i,o.cols[t].cells,e)}),this._eventBus.fire("row.add",{row:n}),n}},{key:"removeRow",value:function(e){var n=this,i=this.getRoot(),r=("string"==typeof e&&(e=this._elementRegistry.get(e)),i.rows.indexOf(e));-1!==r&&(zs(r,i.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.col=void 0,zs(r,i.cols[t].cells)}),this._eventBus.fire("row.remove",{row:e}))}},{key:"addCol",value:function(n,i){var r=this,o=this.getRoot();if(this._elementRegistry.add(n),o.rows.length!=n.cells.length)throw new Error("number of cells is not equal to number of rows");return Vs(i=void 0===i?o.cols.length:i,o.cols,n),n.root=o,n.cells.forEach(function(e,t){r._elementRegistry.add(e),e.col=n,e.row=o.rows[t],Vs(i,o.rows[t].cells,e)}),this._eventBus.fire("col.add",{col:n}),n}},{key:"removeCol",value:function(e){var n=this,i=this.getRoot(),r=("string"==typeof e&&(e=this._elementRegistry.get(e)),i.cols.indexOf(e));-1!==r&&(zs(r,i.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.row=void 0,zs(r,i.rows[t].cells)}),this._eventBus.fire("col.remove",{col:e}))}},{key:"resized",value:function(){this._eventBus.fire("sheet.resized")}}]),i}();function Vs(e,t,n){t.splice(e,0,n)}function zs(e,t){t.splice(e,1)}function Us(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r="number"==typeof e?e:e?300:0;return r?function(e){return t=e,n=r,i=!1,function(){i||(t.apply(void 0,arguments),i=!0,setTimeout(function(){i=!1},n))};var t,n,i}:function(e){return e}}_r.$inject=["elementRegistry","eventBus"],Us.$inject=["config.throttle"];var Fs={__depends__:[To],__init__:["elementFactory","sheet"],elementFactory:["type",Ir],elementRegistry:["type",Dr],eventBus:["type",i],sheet:["type",_r],throttle:["factory",Us]},Ws=["modules"],qs=function(){function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(a(this,i),t.injector);n||(e=(t=this._init(t)).modules,n=function(e,t){e=new In([{config:["value",e]},Fs].concat(t||[]));return e.init(),e}(t.config,e)),this.get=n.get,this.invoke=n.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}return l(i,[{key:"_init",value:function(e){return{modules:e.modules,config:$(e,Ws)}}},{key:"destroy",value:function(){var e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}},{key:"clear",value:function(){var e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}}]),i}();function Gs(e){var t;return e?(t=e.id?' id="'.concat(e.id,'"'):"","<".concat(e.$type).concat(t," />")):"<null>"}function Hs(o,e){function s(e,t,n){if(e.gfx)throw new Error("already rendered ".concat(Gs(e)));o.element(e,t,n)}function a(e,t,n){g(e,function(e){s(e,t,n)})}function l(e,t,n){g(e,function(e){s(e,t,n)})}return{handleDecision:function(e){e.id||(e.id="decision");var t=e.decisionLogic;if(!t)throw new Error("no table for ".concat(Gs(e)));if(!t.output)throw new Error("missing output for ".concat(Gs(t)));var n,i,r,e=o.table(t);t.input&&a(t.input,e,t),a(t.output,e,t),n=t.rule,i=e,r=t,g(n,function(e){s(e,i,r),l(e.inputEntry,e),l(e.outputEntry,e)})}}}function Xs(e,t,n){var i,r=e.get("tableImporter"),o=e.get("eventBus"),s=e.get("sheet"),a=(e.get("modeling",!1),[]);o.fire("import.render.start",{decision:t});try{new Hs({create:function(e,t,n,i){return r.create(e,t,n,i)},table:function(e){return r.add(e)},element:function(e,t,n){return r.add(e,t,n)},error:function(e,t){a.push({message:e,context:t})}}).handleDecision(t)}catch(e){i=e}o.fire("import.render.complete",{error:i,warnings:a}),o.fire("elements.changed",{elements:[s.getRoot()]}),n(i,a)}function Ys(e,t){var n=e.elements,i=e.index;return i[t]?e:{elements:[].concat(p(n),[t]),index:T(T({},i),{},I({},t,!0))}}function Ks(){for(var e,n={elements:[],index:{}},t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.forEach(function(t){var e=Ue(t);"string"===e&&0<t.length?n=Ys(n,t):"object"===e&&null!==t&&Object.keys(t).forEach(function(e){t[e]&&(n=Ys(n,e))})}),e=" ",n.elements.join(e)}function Zs(e){Qs(e.constructor,e)}function Qs(e,s){var t,a=e.$inject;a&&(e=s.context.injector,t=[].concat(p(a),[function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(e in n){var r=a[e],o=n[e];s[r]=o}}]),e.invoke(t))}function Js(i,r){Object.keys(r).forEach(function(e){if("$inject"!==e&&"__init"!==e){var t=r[e],n=("constructor"===e&&t.call(i,i.props,i.context),i[e]);if(void 0!==n){if("function"!=typeof n)throw new Error("failed to mixin <".concat(e,">: cannot combine with non-fn component value"));i[e]=function(r){for(var e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return o.forEach(function(e){if(void 0!==(t=e.call.apply(e,[r].concat(n))))return!1}),t}.bind(r)}(i,n,t)}else i[e]=t.bind(i)}}),"$inject"in r&&Qs(r,i),"__init"in r&&r.__init.call(i,i.props,i.context)}var ea={getSelectionClasses:function(){var e=this.state;return Ks({selected:e.selected,"selected-secondary":e.selectedSecondary,focussed:e.focussed})},selectionChanged:function(e){this.setState(e)},componentWillUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount:function(){this.updateSelectionSubscription(!0)},componentWillUnmount:function(){this.updateSelectionSubscription(!1)},updateSelectionSubscription:function(e){var t=this.props.elementId;t&&this.eventBus[e?"on":"off"]("selection.".concat(t,".changed"),this.selectionChanged)},$inject:["eventBus"]},ta=["className","elementId","coords"],na=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),Js(s(e=n.call(this,e,t)),ea),Zs(s(e)),e}return l(i,[{key:"getRenderProps",value:function(){for(var e=this.props,t=e.className,n=e.elementId,i=e.coords,e=$(e,ta),r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];t={className:Ks.apply(void 0,o.concat([this.getSelectionClasses(),t]))};return n&&(t["data-element-id"]=n),i&&(t["data-coords"]=i),T(T({},t),e)}}]),i}(),ia=function(){o(i,na);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t)).state={},e}return l(i,[{key:"render",value:function(){return No(O(1,"td",null,this.props.children,0,T({},this.getRenderProps("cell"))))}}]),i}(),ra=["type","context"],oa=["type","context"];function sa(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function aa(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sa(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],(e=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):sa(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function la(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}var ca={slotFill:function(e,t){var n=e.type,i=e.context,e=la(e,ra),n=this.components.getComponent(n,i)||t;return n?No(N(2,n,aa(aa({},i),e))):null},slotFills:function(e){var t=e.type,n=e.context,i=la(e,oa);return this.components.getComponents(t,n).map(function(e){return No(N(2,e,aa(aa({},n),i)))})}};function ua(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}ca.$inject=["components"];var pa=function(){o(r,D);var i=c(r);function r(e,t){var n;return a(this,r),ua(s(n=i.call(this,e,t)),"onElementsChanged",function(){n.forceUpdate()}),Js(s(n),ca),Zs(s(n)),n}return l(r,[{key:"componentDidMount",value:function(){this.changeSupport.onElementsChanged(this.getRoot(),this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.getRoot(),this.onElementsChanged)}},{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"render",value:function(){var e=(this.getRoot().businessObject.get("annotationsWidth")||400)+"px";return O(1,"th","annotation header",[this.slotFills({type:"cell-inner",context:{cellType:"annotations",col:this.sheet.getRoot(),minWidth:400}}),this.translate("Annotations")],0,{style:{width:e}})}}]),r}();function ha(e){var e=e.row.businessObject,t=e.id,e=e.description;return N(2,ia,{className:"annotation",elementId:t,children:e||"-"})}function fa(e){e.onGetComponent("cell",function(e){e=e.cellType;return"after-label-cells"===e?pa:"after-rule-cells"===e?ha:void 0})}pa.$inject=["changeSupport","sheet","translate"],fa.$inject=["components"];var da={__init__:["annotationsProvider"],annotationsProvider:["type",fa]};function ma(e,t){return w({id:e.id,type:e.$type,businessObject:e},t)}br=function(){function i(e,t,n){a(this,i),this._elementFactory=e,this._eventBus=t,this._sheet=n}return l(i,[{key:"add",value:function(e){var t,n,i=this;return k(e,"dmn:DecisionTable")?(n=this._elementFactory.createRoot(ma(e)),this._sheet.setRoot(n)):k(e,"dmn:InputClause")||k(e,"dmn:OutputClause")?(n=this._elementFactory.createCol(ma(e)),this._sheet.addCol(n)):k(e,"dmn:DecisionRule")&&(e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]),t=[].concat(p(e.inputEntry),p(e.outputEntry)).map(function(e){return i._elementFactory.createCell(ma(e))}),n=this._elementFactory.createRow(w(ma(e),{cells:t})),this._sheet.addRow(n)),this._eventBus.fire("dmnElement.added",{element:n}),n}}]),i}();br.$inject=["elementFactory","eventBus","sheet"];var ya={__depends__:[{__depends__:[ur],tableImporter:["type",br]},To]};function va(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var ga=function(){o(r,D);var i=c(r);function r(e,t){var n;return a(this,r),va(s(n=i.call(this,e,t)),"onElementsChanged",function(){n.forceUpdate()}),Js(s(n),ca),n._sheet=t.injector.get("sheet"),n._changeSupport=t.changeSupport,n}return l(r,[{key:"componentWillMount",value:function(){var e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var i,n,r=this,e=this._sheet.getRoot();return k(e,"dmn:DMNElement")?(e=Ui(e),i=e.input,n=e.output,O(1,"thead",null,O(1,"tr",null,[O(1,"th","index-column"),this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),i&&i.map(function(e,t){var n=e.width||"192px";return r.slotFill({type:"cell",context:{cellType:"input-header",input:e,index:t,inputsLength:i.length,width:n},key:e.id},ba)}),n.map(function(e,t){return r.slotFill({type:"cell",context:{cellType:"output-header",output:e,index:t,outputsLength:n.length},key:e.id},wa)}),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),2)):null}}]),r}();function ba(e,t){var n=e.input,i=e.className,e=e.index,r=n.label,o=n.inputExpression,s=n.inputValues,t=t.injector.get("translate");return O(1,"th",(i||"")+" input-cell",[O(1,"div","clause",t(0===e?"When":"And"),0),r?O(1,"div","input-label",r,0,{title:t("Input Label: ")+r}):O(1,"div","input-expression",o.text,0,{title:t("Input Expression: ")+o.text}),O(1,"div","input-variable",s&&s.text||o.typeRef,0,{title:s&&s.text?t("Input Values"):t("Input Type")})],0,{"data-col-id":n.id},n.id)}function wa(e,t){var n=e.output,i=e.className,e=e.index,r=n.label,o=n.name,s=n.outputValues,a=n.typeRef,t=t.injector.get("translate");return O(1,"th",(i||"")+" output-cell",[O(1,"div","clause",t(0===e?"Then":"And"),0),r?O(1,"div","output-label",r,0,{title:t("Output Label")}):O(1,"div","output-name",o,0,{title:t("Output Name")}),O(1,"div","output-variable",s&&s.text||a,0,{title:s&&s.text?t("Output Values"):t("Output Type")})],0,null,n.id)}function _a(e){e.onGetComponent("table.head",function(){return ga})}_a.$inject=["components"];var xa={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",_a]},Ea=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t))._translate=t.injector.get("translate"),Zs(s(e)),e}return l(i,[{key:"render",value:function(){var e,t=this.sheet.getRoot();return k(t,"dmn:DMNElement")?(t=t.businessObject.$parent.name,e=this.components.getComponent("hit-policy")||ka,O(1,"div","decision-table-properties",[O(1,"div","decision-table-name",t,0,{title:this._translate("Decision Name: ")+t}),O(1,"div","decision-table-header-separator"),N(2,e)],4)):null}}]),i}();function ka(){return null}Ea.$inject=["sheet","components"];var e=l(function e(t){a(this,e),t.onGetComponent("table.before",500,function(){return Ea})}),Ca=(e.$inject=["components"],{__init__:["decisionTableProperties"],decisionTableProperties:["type",e]}),Oa=function(){o(t,D);var e=c(t);function t(){return a(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(){var e=this.props,t=e.row,n=e.rowIndex,e=this.context.components.getComponents("cell-inner",{cellType:"rule-index",row:t,rowIndex:n});return O(1,"td","rule-index",[e&&e.map(function(e){return N(2,e,{row:t,rowIndex:n})}),n+1],0,{"data-element-id":t.id,"data-row-id":t.id})}}]),t}(),v=l(function e(t){a(this,e),t.onGetComponent("cell",function(e){if("before-rule-cells"===e.cellType)return Oa})}),Sa=(v.$inject=["components"],{__init__:["decisionRuleIndices"],decisionRuleIndices:["type",v]}),Ma=[{label:"FEEL",value:"feel"}],Ir=function(){function n(e){a(this,n);var e=(this._injector=e).get("config.expressionLanguages")||{},t=(this._config={options:Ma,defaults:{editor:"feel"}},e.options&&(this._config.options=e.options),this._getLegacyDefaults());w(this._config.defaults,t,e.defaults)}return l(n,[{key:"getDefault",value:function(e){var t=this._config.defaults,e=t[e]||t.editor;return this._getLanguageByValue(e)||this.getAll()[0]}},{key:"getLabel",value:function(e){var t=this._getLanguageByValue(e);return t?t.label:e}},{key:"getAll",value:function(){return this._config.options}},{key:"_getLegacyDefaults",value:function(){var e={},t=this._injector,n=t.get("config.defaultInputExpressionLanguage"),t=t.get("config.defaultOutputExpressionLanguage");return n&&(e.inputCell=n),t&&(e.outputCell=t),e}},{key:"_getLanguageByValue",value:function(t){return J(this.getAll(),function(e){return t===e.value})}}]),n}(),Dr=(Ir.$inject=["injector"],{__init__:["expressionLanguages"],expressionLanguages:["type",Ir]}),ja=function(){o(t,D);var e=c(t);function t(){return a(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(e){var t=e.rows,i=e.cols,r=this.context.components;return O(1,"tbody",null,t.map(function(e,t){var n=r.getComponent("row",{rowType:"rule"});return n&&N(2,n,{row:e,rowIndex:t,cols:i},e.id)}),0)}}]),t}(),Na=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),Js(s(e=n.call(this,e,t)),ca),e}return l(i,[{key:"render",value:function(){var n=this,e=this.props,i=e.row,r=e.rowIndex,o=e.cols,e=i.cells;return O(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:i,rowIndex:r}}),e.map(function(e,t){return n.slotFill({type:"cell",context:{cellType:"rule",cell:e,rowIndex:r,colIndex:t},key:e.id,row:i,col:o[t]})}),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:i,rowIndex:r}})],0)}}]),i}(),Pa=function(){o(t,D);var e=c(t);function t(){return a(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.row,e=e.col;return k(t,"dmn:UnaryTests")?N(2,ia,{className:"input-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":e.id,children:t.businessObject.text}):N(2,ia,{className:"output-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":e.id,children:t.businessObject.text})}}]),t}(),_r=l(function e(t){a(this,e),t.onGetComponent("table.body",function(){return ja}),t.onGetComponent("row",function(e){if("rule"===e.rowType)return Na}),t.onGetComponent("cell",function(e){if("rule"===e.cellType)return Pa})}),Da=(_r.$inject=["components"],{__depends__:[Dr],__init__:["decisionRules"],decisionRules:["type",_r]}),Ra=[{label:"Unique",value:{hitPolicy:"UNIQUE",aggregation:void 0},explanation:"No overlap is possible and all rules are disjoint. Only a single rule can be matched"},{label:"First",value:{hitPolicy:"FIRST",aggregation:void 0},explanation:"Rules may overlap. The first matching rule will be chosen"},{label:"Priority",value:{hitPolicy:"PRIORITY",aggregation:void 0},explanation:"Rules may overlap. The one with the highest priority will be chosen"},{label:"Any",value:{hitPolicy:"ANY",aggregation:void 0},explanation:"Rules may overlap. Their output have to match"},{label:"Collect",value:{hitPolicy:"COLLECT",aggregation:void 0},explanation:"Collects the values of all matching rules"},{label:"Collect (Sum)",value:{hitPolicy:"COLLECT",aggregation:"SUM"},explanation:"Collects the values of all matching rules and sums up to a single value"},{label:"Collect (Min)",value:{hitPolicy:"COLLECT",aggregation:"MIN"},explanation:"Collects the values of all matching rules and uses the lowest value"},{label:"Collect (Max)",value:{hitPolicy:"COLLECT",aggregation:"MAX"},explanation:"Collects the values of all matching rules and uses the highest value"},{label:"Collect (Count)",value:{hitPolicy:"COLLECT",aggregation:"COUNT"},explanation:"Collects the values of all matching rules and counts the number of them"},{label:"Rule order",value:{hitPolicy:"RULE ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in rule order"},{label:"Output order",value:{hitPolicy:"OUTPUT ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in decreasing output priority order"}],Ta=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t))._translate=t.injector.get("translate"),Zs(s(e)),e}return l(i,[{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"render",value:function(){var e=this.getRoot().businessObject,n=e.aggregation,i=e.hitPolicy,e=J(Ra,function(e){return e=e.value,t={aggregation:n,hitPolicy:i},e.hitPolicy===t.hitPolicy&&e.aggregation===t.aggregation;var t});return O(1,"div","hit-policy header",[O(1,"label","dms-label",this._translate("Hit Policy:"),0),O(1,"span","hit-policy-value",this._translate(e.label),0)],4,{title:this._translate(e.explanation)})}}]),i}();function Aa(e){e.onGetComponent("hit-policy",function(){return Ta})}Ta.$inject=["sheet"],Aa.$inject=["components"];var Ia={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",Aa]};function Ba(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var La=function(){o(r,D);var i=c(r);function r(e,t){a(this,r),Ba(s(n=i.call(this,e,t)),"onClick",function(){n._eventBus.fire("showDrd")});var n,e=t.injector;return n._translate=e.get("translate"),n._eventBus=e.get("eventBus"),n}return l(r,[{key:"render",value:function(){var t=this;return O(1,"div","view-drd",O(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),r}(),br=function(){function o(e,t,n,i){var r=this;a(this,o),this._injector=n,this._sheet=i,e.onGetComponent("table.before",function(){if(r.canViewDrd())return La}),t.on("showDrd",function(){var e=n.get("_parent",!1),t=$a(i.getRoot());t&&(t=e.getView(t),e.open(t))})}return l(o,[{key:"canViewDrd",value:function(){var e,t=this._injector.get("_parent",!1);return!!t&&(e=$a(this._sheet.getRoot()),!!t.getView(e))}}]),o}();function $a(e){e=e.businessObject;if(e)return e.$parent.$parent}br.$inject=["components","eventBus","injector","sheet"];var Va={__init__:["viewDrd"],viewDrd:["type",br]};function za(){return O(32,"svg",null,[O(1,"path",null,null,1,{fill:"#000000",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),O(1,"path",null,null,1,{fill:"#000000",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"})],4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:"vertical-align:middle"})}function Ua(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Fa=function(){o(r,D);var i=c(r);function r(e,t){a(this,r),Ua(s(n=i.call(this,e,t)),"onClick",function(){n._eventBus.fire("poweredBy.show")});var n,e=t.injector;return n._eventBus=e.get("eventBus"),n}return l(r,[{key:"render",value:function(){var t=this;return O(1,"div","powered-by",O(1,"div","powered-by__logo",N(2,za),2,{title:"Powered by bpmn.io",onClick:this.onClick},null,function(e){return t.node=e}),2)}}]),r}(),Wa=function(){o(n,D);var t=c(n);function n(e){return a(this,n),(e=t.call(this,e)).state={show:!1},e.onClick=e.onClick.bind(s(e)),e.onShow=e.onShow.bind(s(e)),e}return l(n,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&O(1,"div","powered-by-overlay",O(1,"div","powered-by-overlay-content",[O(1,"a","logo",N(2,za),2,{href:"https://bpmn.io",target:"_blank",rel:"noopener"}),O(1,"span",null,[jo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),O(1,"a",null,jo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),jo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),n}(),To=l(function e(t,n){a(this,e),t.onGetComponent("table.before",function(){return Fa}),t.onGetComponent("table.before",function(){return Wa})}),qa=(To.$inject=["components","eventBus"],{__init__:["poweredBy"],poweredBy:["type",To]}),Ga=["modules","additionalModules"];function Ha(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}var Xa=function(){o(i,qs);var n=c(i);function i(){a(this,i);var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=i._createContainer(),e=n.call(this,w(e,{renderer:{container:t}}));return e._container=t,e}return l(i,[{key:"open",value:function(e){var r=this;return new Promise(function(n,i){var t;try{return r._decision&&r.clear(),r._decision=e,Xs(r,e,function(e,t){e?(e.warnings=t||[],i(e)):n({warnings:t||[]})})}catch(e){t=e}t?(t.warnings=t.warnings||[],i(t)):n({warnings:[]})})}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,e=Ha(e,Ga),t=t||this.getModules(),n=n||[],i=[{decisionTable:["value",this]}];return{modules:[qa].concat(p(t),p(n),i),config:e}}},{key:"on",value:function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),yn(e))}},{key:"destroy",value:function(){V(B(i.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return i._getModules()}}],[{key:"_getModules",value:function(){return[da,ya,ur,xa,Ca,Sa,Da,Ia,Va]}},{key:"_createContainer",value:function(){return dn('<div class="dmn-decision-table-container"></div>')}}]),i}(),e=function(){function t(e){var n=this;a(this,t),this._listeners={},e.on("elements.changed",function(e){e=e.elements;n.elementsChanged(e)}),e.on("element.updateId",function(e){var t=e.element,e=e.newId;n.updateId(t.id,e)})}return l(t,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,i=0;i<n;i++){var r=e[i].id;if(t[r])return;t[r]=!0;var o=this._listeners[r]&&this._listeners[r].length;if(o)for(var s=0;s<o;s++)this._listeners[r][s]&&this._listeners[r][s]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){this._listeners[e]&&(t?-1!==(t=this._listeners[e].indexOf(t))&&this._listeners[e].splice(t,1):this._listeners[e].length=0)}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),t}(),v=(e.$inject=["eventBus"],function(){function e(){a(this,e),this._listeners={}}return l(e,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var i,r=0;r<n.length&&!(i=n[r].callback(t));r++);return i}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e];if(n){for(var i=[],r=0;r<n.length;r++){var o=n[r].callback(t);o&&i.push(o)}if(i.length)return i}}},{key:"onGetComponent",value:function(e,t,n){if(Z(t)&&(n=t,t=1e3),!K(t))throw new Error("priority must be a number");for(var i,r=this._getListeners(e),o={priority:t,callback:n},s=0;i=r[s];s++)if(i.priority<t)return void r.splice(s,0,o);r.push(o)}},{key:"offGetComponent",value:function(e,t){var n,i,r=this._getListeners(e);if(t)for(i=r.length-1;n=r[i];i--)n.callback===t&&r.splice(i,1);else r.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),e}()),Ya=function(){o(i,D);var n=c(i);function i(e){a(this,i);var t,e=(t=n.call(this,e))._injector=e.injector;return t._changeSupport=e.get("changeSupport"),t._components=e.get("components"),t._renderer=e.get("renderer"),t}return l(i,[{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}},{key:"render",value:function(){var e=this._components.getComponents("viewer");return O(1,"div","viewer-container",e&&e.map(function(e,t){return N(2,e,null,t)}),0)}}]),i}(),Ir=function(){function s(e,t,n,i,r){a(this,s);var o=n.container;this._container=o,i.on("renderer.mount",function(){Rs(N(2,Ya,{injector:r}),o)}),i.on("renderer.unmount",function(){Rs(null,o)})}return l(s,[{key:"getContainer",value:function(){return this._container}}]),s}(),Ka=(Ir.$inject=["changeSupport","components","config.renderer","eventBus","injector"],{__init__:["changeSupport","components","renderer"],changeSupport:["type",e],components:["type",v],eventBus:["type",i],renderer:["type",Ir]}),Za=["modules"];function Qa(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}var Ja=function(){function i(){a(this,i);var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.injector;n||(e=(t=this._init(t)).modules,n=function(e,t){e=new In([{config:["value",e]},Ka].concat(t||[]));return e.init(),e}(t.config,e)),this.get=n.get,this.invoke=n.invoke,this.get("eventBus").fire("viewer.init")}return l(i,[{key:"_init",value:function(e){return{modules:e.modules,config:Qa(e,Za)}}},{key:"destroy",value:function(){this.get("eventBus").fire("viewer.destroy")}},{key:"clear",value:function(){this.get("eventBus").fire("viewer.clear")}}]),i}();var Dr=function(){function n(e,t){a(this,n),this._eventBus=t,this._viewer=e}return l(n,[{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"updateId",value:function(e,t){if(e!==this.getDecision())throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}]),n}(),el=(Dr.$inject=["viewer","eventBus"],{__init__:["elementRegistry"],elementRegistry:["type",Dr]}),tl=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t))._viewer=t.injector.get("viewer"),e}return l(i,[{key:"render",value:function(){return O(1,"div","decision-properties",O(1,"h3","decision-name",this._viewer.getDecision().name,0),2)}}]),i}(),_r=l(function e(t){a(this,e),t.onGetComponent("viewer",1500,function(){return tl})}),nl=(_r.$inject=["components"],{__init__:["decisionProperties"],decisionProperties:["type",_r]}),il=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t))._translate=t.injector.get("translate"),e._viewer=t.injector.get("viewer"),e}return l(i,[{key:"render",value:function(){var e=this._viewer.getDecision(),t=e.decisionLogic,e=e.variable;return O(1,"div","literal-expression-properties",O(1,"table",null,[O(1,"tr",null,[O(1,"td",null,this._translate("Variable Name:"),0),O(1,"td",null,O(1,"span",null,e.name||"-",0),2)],4),O(1,"tr",null,[O(1,"td",null,this._translate("Variable Type:"),0),O(1,"td",null,O(1,"span",null,this._translate(e.typeRef)||"-",0),2)],4),O(1,"tr",null,[O(1,"td",null,this._translate("Expression Language:"),0),O(1,"td",null,O(1,"span",null,t.expressionLanguage||"-",0),2)],4)],4),2)}}]),i}(),br=l(function e(t){a(this,e),t.onGetComponent("viewer",500,function(){return il})}),rl=(br.$inject=["components"],{__depends__:[],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",br]});function ol(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var sl=function(){o(r,D);var i=c(r);function r(e,t){a(this,r),ol(s(n=i.call(this,e,t)),"onClick",function(){n._eventBus.fire("poweredBy.show")});var n,e=t.injector;return n._eventBus=e.get("eventBus"),n}return l(r,[{key:"render",value:function(){var t=this;return O(1,"div","powered-by",O(1,"div","powered-by__logo",N(2,za),2),2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(e){return t.node=e})}}]),r}(),al=function(){o(n,D);var t=c(n);function n(e){return a(this,n),(e=t.call(this,e)).state={show:!1},e.onClick=e.onClick.bind(s(e)),e.onShow=e.onShow.bind(s(e)),e}return l(n,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&O(1,"div","powered-by-overlay",O(1,"div","powered-by-overlay-content",[O(1,"a","logo",N(2,za),2,{href:"https://bpmn.io",target:"_blank",rel:"noopener"}),O(1,"span",null,[jo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),O(1,"a",null,jo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),jo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),n}(),To=l(function e(t,n){a(this,e),t.onGetComponent("viewer",2e3,function(){return sl}),t.onGetComponent("viewer",function(){return al})}),ll=(To.$inject=["components","eventBus"],{__init__:["poweredBy"],poweredBy:["type",To]}),cl=function(){o(i,D);var n=c(i);function i(e,t){return a(this,i),(e=n.call(this,e,t))._viewer=t.injector.get("viewer"),e}return l(i,[{key:"render",value:function(){return O(1,"div","textarea",O(1,"div","content",this._viewer.getDecision().decisionLogic.text,0),2)}}]),i}(),e=l(function e(t){a(this,e),t.onGetComponent("viewer",function(){return cl})}),ul=(e.$inject=["components"],{__init__:["textarea"],textarea:["type",e]});function pl(e,t,n){(t=function(e){e=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ue(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var hl=function(){o(r,D);var i=c(r);function r(e,t){a(this,r),pl(s(n=i.call(this,e,t)),"onClick",function(){n._eventBus.fire("showDrd")});var n,e=t.injector;return n._translate=e.get("translate"),n._eventBus=e.get("eventBus"),n}return l(r,[{key:"render",value:function(){var t=this;return O(1,"div","view-drd",O(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),r}(),v=(hl.$inject=["translate"],function(){function o(e,t,n,i){var r=this;a(this,o),this._injector=i,this._viewer=t,e.onGetComponent("viewer",2e3,function(){if(r.canViewDrd())return hl}),n.on("showDrd",function(){var e=i.get("_parent",!1),t=r.getDefinitions(),t=e.getView(t);e.open(t)})}return l(o,[{key:"canViewDrd",value:function(){var e,t=this._injector.get("_parent",!1);if(t)return e=this.getDefinitions(),!!t.getView(e)}},{key:"getDefinitions",value:function(){return this._viewer.getDecision().$parent}}]),o}());v.$inject=["components","viewer","eventBus","injector"];var fl={__init__:["viewDrd"],viewDrd:["type",v]},dl=["modules","additionalModules"];function ml(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}var yl=function(){o(i,Ja);var n=c(i);function i(){a(this,i);var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=i._createContainer(),e=n.call(this,w(e,{renderer:{container:t}}));return e._container=t,e}return l(i,[{key:"open",value:function(i){var r=this;return new Promise(function(e,t){var n;try{r._decision&&(r.clear(),r.get("eventBus").fire("renderer.unmount")),r._decision=i,r.get("eventBus").fire("import",i),r.get("eventBus").fire("renderer.mount")}catch(e){n=e}n?(n.warnings=n.warnings||[],t(n)):e({warnings:[]})})}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,e=ml(e,dl),t=t||this.getModules(),n=n||[],i=[{viewer:["value",this]}];return{modules:[].concat(p(t),p(n),i),config:e}}},{key:"on",value:function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"getDecision",value:function(){return this._decision}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),yn(e))}},{key:"destroy",value:function(){V(B(i.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return i._getModules()}}],[{key:"_getModules",value:function(){return[el,ur,nl,rl,ll,ul,fl]}},{key:"_createContainer",value:function(){return dn('<div class="dmn-literal-expression-container"></div>')}}]),i}();return function(){o(t,xn);var e=c(t);function t(){return a(this,t),e.apply(this,arguments)}return l(t,[{key:"_getViewProviders",value:function(){return[{id:"drd",constructor:lo,opens:function(e){return k(e,"dmn:Definitions")&&(e=e).dmnDI&&e.dmnDI.diagrams&&e.dmnDI.diagrams[0]}},{id:"decisionTable",constructor:Xa,opens:function(e){return k(e,"dmn:Decision")&&k(e.decisionLogic,"dmn:DecisionTable")}},{id:"literalExpression",constructor:yl,opens:function(e){return k(e,"dmn:Decision")&&k(e.decisionLogic,"dmn:LiteralExpression")}}]}}]),t}()});
