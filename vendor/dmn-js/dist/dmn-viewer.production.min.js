/*! dmn-js - dmn-viewer v14.0.2 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).DmnJS=t()}(this,function(){"use strict";function A(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach(function(e){T(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function l(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e,t,n){return(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=L(n),t=(e=r?(e=L(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}}function z(){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?U(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}var G=Object.prototype.toString,W=Object.prototype.hasOwnProperty;function K(e){return void 0!==e}function X(e){return"[object Array]"===G.call(e)}function Y(e){return"[object Object]"===G.call(e)}function Q(e){return"[object Number]"===G.call(e)}function Z(e){e=G.call(e);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}function J(e){return"[object String]"===G.call(e)}function ee(e,n){var t,r;return n=Z(t=n)?t:function(e){return e===t},g(e,function(e,t){if(n(e,t))return r=e,!1}),r}function te(e,n){var r=[];return g(e,function(e,t){n(e,t)&&r.push(e)}),r}function g(e,t){if(void 0!==e){var n,r,i=X(e)?ae:oe;for(n in e)if(r=n,W.call(e,r)&&!1===t(e[n],i(n)))return}}function ne(e,n,r){return g(e,function(e,t){r=n(r,e,t)}),r}function re(e,r){return!!ne(e,function(e,t,n){return e&&r(t,n)},!0)}function ie(e){return function(n){return re(e,function(e,t){return n[t]===e})}}function oe(e){return e}function ae(e){return Number(e)}function se(n,r){var i,o,a,s;function t(e){var t=Date.now(),e=e?0:s+r-t;if(0<e)return l(e);n.apply(a,o),c()}function l(e){i=setTimeout(t,e)}function c(){i&&clearTimeout(i),i=s=o=a=void 0}function e(){s=Date.now();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=t,a=this,i||l(r)}return e.flush=function(){i&&t(!0),c()},e.cancel=c,e}function le(e,t){return e.bind(t)}function w(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))}var ce="__fn",ue=Array.prototype.slice;function r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function pe(){}r.prototype.on=function(e,t,n,r){if(e=X(e)?e:[e],Z(t)&&(r=n,n=t,t=1e3),!Q(t))throw new Error("priority must be a number");var i=n,o=(r&&((i=le(n,r))[ce]=n[ce]||n),this);e.forEach(function(e){o._addListener(e,{priority:t,callback:i,next:null})})},r.prototype.once=function(t,e,n,r){var i=this;if(Z(e)&&(r=n,n=e,e=1e3),!Q(e))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var e=n.apply(r,arguments);return i.off(t,o),e}o[ce]=n,this.on(t,e,o)},r.prototype.off=function(e,t){e=X(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},r.prototype.createEvent=function(e){var t=new pe;return t.init(e),t},r.prototype.fire=function(e,t){var n,r,i=ue.call(arguments);if(!(e="object"===m(e)?(t=e).type:e))throw new Error("no event type specified");if(n=this._listeners[e]){var t=t instanceof pe?t:this.createEvent(t),o=(i[0]=t).type;e!==o&&(t.type=e);try{r=this._invokeListeners(t,i,n)}finally{e!==o&&(t.type=o)}return r=void 0===r&&t.defaultPrevented?!1:r}},r.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},r.prototype._destroy=function(){this._listeners={}},r.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r},r.prototype._invokeListener=function(e,t,n){var r,i,o;if(!n.callback.__isTomb)try{i=n.callback,o=t,void 0!==(r=i.apply(null,o))&&(e.returnValue=r,e.stopPropagation()),!1===r&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return r},r.prototype._addListener=function(e,t){var n,r=this._getListeners(e);if(r){for(;r;){if(r.priority<t.priority)return t.next=r,void(n?n.next=t:this._setListeners(e,t));r=(n=r).next}n.next=t}else this._setListeners(e,t)},r.prototype._getListeners=function(e){return this._listeners[e]},r.prototype._setListeners=function(e,t){this._listeners[e]=t},r.prototype._removeListener=function(e,t){var n,r,i,o=this._getListeners(e);if(t)for(;o;)n=o.next,(i=o.callback)!==t&&i[ce]!==t||(r?r.next=n:this._setListeners(e,n)),r=o,o=n;else this._setListeners(e,null)},pe.prototype.stopPropagation=function(){this.cancelBubble=!0},pe.prototype.preventDefault=function(){this.defaultPrevented=!0},pe.prototype.init=function(e){w(this,e||{})};var fe=Object.prototype.toString;function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function he(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return de.apply(void 0,[e].concat(n))}var me=Object.prototype.toString,ye=Object.prototype.hasOwnProperty;function ve(e){return"[object String]"===me.call(e)}function ge(e,t){if(void 0!==e){var n,r,i="[object Array]"===me.call(e)?we:be;for(n in e)if(r=n,ye.call(e,r)&&!1===t(e[n],i(n)))return}}function be(e){return e}function we(e){return Number(e)}function _e(e,t){return e.bind(t)}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ke(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xe.apply(void 0,[e].concat(n))}function Ee(){}function Ce(e,t){this.model=e,this.properties=t}Ee.prototype.get=function(e){return this.$model.properties.get(this,e)},Ee.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},Ce.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Ee.prototype),i=(ge(e.properties,function(e){e.isMany||void 0===e.default||(r[e.name]=e.default)}),n.defineModel(r,t),n.defineDescriptor(r,e),e.ns.name);function o(e){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ge(e,_e(function(e,t){this.set(t,e)},this))}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var Oe={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Se={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function je(e,t){e=Se[e];return e?e(t):t}function Ne(e){return Oe[e]}function Me(e){return Se[e]}function u(e,t){var n,r,i=e.split(/:/);if(1===i.length)n=e,r=t;else{if(2!==i.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=i[1],r=i[0]}return{name:e=(r?r+":":"")+n,prefix:r,localName:n}}function De(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Pe(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ge(e,_e(this.registerPackage,this))}function Re(e,t,n){t=t[n];if(t in e)throw new Error("package with "+n+" <"+t+"> already defined")}function Ae(e){this.model=e}function Be(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Ie(e){this.properties=new Ae(this),this.factory=new Ce(this,this.properties),this.registry=new Pe(e,this.properties),this.typeCache={}}De.prototype.build=function(){return t=this,e=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],n={},r=Object(t),ge(e,function(e){e in r&&(n[e]=t[e])}),n;var t,e,n,r},De.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);n=this.properties;void 0!==t?n.splice(t,0,e):n.push(e)},De.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}e=i.indexOf(e);if(-1===e)throw new Error("property <"+r.name+"> not found in property list");i.splice(e,1),this.addProperty(t,n?void 0:e,a),o[r.name]=o[r.localName]=t},De.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,t=t.split("#"),r=u(t[0],r),t=u(t[1],r.prefix).name,r=this.propertiesByName[t];if(!r)throw new Error("refined property <"+t+"> not found");this.replaceProperty(r,e,n),delete e.redefines},De.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e},De.prototype.removeNamedProperty=function(e){var e=e.ns,t=this.propertiesByName;delete t[e.name],delete t[e.localName]},De.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},De.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},De.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},De.prototype.hasProperty=function(e){return this.propertiesByName[e]},De.prototype.addTrait=function(r,i){var e=this.allTypesByName,t=this.allTypes,n=r.name;n in e||(ge(r.properties,_e(function(e){e=ke({},e,{name:e.ns.localName,inherited:i}),Object.defineProperty(e,"definedBy",{value:r});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this)),t.push(r),e[n]=r)},Pe.prototype.getPackage=function(e){return this.packageMap[e]},Pe.prototype.getPackages=function(){return this.packages},Pe.prototype.registerPackage=function(t){t=ke({},t);var e=this.packageMap;Re(e,t,"prefix"),Re(e,t,"uri"),ge(t.types,_e(function(e){this.registerType(e,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},Pe.prototype.registerType=function(e,t){var r=u((e=ke({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:ke(e.meta||{})})).name,t.prefix),n=r.name,i={};ge(e.properties,_e(function(e){var t=u(e.name,r.prefix),n=t.name;Ne(e.type)||(e.type=u(e.type,t.prefix).name),ke(e,{ns:t,name:n}),i[n]=e},this)),ke(e,{ns:r,name:n,propertiesByName:i}),ge(e.extends,_e(function(e){e=this.typeMap[e];e.traits=e.traits||[],e.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e},Pe.prototype.mapTypes=function(n,r,e){var t=Ne(n.name)?{name:n.name}:this.typeMap[n.name],i=this;function o(e){return a(e,!0)}function a(e,t){e=u(e,Oe[e]?"":n.prefix);i.mapTypes(e,r,t)}if(!t)throw new Error("unknown type <"+n.name+">");ge(t.superClass,e?o:a),r(t,!e),ge(t.traits,o)},Pe.prototype.getEffectiveDescriptor=function(e){var e=u(e),n=new De(e),e=(this.mapTypes(e,function(e,t){n.addTrait(e,t)}),n.build());return this.definePackage(e,e.allTypes[e.allTypes.length-1].$pkg),e},Pe.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},Ae.prototype.set=function(e,t,n){if(!ve(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.model.getPropertyDescriptor(e,t),i=r&&r.name;void 0===n?r?delete e[i]:delete e.$attrs[t]:r?i in e?e[i]=n:Be(e,r,n):e.$attrs[t]=n},Ae.prototype.get=function(e,t){var n,r=this.model.getPropertyDescriptor(e,t);return r?(!e[n=r.name]&&r.isMany&&Be(e,r,[]),e[n]):e.$attrs[t]},Ae.prototype.define=function(e,t,n){var r;n.writable||(r=n.value,delete(n=ke({},n,{get:function(){return r}})).value),Object.defineProperty(e,t,n)},Ae.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Ae.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},Ie.prototype.create=function(e,t){var n=this.getType(e);if(n)return new n(t);throw new Error("unknown type <"+e+">")},Ie.prototype.getType=function(e){var t=this.typeCache,n=ve(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r},Ie.prototype.createAny=function(e,t,n){var r=u(e),i={$type:e,$instanceOf:function(e){return e===this.$type}},e={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,e),this.properties.defineModel(i,this),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),ge(n,function(e,t){"[object Object]"===me.call(e)&&void 0!==e.value?i[e.name]=e.value:i[t]=e}),i},Ie.prototype.getPackage=function(e){return this.registry.getPackage(e)},Ie.prototype.getPackages=function(){return this.registry.getPackages()},Ie.prototype.getElementDescriptor=function(e){return e.$descriptor},Ie.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},Ie.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Ie.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Te=Object.prototype.toString,Le=Object.prototype.hasOwnProperty;function $e(e){return"[object Array]"===Te.call(e)}function Ve(e){return"[object String]"===Te.call(e)}function ze(e,t){return Le.call(e,t)}function Ue(e,n){var r;return n=Ge(n),f(e,function(e,t){if(n(e,t))return r=e,!1}),r}function Fe(e,n){var r=[];return f(e,function(e,t){n(e,t)&&r.push(e)}),r}function f(e,t){if(void 0!==e){var n,r=$e(e)?qe:We;for(n in e)if(ze(e,n)&&!1===t(e[n],r(n)))return}}function Ge(t){return e=t,"[object Function]"===(e=Te.call(e))||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e?t:function(e){return e===t};var e}function We(e){return e}function qe(e){return Number(e)}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ke(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return He.apply(void 0,[e].concat(n))}var Xe=String.fromCharCode,Ye=Object.prototype.hasOwnProperty,Qe=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Ze={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function Je(e,t,n,r){return r?Ye.call(Ze,r)?Ze[r]:"&"+r+";":Xe(t||parseInt(n,16))}function et(e){return 3<e.length&&-1!==e.indexOf("&")?e.replace(Qe,Je):e}Object.keys(Ze).forEach(function(e){Ze[e.toUpperCase()]=Ze[e]});var tt="xsi:type",nt="non-whitespace outside of root node";function rt(e){return new Error(e)}function it(e){return"missing namespace for prefix <"+e+">"}function ot(e){return{get:e,enumerable:!0}}function at(e){return e+"$uri"}function st(){return{line:0,column:0}}function lt(e){throw e}function ct(e){if(!this)return new ct(e);var k,E,C,O,n,S,j,N,M,D=e&&e.proxy,r=lt,P=st,R=!1,A=!1,t=null,B=!1;function I(e){e instanceof Error||(e=rt(e)),r(t=e,P)}function T(e){n&&(e instanceof Error||(e=rt(e)),n(e,P))}this.on=function(e,t){if("function"!=typeof t)throw rt("required args <name, cb>");switch(e){case"openTag":E=t;break;case"text":k=t;break;case"closeTag":C=t;break;case"error":r=t;break;case"warn":n=t;break;case"cdata":O=t;break;case"attention":N=t;break;case"question":j=t;break;case"comment":S=t;break;default:throw rt("unsupported event: "+e)}return this},this.ns=function(e){if("object"!==m(e=void 0===e?{}:e))throw rt("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n["http://www.w3.org/2001/XMLSchema-instance"]="xsi",A=!0,M=n,this},this.parse=function(e){if("string"!=typeof e)throw rt("required args <xml=string>");return t=null,function(a){var e,t,n,r,i,o,s,l,c,u,g,p=A?[]:null,b=A?function(e){var t,n,r={};for(t in e)r[n=e[t]]=n,r[at(n)]=t;return r}(M):null,f=[],w=0,d=!1,h=!1,m=0,y=0,_="",x=0;function v(){if(null!==g)return g;var e,t,n,r,i,o,a,s,l,c,u,p=A&&b.xmlns,f=A&&R?[]:null,d=x,h=_,m=h.length,y={},v={};e:for(;d<m;d++)if(l=!1,!(32===(c=h.charCodeAt(d))||c<14&&8<c)){for((c<65||122<c||90<c&&c<97)&&95!==c&&58!==c&&(T("illegal first char attribute name"),l=!0),u=d+1;u<m;u++)if(!(96<(c=h.charCodeAt(u))&&c<123||64<c&&c<91||47<c&&c<59||46===c||45===c||95===c)){if(32===c||c<14&&8<c){T("missing attribute value"),d=u;continue e}if(61===c)break;T("illegal attribute name char"),l=!0}if("xmlns:xmlns"===(s=h.substring(d,u))&&(T("illegal declaration of xmlns"),l=!0),34===(c=h.charCodeAt(u+1)))-1===(u=h.indexOf('"',d=u+2))&&-1!==(u=h.indexOf("'",d))&&(T("attribute value quote missmatch"),l=!0);else if(39===c)-1===(u=h.indexOf("'",d=u+2))&&-1!==(u=h.indexOf('"',d))&&(T("attribute value quote missmatch"),l=!0);else for(T("missing attribute value quotes"),l=!0,u+=1;u<m&&!(32===(c=h.charCodeAt(u+1))||c<14&&8<c);u++);for(-1===u&&(T("missing closing quotes"),u=m,l=!0),l||(o=h.substring(d,u)),d=u;u+1<m&&!(32===(c=h.charCodeAt(u+1))||c<14&&8<c);u++)d===u&&(T("illegal character after attribute end"),l=!0);if(d=u+1,!l)if(s in v)T("attribute <"+s+"> already defined");else if(v[s]=!0,A)if(R)if(null!==(i="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=et(o),t=at(i),!(a=M[e])){if("xmlns"===i||t in b&&b[t]!==e)for(;a="ns"+w++,void 0!==b[a];);else a=i;M[e]=a}b[i]!==a&&(r||(b=function(e){var t,n={};for(t in e)n[t]=e[t];return n}(b),r=!0),b[i]=a,"xmlns"===i&&(b[at(a)]=e,p=a),b[t]=e),y[s]=o}else f.push(s,o);else-1===(c=s.indexOf(":"))?y[s]=o:(n=b[s.substring(0,c)])?((s=p===n?s.substr(c+1):n+s.substr(c))===tt&&(o=-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),(n=b[n]||n)+o.substring(c)):p+":"+o),y[s]=o):T(it(s.substring(0,c)));else y[s]=o}if(R)for(d=0,m=f.length;d<m;d++){if(s=f[d++],o=f[d],-1!==(c=s.indexOf(":"))){if(!(n=b[s.substring(0,c)])){T(it(s.substring(0,c)));continue}(s=p===n?s.substr(c+1):n+s.substr(c))===tt&&(o=-1!==(c=o.indexOf(":"))?(n=o.substring(0,c),(n=b[n]||n)+o.substring(c)):p+":"+o)}y[s]=o}return g=y}P=function(){for(var e,t=/(\r\n|\r|\n)/g,n=0,r=0,i=0,o=y;i<=m&&(e=t.exec(a))&&(o=e[0].length+e.index,!(m<o));)n+=1,i=o;return{data:-1==m?(r=o,a.substring(y)):0===y?a.substring(y,m):(r=m-i,-1==y?a.substring(m):a.substring(m,y+1)),line:n,column:r}},D&&(u=Object.create({},{name:ot(function(){return l}),originalName:ot(function(){return c}),attrs:ot(v),ns:ot(function(){return b})}));for(;-1!==y;){if(-1===(m=60===a.charCodeAt(y)?y:a.indexOf("<",y)))return f.length?I("unexpected end of file"):0===y?I("missing start tag"):y<a.length&&a.substring(y).trim()&&T(nt);if(y!==m)if(f.length){if(k&&(k(a.substring(y,m),et,P),B))return}else if(a.substring(y,m).trim()&&(T(nt),B))return;if(33===(i=a.charCodeAt(m+1))){if(91===(r=a.charCodeAt(m+2))&&"CDATA["===a.substr(m+3,6)){if(-1===(y=a.indexOf("]]>",m)))return I("unclosed cdata");if(O&&(O(a.substring(m+9,y),P),B))return;y+=3;continue}if(45===r&&45===a.charCodeAt(m+3)){if(-1===(y=a.indexOf("--\x3e",m)))return I("unclosed comment");if(S&&(S(a.substring(m+4,y),et,P),B))return;y+=3;continue}}if(63===i){if(-1===(y=a.indexOf("?>",m)))return I("unclosed question");if(j&&(j(a.substring(m,y+2),P),B))return;y+=2}else{for(t=m+1;;t++){if(o=a.charCodeAt(t),isNaN(o))return y=-1,I("unclosed tag");if(34===o)r=a.indexOf('"',t+1),t=-1!==r?r:t;else if(39===o)r=a.indexOf("'",t+1),t=-1!==r?r:t;else if(62===o){y=t;break}}if(33===i){if(N&&(N(a.substring(m,y+1),et,P),B))return}else{if(g={},47===i){if(h=!(d=!1),!f.length)return I("missing open tag");if(t=l=f.pop(),r=m+2+t.length,a.substring(m+2,r)!==t)return I("closing tag mismatch");for(;r<y;r++)if(!(32===(i=a.charCodeAt(r))||8<i&&i<14))return I("close tag")}else{if(h=47===a.charCodeAt(y-1)?(t=l=a.substring(m+1,y-1),d=!0):(t=l=a.substring(m+1,y),!(d=!0)),!(96<i&&i<123||64<i&&i<91||95===i||58===i))return I("illegal first char nodeName");for(r=1,n=t.length;r<n;r++)if(!(96<(i=t.charCodeAt(r))&&i<123||64<i&&i<91||47<i&&i<59||45===i||95===i||46==i)){if(32===i||i<14&&8<i){l=t.substring(0,r),g=null;break}return I("invalid nodeName")}h||f.push(l)}if(A){if(e=b,d&&(h||p.push(e),null===g)&&(R=-1!==t.indexOf("xmlns",r))&&(x=r,_=t,v(),R=!1),-1!==(i=(c=l).indexOf(":"))){if(!(s=b[l.substring(0,i)]))return I("missing namespace on <"+c+">");l=l.substr(i+1)}else s=b.xmlns;s&&(l=s+":"+l)}if(d&&(x=r,_=t,E)&&(D?E(u,et,h,P):E(l,v,et,h,P),B))return;if(h){if(C&&(C(D?u:l,et,d,P),B))return;A&&(b=d?e:p.pop())}}y+=1}}}(e),P=st,B=!1,t},this.stop=function(){B=!0}}function ut(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var pt={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},ft="xsi:type";function dt(e){return e.xml&&e.xml.serialize}function ht(e){return dt(e)===ft}function mt(e,t){return ut(t)?e.prefix+":"+((t=e.localName).charAt(0).toUpperCase()+t.slice(1)):e.name}function yt(e){return new Error(e)}function vt(e){return e.$descriptor}function gt(e){Ke(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw yt("expected element");var t=this.elementsById,n=vt(e).idProperty;if(n&&(n=e.get(n.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(n))throw new Error("illegal ID <"+n+">");if(t[n])throw yt("duplicate ID <"+n+">");t[n]=e}},this.addWarning=function(e){this.warnings.push(e)}}function bt(){}function wt(){}function _t(){}function xt(e,t){this.property=e,this.context=t}function kt(e,t){this.element=t,this.propertyDesc=e}function Et(){}function d(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function Ct(e,t,n){d.call(this,e,t,n)}function Ot(e,t,n){this.model=e,this.context=n}function St(e){Ke(this,{lax:!1},e=e instanceof Ie?{model:e}:e)}bt.prototype.handleEnd=function(){},bt.prototype.handleText=function(){},bt.prototype.handleNode=function(){},(wt.prototype=Object.create(bt.prototype)).handleNode=function(){return this},(_t.prototype=Object.create(bt.prototype)).handleText=function(e){this.body=(this.body||"")+e},(xt.prototype=Object.create(_t.prototype)).handleNode=function(e){if(this.element)throw yt("expected no sub nodes");return this.element=this.createReference(e),this},xt.prototype.handleEnd=function(){this.element.id=this.body},xt.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(kt.prototype=Object.create(_t.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc,e=je(n.type,e);n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(Et.prototype=Object.create(_t.prototype)).handleNode=function(e){var t=this;return this.element?t=this.handleChild(e):(e=this.element=this.createElement(e),this.context.addElement(e)),t},(d.prototype=Object.create(Et.prototype)).addReference=function(e){this.context.addReference(e)},d.prototype.handleText=function(e){if(!vt(this.element).bodyProperty)throw yt("unexpected body text <"+e+">");_t.prototype.handleText.call(this,e)},d.prototype.handleEnd=function(){var e=this.body,t=this.element,n=vt(t).bodyProperty;n&&void 0!==e&&(e=je(n.type,e),t.set(n.name,e))},d.prototype.createElement=function(e){var r,e=e.attributes,t=this.type,i=vt(t),o=this.context,a=new t({}),s=this.model;return f(e,function(e,t){var n=i.propertiesByName[t];n&&n.isReference?n.isMany?f(e.split(" "),function(e){o.addReference({element:a,property:n.ns.name,id:e})}):o.addReference({element:a,property:n.ns.name,id:e}):(n?e=je(n.type,e):"xmlns"!==t&&(r=u(t,i.ns.prefix),s.getPackage(r.prefix))&&o.addWarning({message:"unknown attribute <"+t+">",element:a,property:t,value:e}),a.set(t,e))}),a},d.prototype.getPropertyForNode=function(e){var t,n,r,i,o=u(e.name),a=this.type,s=this.model,a=vt(a),l=o.name,l=a.propertiesByName[l];if(l&&!l.isAttr)return ht(l)&&(t=e.attributes[ft])?(e=s,c=u(c=t),e=e=e.getPackage(c.prefix),r=(c=c).name,i=c.localName,t=(e=e.xml&&e.xml.typePrefix)&&0===i.indexOf(e)?c.prefix+":"+i.slice(e.length):r,Ke({},l,{effectiveType:vt(n=s.getType(t)).name})):l;var c=s.getPackage(o.prefix);if(c){if(t=mt(o,c),n=s.getType(t),l=Ue(a.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return Ke({},l,{effectiveType:vt(n).name})}else if(l=Ue(a.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return l;throw yt("unrecognized element <"+o.name+">")},d.prototype.toString=function(){return"ElementDescriptor["+vt(this.type).name+"]"},d.prototype.valueHandler=function(e,t){return new kt(e,t)},d.prototype.referenceHandler=function(e){return new xt(e,this.context)},d.prototype.handler=function(e){return new("Element"===e?Ot:d)(this.model,e,this.context)},d.prototype.handleChild=function(e){var t=this.getPropertyForNode(e),n=this.element,r=t.effectiveType||t.type;return Se[r]?this.valueHandler(t,n):(void 0!==(e=(r=(t.isReference?this.referenceHandler(t):this.handler(r)).handleNode(e)).element)&&(t.isMany?n.get(t.name).push(e):n.set(t.name,e),t.isReference?(Ke(e,{element:n}),this.context.addReference(e)):e.$parent=n),r)},(Ct.prototype=Object.create(d.prototype)).createElement=function(e){var t=e.name,n=u(t),r=this.model,i=this.type,r=r.getPackage(n.prefix),n=r&&mt(n,r)||t;if(i.hasType(n))return d.prototype.createElement.call(this,e);throw yt("unexpected element <"+e.originalName+">")},(Ot.prototype=Object.create(Et.prototype)).createElement=function(e){var t=e.name,n=u(t).prefix,n=e.ns[n+"$uri"],e=e.attributes;return this.model.createAny(t,n,e)},Ot.prototype.handleChild=function(e){var e=new Ot(this.model,0,this.context).handleNode(e),t=this.element,n=e.element;return void 0!==n&&((t.$children=t.$children||[]).push(n),n.$parent=t),e},Ot.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},St.prototype.fromXML=function(m,e,t){var y=e.rootHandler,n=(e instanceof d?(y=e,e={}):"string"==typeof e?(y=this.handler(e),e={}):"string"==typeof y&&(y=this.handler(y)),this.model),a=this.lax,v=new gt(Ke({},e,{rootHandler:y})),g=new ct({proxy:!0}),s=(e=[],Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e);function l(e,t,n){var t=t(),r=t.line,i=t.column,t=t.data,t="unparsable content "+((t="<"===t.charAt(0)&&-1!==t.indexOf(" ")?t.slice(0,t.indexOf(" "))+">":t)?t+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+i+"\n\tnested error: "+e.message;if(n)return v.addWarning({message:t,error:e}),!0;throw yt(t)}function r(e,t){return l(e,t,!0)}y.context=v,s.push(y);var i=/^<\?xml /i,o=/ encoding="([^"]+)"/i,c=/^utf-8$/i;function u(e,t){try{s.peek().handleText(e)}catch(e){r(e,t)}}e=n.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{"http://www.w3.org/XML/1998/namespace":"xml"});return g.ns(e).on("openTag",function(t,r,e,n){var i=t.attrs||{},o=Object.keys(i).reduce(function(e,t){var n=r(i[t]);return e[t]=n,e},{}),o={name:t.name,originalName:t.originalName,attributes:o,ns:t.ns},t=n,n=s.peek();try{s.push(n.handleNode(o))}catch(e){l(e,t,a)&&s.push(new wt)}}).on("question",function(e){i.test(e)&&(e=(e=o.exec(e))&&e[1])&&!c.test(e)&&v.addWarning({message:"unsupported document encoding <"+e+">, falling back to UTF-8"})}).on("closeTag",function(){s.pop().handleEnd()}).on("cdata",u).on("text",function(e,t,n){t=t(e),e=n,t.trim()&&u(t,e)}).on("error",l).on("warn",r),new Promise(function(e,t){var n;try{g.parse(m);for(var r=v.elementsById,i=v.references,o=0;s=i[o];o++){var a,s,l=s.element,c=r[s.id],u=vt(l).propertiesByName[s.property];c||v.addWarning({message:"unresolved reference <"+s.id+">",element:s.element,property:s.property,value:s.id}),u.isMany?(-1===(s=(a=l.get(u.name)).indexOf(s))&&(s=a.length),c?a[s]=c:a.splice(s,1)):l.set(u.name,c)}}catch(e){n=e}var p=y.element,f=(n||p||(n=yt("failed to parse document as <"+y.type.$descriptor.name+">")),v.warnings),d=v.references,h=v.elementsById;return n?(n.warnings=f,t(n)):e({rootElement:p,elementsById:h,references:d,warnings:f})})},St.prototype.handler=function(e){return new Ct(this.model,e)};var jt=/<|>|'|"|&|\n\r|\n/g,Nt=/<|>|&/g;function Mt(r){var n={},i={},o={},a=[],s=[];this.byUri=function(e){return i[e]||r&&r.byUri(e)},this.add=function(e,t){i[e.uri]=e,(t?a:s).push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return n[e||"xmlns"]},this.mapPrefix=function(e,t){n[e||"xmlns"]=t},this.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},this.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);o[n]=this.byUri(t),r&&r.logUsed(e)},this.getUsed=function(e){var t=this;return[].concat(a,s).filter(function(e){return e=t.getNSKey(e),o[e]})}}function Dt(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Pt(e){return Ve(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Rt(e,t){return t.isGeneric?Ke({localName:t.ns.localName},e):Ke({localName:(n=t.ns.localName,ut(t=t.$pkg)?(t=n).charAt(0).toLowerCase()+t.slice(1):n)},e);var n}var At={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Bt={"<":"lt",">":"gt","&":"amp"};function It(e,t,n){return(e=Ve(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function Tt(e){this.tagName=e}function Lt(){}function $t(e){this.tagName=e}function h(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Vt(e,t){h.call(this,e,t)}function zt(){this.value="",this.write=function(e){this.value+=e}}function Ut(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Ft(i){return i=Ke({format:!1,preamble:!0},i||{}),{toXML:function(e,t){var n=t||new zt,r=new Ut(n,i.format);if(i.preamble&&r.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new h).build(e).serializeTo(r),!t)return n.value}}}function Gt(e,t){Ie.call(this,e,t)}Tt.prototype.build=function(e){return this.element=e,this},Tt.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Lt.prototype.serializeValue=Lt.prototype.serializeTo=function(e){e.append(this.escape?It(this.value,Nt,Bt):this.value)},Lt.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(Nt)&&(this.escape=!0),this},Dt($t,Lt),$t.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},h.prototype.build=function(e){var n,t=(this.element=e).$descriptor,r=this.propertyDescriptor,i=t.isGeneric,o=i?this.parseGeneric(e):this.parseNsAttributes(e);return this.ns=r?this.nsPropertyTagName(r):this.nsTagName(t),this.tagName=this.addTagName(this.ns),i||(r=Fe((n=e).$descriptor.properties,function(e){var t=e.name;return!e.isVirtual&&ze(n,t)&&(t=n[t])!==e.default?null!==t&&(!e.isMany||t.length):void 0}),this.parseAttributes(Fe(r,function(e){return e.isAttr})),this.parseContainments(Fe(r,function(e){return!e.isAttr}))),this.parseGenericAttributes(e,o),this},h.prototype.nsTagName=function(e){return Rt(this.logNamespaceUsed(e.ns),e)},h.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Ke({localName:e.ns.localName},t)},h.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},h.prototype.nsAttributeName=function(e){var t=Ve(e)?u(e):e.ns;return e.inherited||(e=this.logNamespaceUsed(t),this.getNamespaces().logUsed(e),this.isLocalNs(e))?{localName:t.localName}:Ke({localName:t.localName},e)},h.prototype.parseGeneric=function(n){var r=this,i=this.body,o=[];return f(n,function(e,t){"$body"===t?i.push((new Lt).build({type:"String"},e)):"$children"===t?f(e,function(e){i.push(new h(r).build(e))}):0!==t.indexOf("$")&&r.parseNsAttribute(n,t,e)&&o.push({name:t,value:e})}),o},h.prototype.parseNsAttribute=function(e,t,n){var r,e=e.$model,i=u(t);if("xmlns"===i.prefix&&(r={prefix:i.localName,uri:n}),!(r=i.prefix||"xmlns"!==i.localName?r:{uri:n}))return{name:t,value:n};e&&e.getPackage(n)?this.logNamespace(r,!0,!0):(i=this.logNamespaceUsed(r,!0),this.getNamespaces().logUsed(i))},h.prototype.parseNsAttributes=function(n,e){var r=this,t=n.$attrs,i=[];return f(t,function(e,t){t=r.parseNsAttribute(n,t,e);t&&i.push(t)}),i},h.prototype.parseGenericAttributes=function(n,e){var r=this;f(e,function(t){if(t.name!==ft)try{r.addAttribute(r.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},h.prototype.parseContainments=function(e){var o=this,a=this.body,s=this.element;f(e,function(n){var r,i,e=s.get(n.name),t=n.isReference;n.isMany||(e=[e]),n.isBody?a.push((new Lt).build(n,e[0])):Me(n.type)?f(e,function(e){a.push(new $t(o.addTagName(o.nsPropertyTagName(n))).build(n,e))}):t?f(e,function(e){a.push(new Tt(o.addTagName(o.nsPropertyTagName(n))).build(e))}):(r=ht(n),i="property"===dt(n),f(e,function(e){var t=r?new Vt(o,n):i?new h(o,n):new h(o);a.push(t.build(e))}))})},h.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent;return t||(n=n&&n.getNamespaces(),e||!n?this.namespaces=t=new Mt(n):t=n),t},h.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix;return r.byUri(i)&&!n||r.add(e,t),r.mapPrefix(o,i),e},h.prototype.logNamespaceUsed=function(e,t){var n,r,i=this.element.$model,o=this.getNamespaces(t),a=e.prefix,t=e.uri;if(!a&&!t)return{localName:e.localName};if(i=pt[a]||i&&(i.getPackage(a)||{}).uri,!(t=t||i||o.uriByPrefix(a)))throw new Error("no namespace uri given for prefix <"+a+">");if(!(e=o.byUri(t))){for(n=a,r=1;o.uriByPrefix(n);)n=a+"_"+r++;e=this.logNamespace({prefix:n,uri:t},i===t)}return a&&o.mapPrefix(a,t),e},h.prototype.parseAttributes=function(e){var r=this,i=this.element;f(e,function(e){var t,n=i.get(e.name);e.isReference&&(n=e.isMany?(t=[],f(n,function(e){t.push(e.id)}),t.join(" ")):n.id),r.addAttribute(r.nsAttributeName(e),n)})},h.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Pt(e)},h.prototype.addAttribute=function(t,e){var n,r,i=this.attrs,o=(Ve(e)&&(e=It(e,jt,At)),o=i,n=Ge(n=function(e){return e.name.localName===t.localName&&e.name.uri===t.uri&&e.name.prefix===t.prefix}),r=$e(o)?-1:void 0,f(o,function(e,t){if(n(e,t))return r=t,!1}),r),e={name:t,value:e};-1!==o?i.splice(o,1,e):i.push(e)},h.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;f(e=n?n.getUsed().filter(function(e){return"xml"!==e.prefix}).map(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}).concat(e):e,function(e){t.append(" ").append(Pt(e.name)).append('="').append(e.value).append('"')})},h.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==Lt;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),f(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},Dt(Vt,h),Vt.prototype.parseNsAttributes=function(e){var t,n=h.prototype.parseNsAttributes.call(this,e),r=e.$descriptor;return r.name!==this.propertyDescriptor.type&&(t=this.typeNs=this.nsTagName(r),this.getNamespaces().logUsed(this.typeNs),e=(e=e.$model.getPackage(t.uri)).xml&&e.xml.typePrefix||"",this.addAttribute(this.nsAttributeName(ft),(t.prefix?t.prefix+":":"")+e+r.ns.localName)),n},Vt.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},(Gt.prototype=Object.create(Ie.prototype)).fromXML=function(e,t,n){r=t,"[object String]"!==fe.call(r)&&(n=t,t="dmn:Definitions");var r=new St(he({model:this,lax:!0},n)),n=r.handler(t);return r.fromXML(e,n)},Gt.prototype.toXML=function(n,e){var r=new Ft(e);return new Promise(function(e,t){try{return e({xml:r.toXML(n)})}catch(e){return t(e)}})};var Wt={dc:{name:"DC",prefix:"dc",uri:"http://www.omg.org/spec/DMN/20180521/DC/",types:[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],associations:[],enumerations:[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}]},di:{name:"DI",prefix:"di",uri:"http://www.omg.org/spec/DMN/20180521/DI/",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],enumerations:[],xml:{tagAlias:"lowerCase"}},dmn:{name:"DMN",prefix:"dmn",uri:"https://www.omg.org/spec/DMN/20191111/MODEL/",types:[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],enumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],associations:[],xml:{tagAlias:"lowerCase"}},dmndi:{name:"DMNDI",prefix:"dmndi",uri:"https://www.omg.org/spec/DMN/20191111/DMNDI/",types:[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],associations:[],enumerations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/2.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}]}};function qt(e,t){return new Gt(he({},Wt,e),t)}function Ht(r,e){return e.forEach(function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach(function(e){var t;"default"===e||e in r||(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))})}),Object.freeze(r)}var Kt=Object.prototype.toString,Xt=Object.prototype.hasOwnProperty;function Yt(e,t){if(void 0!==e){var n,r,i="[object Array]"===Kt.call(e)?Zt:Qt;for(n in e)if(r=n,Xt.call(e,r)&&!1===t(e[n],i(n)))return}}function Qt(e){return e}function Zt(e){return Number(e)}function Jt(e){for(var n=e.style,t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];Yt(r,function(e){e&&Yt(e,function(e,t){n[t]=e})})}function en(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):void e.setAttribute(t,n)}var tn=Object.prototype.toString;function nn(e){return new rn(e)}function rn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function on(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t)}function an(e,t){return e&&"function"==typeof e.matches&&e.matches(t)}rn.prototype.add=function(e){return this.list.add(e),this},rn.prototype.remove=function(e){return"[object RegExp]"==tn.call(e)?this.removeMatching(e):(this.list.remove(e),this)},rn.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},rn.prototype.toggle=function(e,t){return void 0!==t&&t===this.list.toggle(e,t)||this.list.toggle(e),this},rn.prototype.array=function(){return Array.from(this.list)},rn.prototype.has=rn.prototype.contains=function(e){return this.list.contains(e)};var e={},sn=window.addEventListener?"addEventListener":"attachEvent",ln=window.removeEventListener?"removeEventListener":"detachEvent",cn="addEventListener"!=sn?"on":"",un=Ht({__proto__:null,bind:e.bind=function(e,t,n,r){return e[sn](cn+t,n,r||!1),n},unbind:e.unbind=function(e,t,n,r){return e[ln](cn+t,n,r||!1),n},default:e},[e]),pn=["focus","blur"];function fn(e,t){if("string"!=typeof e)throw new TypeError("String expected");if(t=t||document,!(o=/<([\w:]+)/.exec(e)))return t.createTextNode(e);if(e=e.replace(/^\s+|\s+$/g,""),"body"==(o=o[1]))return(n=t.createElement("html")).innerHTML=e,n.removeChild(n.lastChild);var n,r=(o=Object.prototype.hasOwnProperty.call(y,o)?y[o]:y._default)[0],i=o[1],o=o[2];for((n=t.createElement("div")).innerHTML=i+e+o;r--;)n=n.lastChild;if(n.firstChild==n.lastChild)return n.removeChild(n.firstChild);for(var a=t.createDocumentFragment();n.firstChild;)a.appendChild(n.removeChild(n.firstChild));return a}var dn={bind:function(n,r,e,i,t){return-1!==pn.indexOf(e)&&(t=!0),un.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=function(e,t,n){for(var r=n?e:e.parentNode;r&&r.nodeType!==document.DOCUMENT_NODE&&r.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(an(r,t))return r;r=r.parentNode}return an(r,t)?r:null}(t,r,!0),e.delegateTarget&&i.call(n,e)},t)},unbind:function(e,t,n,r){return-1!==pn.indexOf(t)&&(r=!0),un.unbind(e,t,n,r)}},e=!1,y=("undefined"!=typeof document&&((dr=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',e=!dr.getElementsByTagName("link").length,dr=void 0),{legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:e?[1,"X<div>","</div>"]:[0,"",""]});y.td=y.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],y.option=y.optgroup=[1,'<select multiple="multiple">',"</select>"],y.thead=y.tbody=y.colgroup=y.caption=y.tfoot=[1,"<table>","</table>"],y.polyline=y.ellipse=y.polygon=y.circle=y.text=y.line=y.path=y.rect=y.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var hn=fn;function mn(e,t){return(t=t||document).querySelector(e)}function yn(e){e.parentNode&&e.parentNode.removeChild(e)}function vn(t){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var e=arguments.length;if(!(1<=e&&Z(arguments[e-1])))return t.apply(this,arguments);var n=arguments[e-1],e=(console.warn(new Error("Passing callbacks to "+t.name.replace("bound ","")+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html")),Array.prototype.slice.call(arguments,0,-1));t.apply(this,e).then(function(e){var t=Object.keys(e)[0];return n(null,e[t])},function(e){return n(e,e.warnings)})}}function gn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach(function(e){wn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function wn(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _n={width:"100%",height:"100%",position:"relative"},xn=function(){function n(){var e=this,t=(s(this,n),0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});wn(this,"_viewsChanged",function(){e._emit("views.changed",{views:e._views,activeView:e._activeView})}),this._eventBus=new r,this._viewsChanged=se(this._viewsChanged,0),this._views=[],this._viewers={},this.open=vn(this.open.bind(this)),this.importXML=vn(this.importXML.bind(this)),this.saveXML=vn(this.saveXML.bind(this)),this._init(t)}return l(n,[{key:"importXML",value:function(r,l){var c=this;return l=l||{open:!0},new Promise(function(o,a){var s=c._activeView;c._clear().then(function(){var i;r=c._emit("import.parse.start",{xml:r})||r,c._moddle.fromXML(r,"dmn:Definitions").then(function(e){var t=e.rootElement,n=e.references,r=e.elementsById;if(i=e.warnings,t=c._emit("import.parse.complete",u({error:null,definitions:t,elementsById:r,references:n,warnings:i}))||t,c._setDefinitions(t),l.open)return(e=c._getInitialView(c._views,s))?void c.open(e).then(function(e){return{warnings:e.warnings}}).catch(function(e){return{error:e,warnings:e.warnings}}).then(function(e){var t=[].concat(i,e.warnings);c._emit("import.done",{error:e.error,warnings:t}),e.error?(e.error.warnings=t,a(e.error)):o({warnings:t})}):(r=new Error("no displayable contents"),c._emit("import.done",{error:r,warnings:i}),r.warnings=i,a(r));c._emit("import.done",{error:null,warnings:i}),o({warnings:i})}).catch(function(e){var t,n;return i=e.warnings,e=function(e,t){if("failed to parse document as <dmn:Definitions>"!==e.message)return null;t=-1!==t.indexOf('"http://www.omg.org/spec/DMN/20151101/dmn.xsd"')?"1.1":-1!==t.indexOf('"http://www.omg.org/spec/DMN/20180521/MODEL/"')&&"1.2";return t?(e=new Error("unsupported DMN "+t+" file detected; only DMN 1.3 files can be opened"),console.error("Cannot open what looks like a DMN "+t+" diagram. Please refer to https://bpmn.io/l/dmn-compatibility.html to learn how to make the toolkit compatible with older DMN files",e),e):null}(e,r)||(t=e,(n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(t.message))?(t.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid DMN 1.3 diagram file"+n[2],t):null)||e,c._emit("import.parse.complete",u({error:e,warnings:i})),c._emit("import.done",{error:e,warnings:i}),e.warnings=i,a(e)})}).catch(function(e){return c._emit("import.done",{error:e,warnings:[]}),e.warnings=[],a(e)})});function u(e){var t=c._eventBus.createEvent(e);return Object.defineProperty(t,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:e.warnings,references:e.references,elementsById:e.elementsById}}}),t}}},{key:"getDefinitions",value:function(){return this._definitions}},{key:"getActiveView",value:function(){return this._activeView}},{key:"getActiveViewer",value:function(){var e=this.getActiveView();return e&&this._getViewer(e)}},{key:"getView",value:function(t){return this._views.filter(function(e){return e.element===t})[0]}},{key:"getViews",value:function(){return this._views}},{key:"saveXML",value:function(e){var r=this,i=(e=e||{},this._definitions);return new Promise(function(t,n){i?(i=r._emit("saveXML.start",{definitions:i})||i,r._moddle.toXML(i,e).then(function(e){e=e.xml;return{xml:r._emit("saveXML.serialized",{xml:e})||e}}).catch(function(e){return{error:e}}).then(function(e){r._emit("saveXML.done",e),e.error?n(e.error):t({xml:e.xml})})):n(new Error("no definitions loaded"))})}},{key:"on",value:function(){var e;(e=this._eventBus).on.apply(e,arguments)}},{key:"off",value:function(){var e;(e=this._eventBus).off.apply(e,arguments)}},{key:"once",value:function(){var e;(e=this._eventBus).once.apply(e,arguments)}},{key:"attachTo",value:function(e){(e="string"==typeof(e=e.get&&e.constructor.prototype.jquery?e.get(0):e)?mn(e):e).appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){this._emit("detach",{}),yn(this._container)}},{key:"destroy",value:function(){var t=this;Object.keys(this._viewers).forEach(function(e){On(t._viewers[e],"destroy")}),yn(this._container)}},{key:"_init",value:function(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];var t=hn('<div class="dmn-js-parent"></div>'),n=w({},_n,e);w(t.style,{width:kn(n.width),height:kn(n.height),position:n.position}),this._container=t,e.container&&this.attachTo(e.container)}},{key:"_clear",value:function(){return this._switchView(null)}},{key:"open",value:function(e){return this._switchView(e)}},{key:"_setDefinitions",value:function(e){this._definitions=e,this._updateViews()}},{key:"_updateViews",value:function(){var e=this._definitions;if(e){for(var t=this._getViewProviders(),e=[e].concat(p(e.drgElement||[])),n=this._views,r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=ee(t,function(e){return"string"==typeof e.opens?e.opens===a.$type:e.opens(a)});s&&(s={element:a,id:a.id,name:a.name,type:s.id},r.push(s))}var l,c,u=this._activeView;u&&!(l=ee(r,function(e){return En(u,e)})||this._getInitialView(r))?this._switchView(null):(e=!En(u,l)||Cn(u,l),c=n.length!==r.length||!re(r,function(t){return ee(n,function(e){return En(e,t)&&!Cn(e,t)})}),this._activeView=l,this._views=r,(e||c)&&this._viewsChanged())}else this._views=[],this._switchView(null)}},{key:"_getInitialView",value:function(e,t){var n;return(n=t?ee(e,function(e){return En(e,t)})||ee(e,function(e){return e.type===t}):n)||e[0]}},{key:"_switchView",value:function(s){var l=this;return new Promise(function(n,r){function t(e,t){l._viewsChanged(),e?r(e):n(t)}var e,i=l.getActiveView(),o=s&&l._getViewer(s),a=s&&s.element;i&&(e=l._getViewer(i))!==o&&(On(e,"clear"),e.detach()),l._activeView=s,o?(e!==o&&o.attachTo(l._container),l._emit("import.render.start",{view:s,element:a}),o.open(a).then(function(e){l._emit("import.render.complete",{view:s,error:null,warnings:e.warnings}),t(null,e)}).catch(function(e){l._emit("import.render.complete",{view:s,error:e,warnings:e.warnings}),t(e,null)})):t()})}},{key:"_getViewer",value:function(e){var t=e.type,n=this._viewers[t];return n||(n=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:n})),n}},{key:"_createViewer",value:function(t){var e,n=ee(this._getViewProviders(),function(e){return e.id===t});if(n)return n=n.constructor,e=this._options[t]||{},new n(bn(bn(bn({},this._options.common||{}),e),{},{additionalModules:[].concat(p(e.additionalModules||[]),[{_parent:["value",this],moddle:["value",this._moddle]}])}));throw new Error("no provider for view type <"+t+">")}},{key:"_emit",value:function(){var e;return(e=this._eventBus).fire.apply(e,arguments)}},{key:"_createModdle",value:function(e){return new qt(e.moddleExtensions)}},{key:"_getViewProviders",value:function(){return[]}}]),n}();function kn(e){return e+(Q(e)?"px":"")}function En(e,t){return K(e)?!!K(t)&&(e.element===t.element||e.id===t.id):!K(t)}function Cn(e,t){return!e||!t||e.name!==t.name}function On(e,t){Z(e[t])&&e[t]()}var Sn=/^class[ {]/;function jn(e){return Array.isArray(e)}function Nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(t=p(t=1===t.length&&jn(t[0])?t[0]:t)).pop();return r.$inject=t,r}var Dn=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Pn=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Rn=/\/\*([^*]*)\*\//m;function An(e){if("function"!=typeof e)throw new Error('Cannot annotate "'.concat(e,'". Expected a function!'));var e=e.toString().match(Sn.test(e.toString())?Dn:Pn);return(e=e&&(e[1]||e[2]))&&e.split(",").map(function(e){var t=e.match(Rn);return(t&&t[1]||e).trim()})||[]}function Bn(e,i){i=i||{get:function(e,t){if(o.push(e),!1===t)return null;throw s('No provider for "'.concat(e,'"!'))}};var o=[],d=this._providers=Object.create(i._providers||null),a=this._instances=Object.create(null),h=a.injector=this,s=function(e){var t=o.join(" -> ");return o.length=0,new Error(t?"".concat(e," (Resolving: ").concat(t,")"):e)};function l(e,t){if(!d[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),r=l(n.shift());n.length;)r=r[n.shift()];return r}if(Nn(a,e))return a[e];if(Nn(d,e)){if(-1!==o.indexOf(e))throw o.push(e),s("Cannot resolve circular dependency!");return o.push(e),a[e]=d[e][0](d[e][1]),o.pop(),a[e]}return i.get(e,t)}function r(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!jn(e))throw s('Cannot invoke "'.concat(e,'". Expected a function!'));e=Mn(e.slice())}return{fn:e,dependencies:(e.$inject||An(e)).map(function(e){return Nn(t,e)?t[e]:l(e)})}}function t(e){var e=r(e),t=e.fn,e=e.dependencies;return new(Function.prototype.bind.apply(t,[null].concat(e)))}function n(e,t,n){e=r(e,n),n=e.fn,e=e.dependencies;return n.apply(t,e)}function c(e,r){if(r&&r.length){var i,o,a,s,t,l=Object.create(null),c=Object.create(null),u=[],p=[],f=[],n=function(t){var n;i=d[t],-1!==r.indexOf(t)&&("private"===i[2]?-1===(o=u.indexOf(i[3]))?(a=i[3].createChild([],r),n=a,s=Mn(function(e){return n.get(e)}),u.push(i[3]),p.push(a),f.push(s),l[t]=[s,t,"private",a]):l[t]=[f[o],t,"private",p[o]]:l[t]=[i[2],i[1]],c[t]=!0),"factory"!==i[2]&&"type"!==i[2]||!i[1].$scope||r.forEach(function(e){-1!==i[1].$scope.indexOf(e)&&(l[t]=[i[2],i[1]],c[e]=!0)})};for(t in d)n(t);r.forEach(function(e){if(!c[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(l)}return new Bn(e,h)}var u,p,f={factory:n,type:t,value:function(e){return e}};function m(e,t){var n=e.__init__||[];return function(){n.forEach(function(e){"string"==typeof e?t.get(e):t.invoke(e)})}}function y(r){var e,t,n,i,o=r.__exports__;return o?(i=r.__modules__,e=Object.keys(r).reduce(function(e,t){return"__exports__"!==t&&"__modules__"!==t&&"__init__"!==t&&"__depends__"!==t&&(e[t]=r[t]),e},Object.create(null)),t=c((i||[]).concat(e)),n=Mn(function(e){return t.get(e)}),o.forEach(function(e){d[e]=[n,e,"private",t]}),(i=(r.__init__||[]).slice()).unshift(function(){t.init()}),m(r=Object.assign({},r,{__init__:i}),t)):(Object.keys(r).forEach(function(e){var t,n;"__init__"!==e&&"__depends__"!==e&&("private"===r[e][2]?d[e]=r[e]:(t=r[e][0],n=r[e][1],d[e]=[f[t],function(e,t){"value"!==e&&jn(t)&&(t=Mn(t.slice()));return t}(t,n),t]))}),m(r,h))}function v(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(v,e)).indexOf(t)?e:e.concat(t)}this.get=l,this.invoke=n,this.instantiate=t,this.createChild=c,this.init=(u=e.reduce(v,[]).map(y),p=!1,function(){p||(p=!0,u.forEach(function(e){return e()}))})}function In(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function Tn(e,t){var i=this;e.on(["render.shape","render.connection"],t=t||1e3,function(e,t){var e=e.type,n=t.element,r=t.gfx,t=t.attrs;if(i.canRender(n))return"render.shape"===e?i.drawShape(r,n,t):i.drawConnection(r,n,t)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(i.canRender(t))return"render.getShapePath"===e.type?i.getShapePath(t):i.getConnectionPath(t)})}function Ln(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function _(e,t){Ln(t,e)}Tn.prototype.canRender=function(){},Tn.prototype.drawShape=function(){},Tn.prototype.drawConnection=function(){},Tn.prototype.getShapePath=function(){},Tn.prototype.getConnectionPath=function(){};var $n=2,Vn={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":$n,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":$n,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function zn(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=Vn[r];i?(i===$n&&"number"==typeof n&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function x(e,t,n){if("string"==typeof t){if(void 0===n)return l=e,Vn[c=t]?l.style[c]:l.getAttributeNS(null,c);zn(e,t,n)}else for(var r,i=e,o=t,a=Object.keys(o),s=0;r=a[s];s++)zn(i,r,o[r]);var l,c;return e}var Un=Object.prototype.toString;function Fn(e){return new Gn(e)}function Gn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Wn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function qn(e){for(var t;t=e.firstChild;)Wn(t)}Gn.prototype.add=function(e){return this.list.add(e),this},Gn.prototype.remove=function(e){return"[object RegExp]"==Un.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Gn.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Gn.prototype.toggle=function(e,t){return void 0!==t&&t===this.list.toggle(e,t)||this.list.toggle(e),this},Gn.prototype.array=function(){return Array.from(this.list)},Gn.prototype.has=Gn.prototype.contains=function(e){return this.list.contains(e)};var Hn={svg:"http://www.w3.org/2000/svg"},Kn='<svg xmlns="'+Hn.svg+'"';function Xn(e){var t=!1,n=("<svg"===e.substring(0,4)?-1===e.indexOf(Hn.svg)&&(e=Kn+e.substring(4)):(e=Kn+">"+e+"</svg>",t=!0),e=e,(n=new DOMParser).async=!1,n.parseFromString(e,"text/xml"));if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function k(e,t){var n="<"===e.charAt(0)?(n=Xn(e).firstChild,document.importNode(n,!0)):document.createElementNS(Hn.svg,e);return t&&x(n,t),n}var Yn=null;function Qn(){return Yn=null===Yn?k("svg"):Yn}function Zn(e,t){for(var n,r=Object.keys(t),i=0;n=r[i];i++)e[n]=t[n];return e}var Jn=/([&<>]{1})/g,er=/([\n\r"]{1})/g,tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function nr(e,t){return e.replace(t,function(e,t){return tr[t]||t})}function rr(e,t){var n=Xn(t);if(qn(e),t){"#document-fragment"!==n.nodeName&&(n=n.documentElement);t=n.childNodes;for(var r=Array.prototype.slice.call(t),i=0;i<r.length;i++)Ln(r[i],e)}}function ir(e){for(var t=e.firstChild,n=[];t;)!function e(t,n){var r,i,o,a,s;switch(t.nodeType){case 3:n.push(nr(t.textContent,Jn));break;case 1:if(n.push("<",t.tagName),t.hasAttributes())for(r=0,i=(o=t.attributes).length;r<i;++r)a=o.item(r),n.push(" ",a.name,'="',nr(a.value,er),'"');if(t.hasChildNodes()){for(n.push(">"),r=0,i=(s=t.childNodes).length;r<i;++r)e(s.item(r),n);n.push("</",t.tagName,">")}else n.push("/>");break;case 8:n.push("\x3c!--",nr(t.nodeValue,Jn),"--\x3e");break;case 4:n.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}}(t,n),t=t.nextSibling;return n.join("")}function or(e,t){var n,r,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem((r=e,(i=i)instanceof SVGMatrix?r.createSVGTransformFromMatrix(i):i))}function ar(e,t){e=e.transform.baseVal;return t&&or(e,t=Array.isArray(t)?t:[t]),e.consolidate()}function sr(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function lr(e){for(var t,n="",r=0;t=e[r];r++)n+=t.x+","+t.y+" ";return n}function cr(e,t){var n=k("polyline");return x(n,{points:lr(e)}),t&&x(n,t),n}function ur(e,i){var o,a,s,l;return i=!!i,g(e=X(e)?e:[e],function(e){var t=e,e=(t=e.waypoints&&!i?ur(e.waypoints,!0):t).x,n=t.y,r=t.height||0,t=t.width||0;(e<o||void 0===o)&&(o=e),(n<a||void 0===a)&&(a=n),(s<e+t||void 0===s)&&(s=e+t),(l<n+r||void 0===l)&&(l=n+r)}),{x:o,y:a,height:l-a,width:s-o}}function pr(e){return!(!e||!e.isFrame)}function fr(e,t){Tn.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}In(fr,Tn),fr.prototype.canRender=function(){return!0},fr.prototype.drawShape=function(e,t,n){var r=k("rect");return x(r,{x:0,y:0,width:t.width||0,height:t.height||0}),pr(t)?x(r,w({},this.FRAME_STYLE,n||{})):x(r,w({},this.SHAPE_STYLE,n||{})),_(e,r),r},fr.prototype.drawConnection=function(e,t,n){t=cr(t.waypoints,w({},this.CONNECTION_STYLE,n||{}));return _(e,t),t},fr.prototype.getShapePath=function(e){var t=e.x,n=e.y,r=e.width;return sr([["M",t,n],["l",r,0],["l",0,e.height],["l",-r,0],["z"]])},fr.prototype.getConnectionPath=function(e){for(var t,n=e.waypoints,r=[],i=0;t=n[i];i++)t=t.original||t,r.push([0===i?"M":"L",t.x,t.y]);return sr(r)},fr.$inject=["eventBus","styles"];var dr={__init__:["defaultRenderer"],defaultRenderer:["type",fr],styles:["type",function(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},r=this;this.cls=function(e,t,n){return w(this.style(t,n),{class:e})},this.style=function(e,t){X(e)||t||(t=e,e=[]);e=ne(e,function(e,t){return w(e,n[t]||{})},{});return t?w(e,t):e},this.computeStyle=function(e,t,n){return X(t)||(n=t,t=[]),r.style(t||[],w({},n,e||{}))}}]};function hr(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function mr(e,t){return Math.round(e*t)/t}function yr(e){return Q(e)?e+"px":e}function vr(e,t,n){var r=k("g"),t=(Fn(r).add(t),void 0!==n?n:e.childNodes.length-1);return e.insertBefore(r,e.childNodes[t]||null),r}var gr={shape:["x","y","width","height"],connection:["waypoints"]};function t(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}function br(e,t){t="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",t)}t.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t.prototype._init=function(e){var t,n,r=this._eventBus,i=this._container=(t=(i=w({},{width:"100%",height:"100%"},i=e)).container||document.body,(n=document.createElement("div")).setAttribute("class","djs-container djs-parent"),Jt(n,{position:"relative",overflow:"hidden",width:yr(i.width),height:yr(i.height)}),t.appendChild(n),n),o=this._svg=k("svg"),a=(x(o,{width:"100%",height:"100%"}),_(i,o),this._viewport=vr(o,"viewport"));!1!==e.deferUpdate&&(this._viewboxChanged=se(le(this._viewboxChanged,this),300)),r.on("diagram.init",function(){r.fire("canvas.init",{svg:o,viewport:a})},this),r.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],function(){delete this._cachedViewbox},this),r.on("diagram.destroy",500,this._destroy,this),r.on("diagram.clear",500,this._clear,this)},t.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},t.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t="waypoints"in(t=e)?"connection":"x"in t?"shape":"root";"root"==t?n.removeRootElement(e):n._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},t.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},t.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=(n=this._layers[e])||(this._layers[e]=this._createLayer(e,t));if(void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},t.prototype._getChildIndex=function(n){return ne(this._layers,function(e,t){return t.visible&&n>=t.index&&e++,e},0)},t.prototype._createLayer=function(e,t){var n=this._getChildIndex(t=void 0===t?1:t);return{group:vr(this._viewport,"layer-"+e,n),index:t,visible:!0}},t.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");var t,n,r,i=this._layers[e];if(i)return t=this._viewport,n=i.group,r=i.index,i.visible||(r=this._getChildIndex(r),t.insertBefore(n,t.childNodes[r]||null),i.visible=!0),n;throw new Error("layer <"+e+"> does not exist")},t.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");var t,n=this._layers[e];if(n)return t=n.group,n.visible&&(Wn(t),n.visible=!1),t;throw new Error("layer <"+e+"> does not exist")},t.prototype._removeLayer=function(e){var t=this._layers[e];t&&(delete this._layers[e],Wn(t.group))},t.prototype.getActiveLayer=function(){var e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},t.prototype.findRoot=function(e){if(e="string"==typeof e?this._elementRegistry.get(e):e)return(this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{}).rootElement},t.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},t.prototype._findPlaneForRoot=function(t){return ee(this._planes,function(e){return e.rootElement===t})},t.prototype.getContainer=function(){return this._container},t.prototype._updateMarker=function(e,t,n){var r;e.id||(e=this._elementRegistry.get(e)),(r=this._elementRegistry._elements[e.id])&&(g([r.gfx,r.secondaryGfx],function(e){e&&(n?Fn(e).add(t):Fn(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))},t.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},t.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},t.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),Fn(this.getGraphics(e)).has(t)},t.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},t.prototype.getRootElement=function(){var e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},t.prototype.addRootElement=function(e){var t=this._rootsIdx++,t=(e=e||{id:"__implicitroot_"+t,children:[],isImplicit:!0}).layer="root-"+t,n=(this._ensureValid("root",e),this.getLayer(t,0));return this.hideLayer(t),this._addRoot(e,n),this._planes.push({rootElement:e,layer:n}),e},t.prototype.removeRootElement=function(t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._findPlaneForRoot(t))return this._removeRoot(t),this._removeLayer(t.layer),this._planes=this._planes.filter(function(e){return e.rootElement!==t}),this._rootElement===t&&(this._rootElement=null),t},t.prototype.setRootElement=function(e,t){if(K(t))throw new Error("override not supported");if(e!==this._rootElement){if(e)return this._findPlaneForRoot(e)||(e=this.addRootElement(e)),this._setRoot(e),e;throw new Error("rootElement required")}},t.prototype._removeRoot=function(e){var t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},t.prototype._addRoot=function(e,t){var n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})},t.prototype._setRoot=function(e,t){var n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t=t||this._findPlaneForRoot(e).layer,this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},t.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");var n=gr[e];if(!re(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},t.prototype._setParent=function(e,t,n){!function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var r=e.indexOf(t);if(-1!==r){if(r===n)return;if(-1===n)return;e.splice(r,1)}-1!==n?e.splice(n,0,t):e.push(t)}}(t.children,e,n),e.parent=t},t.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();var i=this._eventBus,o=this._graphicsFactory,n=(this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r),o.create(e,t,r));return this._elementRegistry.add(t,n),o.update(e,t,n),i.fire(e+".added",{element:t,gfx:n}),t},t.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},t.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},t.prototype._removeElement=function(e,t){var n,r=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=r.get(e.id||e))return o.fire(t+".remove",{element:e}),i.remove(e),i=e.parent&&e.parent.children,n=e,i&&n&&-1!==(n=i.indexOf(n))&&i.splice(n,1),e.parent=null,o.fire(t+".removed",{element:e}),r.remove(e),e},t.prototype.removeShape=function(e){return this._removeElement(e,"shape")},t.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},t.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},t.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},t.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},t.prototype.viewbox=function(t){var n,r,e,i,o,a;return void 0===t&&this._cachedViewbox?this._cachedViewbox:(n=this._viewport,r=this.getSize(),t?(this._changeViewbox(function(){i=Math.min(r.width/t.width,r.height/t.height);var e=this._svg.createSVGMatrix().scale(i).translate(-t.x,-t.y);ar(n,e)}),t):(e=(e=this._rootElement?this.getActiveLayer():null)&&e.getBBox()||{},a=(a=ar(n))?a.matrix:function(e,t,n,r,i,o){var a=Qn().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Zn(a,e);case 6:return Zn(a,{a:e,b:t,c:n,d:r,e:i,f:o})}}(),i=mr(a.a,1e3),o=mr(-a.e||0,1e3),a=mr(-a.f||0,1e3),t=this._cachedViewbox={x:o?o/i:0,y:a?a/i:0,width:r.width/i,height:r.height/i,scale:i,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:r}))},t.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=w({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),br(t,n)}),{x:n.e,y:n.f}},t.prototype.scrollToElement=function(e,t){var n,r,i,o=100,a=("string"==typeof e&&(e=this._elementRegistry.get(e)),this.findRoot(e)),a=(a!==this.getRootElement()&&this.setRootElement(a),"number"==typeof(t=t||{})&&(o=t),t={top:t.top||o,right:t.right||o,bottom:t.bottom||o,left:t.left||o},ur(e)),o=hr(a),e=this.viewbox(),s=this.zoom(),t=(e.y+=t.top/s,e.x+=t.left/s,e.width-=(t.right+t.left)/s,e.height-=(t.bottom+t.top)/s,hr(e));t=a.width<e.width&&a.height<e.height?(i=Math.max(0,o.right-t.right),n=Math.min(0,o.left-t.left),r=Math.max(0,o.bottom-t.bottom),o=Math.min(0,o.top-t.top),i=i||n,r||o):(i=a.x-e.x,a.y-e.y),this.scroll({dx:-i*s,dy:-t*s})},t.prototype.zoom=function(e,t){var n,r;return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!==m(t)&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),mr(r.a,1e3)):this.viewbox(e).scale},t.prototype._fitViewport=function(e){var t,n=this.viewbox(),r=n.outer,n=n.inner,e=0<=n.x&&0<=n.y&&n.x+n.width<=r.width&&n.y+n.height<=r.height&&!e?{x:0,y:0,width:Math.max(n.width+n.x,r.width),height:Math.max(n.height+n.y,r.height)}:(t=Math.min(1,r.width/n.width,r.height/n.height),{x:n.x+(e?n.width/2-r.width/t/2:0),y:n.y+(e?n.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t});return this.viewbox(e),this.viewbox(!1).scale},t.prototype._setZoom=function(e,t){var n=this._svg,r=this._viewport,i=n.createSVGMatrix(),n=n.createSVGPoint(),r=r.getCTM(),o=r.a,o=t?(n=w(n,t).matrixTransform(r.inverse()),t=i.translate(n.x,n.y).scale(1/o*e).translate(-n.x,-n.y),r.multiply(t)):i.scale(e);return br(this._viewport,o),o},t.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},t.prototype.getAbsoluteBBox=function(e){var t=this.viewbox();return{x:(e=e.waypoints?this.getGraphics(e).getBBox():e).x*t.scale-t.x*t.scale,y:e.y*t.scale-t.y*t.scale,width:e.width*t.scale,height:e.height*t.scale}},t.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var wr="data-element-id";function n(e){this._elements={},this._eventBus=e}n.$inject=["eventBus"],n.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),x(t,wr,r),n&&x(n,wr,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}},n.prototype.remove=function(e){var t=this._elements,e=e.id||e,n=e&&t[e];n&&(x(n.gfx,wr,""),n.secondaryGfx&&x(n.secondaryGfx,wr,""),delete t[e])},n.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)},n.prototype.updateGraphics=function(e,t,n){var e=e.id||e,r=this._elements[e];return n?r.secondaryGfx=t:r.gfx=t,t&&x(t,wr,e),t},n.prototype.get=function(e){e="string"==typeof e?e:e&&x(e,wr),e=this._elements[e];return e&&e.element},n.prototype.filter=function(n){var r=[];return this.forEach(function(e,t){n(e,t)&&r.push(e)}),r},n.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=t[n[r]],o=i.element;if(e(o,i.gfx))return o}},n.prototype.getAll=function(){return this.filter(function(e){return e})},n.prototype.forEach=function(n){var r=this._elements;Object.keys(r).forEach(function(e){var e=r[e],t=e.element,e=e.gfx;return n(t,e)})},n.prototype.getGraphics=function(e,t){e=e.id||e,e=this._elements[e];return e&&(t?e.secondaryGfx:e.gfx)},n.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var _r={extend:function(e,r,t,i){var o=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),r.unset(e,o,i)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,t){var n=this.indexOf(e);if(void 0===t){if(-1!==n)return;t=this.length}-1!==n&&this.splice(n,1),this.splice(t,0,e),-1===n&&r.set(e,o,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},isExtended:function(e){return!0===e.__refs_collection}};function xr(t,n,r){var e=_r.extend(r[n.name]||[],t,n,r);Object.defineProperty(r,n.name,{enumerable:n.enumerable,value:e}),e.length&&e.forEach(function(e){t.set(e,n.inverse,r)})}function kr(e,t){if(!(this instanceof kr))return new kr(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}kr.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}var n,r,i,o;t.collection?xr(this,t,e):(n=this,r=e,i=(e=t).inverse,o=r[e.name],Object.defineProperty(r,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return o},set:function(e){var t;e!==o&&(t=o,o=null,t&&n.unset(t,i,r),o=e,n.set(o,i,r))}}))},kr.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return _r.isExtended(n)||xr(this,t,e),n},kr.prototype.ensureBound=function(e,t){var n;n=t,Object.prototype.hasOwnProperty.call(e,n.name||n)||this.bind(e,t)},kr.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},kr.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var e=kr,Er=(e.Collection=_r,new e({name:"children",enumerable:!0,collection:!0},{name:"parent"})),Cr=new e({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Or=new e({name:"attachers",collection:!0},{name:"host"}),Sr=new e({name:"outgoing",collection:!0},{name:"source"}),jr=new e({name:"incoming",collection:!0},{name:"target"});function Nr(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Er.bind(this,"parent"),Cr.bind(this,"labels"),Sr.bind(this,"outgoing"),jr.bind(this,"incoming")}function Mr(){Nr.call(this),Er.bind(this,"children"),Or.bind(this,"host"),Or.bind(this,"attachers")}function Dr(){Mr.call(this)}function Pr(){Mr.call(this),Cr.bind(this,"labelTarget")}function Rr(){Nr.call(this),Sr.bind(this,"source"),jr.bind(this,"target")}In(Mr,Nr),In(Dr,Mr),In(Pr,Mr),In(Rr,Nr);var Ar={connection:Rr,shape:Mr,label:Pr,root:Dr};function Br(){this._uid=12}function Ir(e,t,n){var r=r?Qn().createSVGTransformFromMatrix(r):Qn().createSVGTransform();r.setTranslate(t,n),ar(e,r)}function i(e,t){this._eventBus=e,this._elementRegistry=t}function Tr(e,t,n){n=n||t.firstChild;e!==n&&t.insertBefore(e,n)}Br.prototype.createRoot=function(e){return this.create("root",e)},Br.prototype.createLabel=function(e){return this.create("label",e)},Br.prototype.createShape=function(e){return this.create("shape",e)},Br.prototype.createConnection=function(e){return this.create("connection",e)},Br.prototype.create=function(e,t){(t=w({},t||{})).id||(t.id=e+"_"+this._uid++);var n=Ar[e];if(n)return w(new n,t);throw new Error("unknown type: <"+e+">")},i.$inject=["eventBus","elementRegistry"],i.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=n.parentNode.childNodes[1])||(Fn(t=k("g")).add("djs-children"),_(n.parentNode,t)):t=n,t},i.prototype._clear=function(e){e=e.childNodes[0];return on(e),e},i.prototype._createContainer=function(e,t,n,r){var i=k("g"),n=(Fn(i).add("djs-group"),void 0!==n?Tr(i,t,t.childNodes[n]):_(t,i),k("g")),t=(Fn(n).add("djs-element"),Fn(n).add("djs-"+e),r&&Fn(n).add("djs-frame"),_(i,n),k("g"));return Fn(t).add("djs-visual"),_(n,t),n},i.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,pr(t))},i.prototype.updateContainments=function(e){var r=this,i=this._elementRegistry;g(ne(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),function(e){var t,n=e.children;n&&(t=r._getChildrenContainer(e),g(n.slice().reverse(),function(e){Tr(i.getGraphics(e).parentNode,t)}))})},i.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},i.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},i.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},i.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},i.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if("shape"===e)this.drawShape(r,t),Ir(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(r,t)}t.hidden?x(n,"display","none"):x(n,"display","block")}},i.prototype.remove=function(e){Wn(this._elementRegistry.getGraphics(e).parentNode)};var Lr={__depends__:[dr],__init__:["canvas"],canvas:["type",t],elementRegistry:["type",n],elementFactory:["type",Br],eventBus:["type",r],graphicsFactory:["type",i]};function $r(e){var e=[{config:["value",e=e||{}]},Lr].concat(e.modules||[]);return(e=new Bn(e=e)).init(),e}function Vr(e,t){this.injector=t=t||$r(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}function E(e,t){e=zr(e);return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function zr(e){return e&&e.businessObject||e}Vr.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Vr.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Ur=new e({name:"dmnElementRef",enumerable:!0},{name:"di",configurable:!0});function Fr(r,e){var i=[];function o(t){try{t.di&&function(e){if(e.gfx)throw new Error("already rendered "+e.id);r.element(e)}(t)}catch(e){n(e.message,{element:t,error:e})}}function a(e){var t;(t=(e=e).dmnElementRef)?t.di?n("multiple DI elements defined for element",{element:t}):(Ur.bind(t,"di"),t.di=e):n("no DMN element referenced in element",{element:e})}function s(e){i.push(e)}function n(e,t){r.error(e,t)}return{handleDefinitions:function(e,t){var n=e.dmnDI;if(!n)throw new Error("no dmndi:DMNDI");if(n=n.diagrams||[],t&&-1===n.indexOf(t))throw new Error("diagram not part of dmndi:DMNDI");if(!(t=!t&&n&&n.length?n[0]:t))throw new Error("no diagram to display");g((e.di=t).diagramElements,a),r.root(e),g(e.get("drgElement"),function(e){var t;o(e),t=e,g(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(e){g(t[e],function(e){s(function(){o(e)})})})}),g(e.get("artifact"),function(e){var t;E(e,"dmn:Association")?(t=e,s(function(){o(t)})):o(e)}),g(i,function(e){e()})}}}function Gr(e,t,n){var r,i=e.get("drdImporter"),e=e.get("eventBus"),o=[];e.fire("import.start",{definitions:t});try{new Fr({root:function(e){return i.root(e)},element:function(e,t){return i.add(e,t)},error:function(e,t){o.push({message:e,context:t})}}).handleDefinitions(t)}catch(e){r=e}e.fire("import.done",{error:r,warnings:o}),n(r,o)}(function(e){var s=e.exports=function(e,t){if(t=t||16,(e=void 0===e?128:e)<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,e/r))/Math.log(t)*r;for(var i=n-Math.floor(n),o="",r=0;r<Math.floor(n);r++)o=Math.floor(Math.random()*t).toString(t)+o;i&&(i=Math.pow(t,i),o=Math.floor(Math.random()*i).toString(t)+o);i=parseInt(o,t);return i!==1/0&&i>=Math.pow(2,e)?s(e,t):o};s.rack=function(r,i,o){function n(e){var t=0;do{if(10<t++){if(!o)throw new Error("too many ID collisions, use more bits");r+=o}var n=s(r,i)}while(Object.hasOwnProperty.call(a,n));return a[n]=e,n}var a=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=r||128,n.base=i||16,n}})(dr={exports:{}});var Wr=dr.exports;function qr(e){if(!(this instanceof qr))return new qr(e);this._seed=(e=e||[128,36,1]).length?Wr.rack(e[0],e[1],e[2]):e}qr.prototype.next=function(e){return this._seed(e||!0)},qr.prototype.nextPrefixed=function(e,t){for(var n;n=e+this.next(!0),this.assigned(n););return this.claim(n,t),n},qr.prototype.claim=function(e,t){this._seed.set(e,t||!0)},qr.prototype.assigned=function(e){return this._seed.get(e)||!1},qr.prototype.unclaim=function(e){delete this._seed.hats[e]},qr.prototype.clear=function(){for(var e in this._seed.hats)this.unclaim(e)};var Hr=new qr,Kr="hsl(225, 10%, 15%)";function Xr(e,t,r,n,i,a){Tn.call(this,t);var o=Hr.next(),s=n.computeStyle,l={},c=e&&e.defaultFillColor||"white",u=e&&e.defaultStrokeColor||Kr,p=e&&e.defaultLabelColor;function f(e,t,n){var r,i,t=e+"-"+Qr(t)+"-"+Qr(n)+"-"+o;return l[t]||(r=t,n=n,"association-start"===(e=e)?(x(i=k("path"),{d:"M 11 5 L 1 10 L 11 15"}),d(r,{element:i,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})):"association-end"===e?(x(i=k("path"),{d:"M 1 5 L 11 10 L 1 15"}),d(r,{element:i,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})):"information-requirement-end"===e?(x(i=k("path"),{d:"M 1 5 L 11 10 L 1 15 Z"}),d(r,{element:i,attrs:{fill:n,stroke:"none"},ref:{x:11,y:10},scale:1})):"knowledge-requirement-end"===e?(x(i=k("path"),{d:"M 1 3 L 11 10 L 1 17"}),d(r,{element:i,attrs:{fill:"none",stroke:n,strokeWidth:2},ref:{x:11,y:10},scale:.8})):"authority-requirement-end"===e&&(x(i=k("circle"),{cx:3,cy:3,r:3}),d(r,{element:i,attrs:{fill:n,stroke:"none"},ref:{x:3,y:3},scale:.9}))),"url(#"+t+")"}function d(e,t){var n=w({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),r=t.ref||{x:0,y:0},i=t.scale||1,o=("none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]),k("marker")),n=(x(t.element,n),_(o,t.element),x(o,{id:e,viewBox:"0 0 20 20",refX:r.x,refY:r.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"}),mn("defs",a._svg));n||(n=k("defs"),_(a._svg,n)),_(n,o),l[e]=o}function h(e,t,n,r,i,o){Y(i)&&(o=i,i=0),i=i||0,o=s(o,{stroke:Kr,strokeWidth:2,fill:"white"});var a=k("rect");return x(a,{x:i,y:i,width:t-2*i,height:n-2*i,rx:r,ry:r}),x(a,o),_(e,a),a}function m(e,t,n){t=i.createText(t||"",n);return en(t,"class","djs-label"),_(e,t),t}function y(e,t,n,r){m(e,zr(t).name,r=w({box:t,align:n,padding:5,style:{fill:Zr(0,p,u)}},r))}function v(e,t,n){n=s(n,["no-fill"],{strokeWidth:2,stroke:Kr});var r=k("path");return x(r,{d:t}),x(r,n),_(e,r),r}var g={"dmn:Decision":function(e,t){var n=h(e,t.width,t.height,0,{stroke:u,fill:c});return y(e,t,"center-middle"),n},"dmn:KnowledgeSource":function(e,t){var n=v(e,r.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.075}}),{strokeWidth:2,fill:c,stroke:u});return y(e,t,"center-middle"),n},"dmn:BusinessKnowledgeModel":function(e,t){var n=v(e,r.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.3}}),{strokeWidth:2,fill:c,stroke:u});return y(e,t,"center-middle"),n},"dmn:InputData":function(e,t){var n=h(e,t.width,t.height,22,{stroke:u,fill:c});return y(e,t,"center-middle"),n},"dmn:TextAnnotation":function(e,t){var n=h(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return v(e,r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:u}),m(e,Yr(t).text||"",{style:{fill:Zr(0,p,u)},box:t,align:"left-top",padding:5}),n},"dmn:Association":function(e,t){var n=Yr(t),r=c,i=u,o={stroke:i,strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"};return"One"!==n.associationDirection&&"Both"!==n.associationDirection||(o.markerEnd=f("association-end",r,i)),"Both"===n.associationDirection&&(o.markerStart=f("association-start",r,i)),b(e,t.waypoints,o)},"dmn:InformationRequirement":function(e,t){var n={stroke:u,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("information-requirement-end",c,u)};return b(e,t.waypoints,n)},"dmn:KnowledgeRequirement":function(e,t){var n={stroke:u,strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("knowledge-requirement-end",c,u)};return b(e,t.waypoints,n)},"dmn:AuthorityRequirement":function(e,t){var n={stroke:u,strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:f("authority-requirement-end",c,u)};return b(e,t.waypoints,n)}};function b(e,t,n){t=cr(t,n=s(n,["no-fill"],{stroke:Kr,strokeWidth:2,fill:"none"}));return _(e,t),t}this.canRender=function(e){return E(e,"dmn:DMNElement")||E(e,"dmn:InformationRequirement")||E(e,"dmn:KnowledgeRequirement")||E(e,"dmn:AuthorityRequirement")},this.drawShape=function(e,t){var n=g[t.type];return n?n(e,t):Tn.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type;return(n=g[n])?n(e,t):Tn.prototype.drawConnection.apply(this,[e,t])}}function Yr(e){return e.businessObject}function Qr(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function Zr(e,t,n){return t||n}In(Xr,Tn),Xr.$inject=["config.drdRenderer","eventBus","pathMap","styles","textRenderer","canvas"];var Jr={width:150,height:50};function ei(e,t,n){for(var r,i,o,a,s,l=e.shift(),c=l;;){if((s=function(e,t){var n;t.textContent=e;try{var r,i=""===e;return t.textContent=i?"dummy":e,r={width:(n=t.getBBox()).width+2*n.x,height:n.height},i&&(r.width=0),r}catch(e){return{width:0,height:0}}}(c,n)).width=c?s.width:0," "===c||""===c||s.width<Math.round(t)||c.length<2)return r=e,o=l,a=s,(i=c).length<o.length&&(o=o.slice(i.length).trim(),r.unshift(o)),{width:a.width,height:a.height,text:i};c=function(e,t,n){n=Math.max(e.length*(n/t),1),t=function(e,t){var n,r=e.split(/(\s|-|\u00AD)/g),i=[],o=0;if(1<r.length)for(;n=r.shift();){if(!(n.length+o<t)){"-"!==n&&n!==ti||i.pop();break}i.push(n),o+=n.length}e=i[i.length-1];e&&e===ti&&(i[i.length-1]="-");return i.join("")}(e,n);t=t||e.slice(0,Math.max(Math.round(n-1),1));return t}(c,s.width,t)}}var ti="";function ni(e){this._config=w({},{size:Jr,padding:0,style:{},align:"center-top"},e||{})}ni.prototype.createText=function(e,t){return this.layoutText(e,t).element},ni.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},ni.prototype.layoutText=function(e,t){var n,r=w({},this._config.size,t.box),i=w({},this._config.style,t.style),o={horizontal:(n=(n=t.align||this._config.align).split("-"))[0]||"center",vertical:n[1]||"top"},a=Y(n=(void 0!==t.padding?t:this._config).padding)?w({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n},s=t.fitBox||!1,l=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\u00AD?\r?\n/),u=[],p=r.width-a.left-a.right,f=k("text");for(x(f,{x:0,y:0}),x(f,i),(n=document.getElementById("helper-svg"))||(x(n=k("svg"),{id:"helper-svg"}),Jt(n,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(n)),_(n,f);c.length;)u.push(ei(c,p,f));"middle"===o.vertical&&(a.top=a.bottom=0);var t=ne(u,function(e,t,n){return e+(l||t.height)},0)+a.top+a.bottom,d=ne(u,function(e,t,n){return t.width>e?t.width:e},0),h=a.top,m=("middle"===o.vertical&&(h+=(r.height-t)/2),h-=(l||u[0].height)/4,k("text"));return x(m,i),g(u,function(e){var t;switch(h+=l||e.height,o.horizontal){case"left":t=a.left;break;case"right":t=(s?d:p)-a.right-e.width;break;default:t=Math.max(((s?d:p)-e.width)/2+a.left,0)}var n=k("tspan");x(n,{x:t,y:h}),n.textContent=e.text,_(m,n)}),Wn(f),{dimensions:{width:d,height:t},element:m}};function ri(e){var n=w({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),t=parseInt(n.fontSize,10)-1,r=w({},n,{fontSize:t},e&&e.externalStyle||{}),i=new ni({style:n});this.getExternalLabelBounds=function(e,t){t=i.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:r});return{x:Math.round(e.x+e.width/2-t.width/2),y:Math.round(e.y),width:Math.ceil(t.width),height:Math.ceil(t.height)}},this.getTextAnnotationBounds=function(e,t){t=i.getDimensions(t,{box:e,style:n,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(t.height))}},this.createText=function(e,t){return i.createText(e,t||{})},this.getDefaultStyle=function(){return n},this.getExternalStyle=function(){return r}}ri.$inject=["config.textRenderer"];var ii=/\{([^{}]+)\}/g,oi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;e={__init__:["drdRenderer"],drdRenderer:["type",Xr],textRenderer:["type",ri],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,r,i=this.pathMap[e],e=t.abspos?(n=t.abspos.x,t.abspos.y):(n=t.containerWidth*t.position.mx,t.containerHeight*t.position.my),o={};if(t.position){for(var a=t.containerHeight/i.height*t.yScaleFactor,s=t.containerWidth/i.width*t.xScaleFactor,l=0;l<i.heightElements.length;l++)o["y"+l]=i.heightElements[l]*a;for(var c=0;c<i.widthElements.length;c++)o["x"+c]=i.widthElements[c]*s}return t=i.d,r={mx:n,my:e,e:o},String(t).replace(ii,function(e,t){return e=e,o=n=r,t.replace(oi,function(e,t,n,r,i){t=t||r,o&&"function"==typeof(o=t in o?o[t]:o)&&i&&(o=o())}),o=(null==o||o==n?e:o)+"";var n,o})}}]};function ai(e,t,n,r){this._eventBus=e,this._canvas=t,this._elementRegistry=r,this._elementFactory=n}function si(e,t){return w({id:e.id,type:e.$type,businessObject:e},t)}function li(e){return e.split("#").pop()}ai.$inject=["eventBus","canvas","elementFactory","elementRegistry"],ai.prototype.root=function(e){e=this._elementFactory.createRoot(si(e));return this._canvas.setRootElement(e),e},ai.prototype.add=function(e){var t,n,r,i,o,a=this._elementFactory,s=this._canvas,l=this._eventBus,c=e.di;if(c.$instanceOf("dmndi:DMNShape"))o=c.bounds,o=si(e,{x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}),t=a.createShape(o),s.addShape(t),l.fire("drdElement.added",{element:t,di:c});else{if(!c.$instanceOf("dmndi:DMNEdge"))throw new Error("unknown di for element "+e.id);n=function(e){e=e.waypoint;if(e)return function(e,n){var r=[];return g(e,function(e,t){r.push(n(e,t))}),r}(e,function(e){e={x:e.x,y:e.y};return w({original:e},e)})}(c),r=this._getSource(e),i=this._getTarget(e),r&&i&&(o=si(e,{hidden:!1,source:r,target:i,waypoints:n}),t=a.createConnection(o),s.addConnection(t),l.fire("drdElement.added",{element:t,di:c}))}return t},ai.prototype._getSource=function(e){var t,n;if(E(e,"dmn:Association")?n=e.sourceRef:E(e,"dmn:InformationRequirement")?n=e.requiredDecision||e.requiredInput:E(e,"dmn:KnowledgeRequirement")?n=e.requiredKnowledge:E(e,"dmn:AuthorityRequirement")&&(n=e.requiredDecision||e.requiredInput||e.requiredAuthority),t=n?n.href:t)return this._getShape(li(t))},ai.prototype._getTarget=function(e){return E(e,"dmn:Association")?e.targetRef&&this._getShape(li(e.targetRef.href)):this._getShape(e.$parent.id)},ai.prototype._getShape=function(e){return this._elementRegistry.get(e)};e={__depends__:[e,{drdImporter:["type",ai]}]};var ci={translate:["value",function(e,n){return n=n||{},e.replace(/{([^}]+)}/g,function(e,t){return n[t]||"{"+t+"}"})}]};function ui(e){return e.originalEvent||e.srcEvent}function pi(e,t){return(ui(e)||e).button===t}function fi(e){return pi(e,0)}function di(e){var t=ui(e)||e;return!!fi(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function hi(e){return!0}function mi(e){return fi(e)||pi(e,1)}function yi(o,a,n){var r=this;function s(e,t,n){var r,i;(u[e]||fi)(t)&&(n?i=a.getGraphics(n):(r=t.delegateTarget||t.target)&&(n=a.get(i=r)),i)&&n&&!1===o.fire(e,{element:n,gfx:i,originalEvent:t})&&(t.stopPropagation(),t.preventDefault())}var l={};function i(e){return l[e]}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":hi,"element.mousedown":mi,"element.mouseup":mi,"element.click":mi,"element.dblclick":mi};var p="svg, .djs-element";function f(e,t,n,r){var i=l[n]=function(e){s(n,e)};r&&(u[n]=r),i.$delegate=dn.bind(e,p,t,i)}function d(e,t,n){n=i(n);n&&dn.unbind(e,t,n.$delegate)}o.on("canvas.destroy",function(e){var n;n=e.svg,g(c,function(e,t){d(n,t,e)})}),o.on("canvas.init",function(e){var n;n=e.svg,g(c,function(e,t){f(n,t,e)})}),o.on(["shape.added","connection.added"],function(e){var t=e.element,e=e.gfx;o.fire("interactionEvents.createHit",{element:t,gfx:e})}),o.on(["shape.changed","connection.changed"],500,function(e){var t=e.element,e=e.gfx;o.fire("interactionEvents.updateHit",{element:t,gfx:e})}),o.on("interactionEvents.createHit",500,function(e){var t=e.element,e=e.gfx;r.createDefaultHit(t,e)}),o.on("interactionEvents.updateHit",function(e){var t=e.element,e=e.gfx;r.updateDefaultHit(t,e)});var e=m("djs-hit djs-hit-stroke"),t=m("djs-hit djs-hit-click-stroke"),h={all:m("djs-hit djs-hit-all"),"click-stroke":t,stroke:e,"no-move":m("djs-hit djs-hit-no-move")};function m(e,t){return t=w({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function y(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");x(e,n)}function v(e,t){_(e,t)}this.removeHits=function(e){var t;t=".djs-hit",g((e||document).querySelectorAll(t),Wn)},this.createDefaultHit=function(e,t){var n=e.waypoints,r=e.isFrame;return n?this.createWaypointsHit(t,n):this.createBoxHit(t,r?"stroke":"all",{width:e.width,height:e.height})},this.createWaypointsHit=function(e,t){t=cr(t);return y(t,"stroke"),v(e,t),t},this.createBoxHit=function(e,t,n){n=w({x:0,y:0},n);var r=k("rect");return y(r,t),x(r,n),v(e,r),r},this.updateDefaultHit=function(e,t){var n,r,t=mn(".djs-hit",t);if(t)return e.waypoints?(n=t,r=e.waypoints,x(n,{points:lr(r)})):x(t,{width:e.width,height:e.height}),t},this.fire=s,this.triggerMouseEvent=function(e,t,n){var r=c[e];if(r)return s(r,t,n);throw new Error("unmapped DOM event name <"+e+">")},this.mouseHandler=i,this.registerEvent=f,this.unregisterEvent=d}yi.$inject=["eventBus","elementRegistry","styles"];var vi={__init__:["interactionEvents"],interactionEvents:["type",yi]};function gi(e,t,n){this.offset=6;var r=t.cls("djs-outline",["no-fill"]),i=this;function o(e){var t=k("rect");return x(t,w({x:10,y:10,rx:3,width:100,height:100},r)),_(e,t),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,e=e.gfx,n=(n=mn(".djs-outline",e))||o(e);i.updateShapeOutline(n,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,e=e.gfx,n=(n=mn(".djs-outline",e))||o(e);i.updateConnectionOutline(n,t)})}gi.prototype.updateShapeOutline=function(e,t){x(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},gi.prototype.updateConnectionOutline=function(e,t){t=ur(t);x(e,{x:t.x-this.offset,y:t.y-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},gi.$inject=["eventBus","styles","elementRegistry"];var bi={__init__:["outline"],outline:["type",gi]};function wi(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){e=e.element;n.deselect(e)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}wi.$inject=["eventBus","canvas"],wi.prototype.deselect=function(e){var t,n=this._selectedElements,e=n.indexOf(e);-1!==e&&(t=n.slice(),n.splice(e,1),this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:n}))},wi.prototype.get=function(){return this._selectedElements},wi.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},wi.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice(),i=(X(e)||(e=e?[e]:[]),this._canvas),o=i.getRootElement();e=e.filter(function(e){e=i.findRoot(e);return o===e}),t?g(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var _i="selected";function xi(n,e,t){this._canvas=n;var r=this;function i(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){i(e.element,"hover")}),e.on("element.out",function(e){o(e.element,"hover")}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;g(t,function(e){-1===n.indexOf(e)&&o(e,_i)}),g(n,function(e){-1===t.indexOf(e)&&i(e,_i)}),r._updateSelectionOutline(n)}),e.on("element.changed",function(e){t.isSelected(e.element)&&r._updateSelectionOutline(t.get())})}function ki(e,o,a,r){e.on("create.end",500,function(e){var e=e.context,t=e.canExecute,n=e.elements,e=(e.hints||{}).autoSelect;t&&!1!==e&&(X(e)?o.select(e):o.select(n.filter(Ei)))}),e.on("connect.end",500,function(e){e=e.context.connection;e&&o.select(e)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=r.get(e.context.shape.id);ee(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){if(fi(e)){var t,n=e.element,r=(n===a.getRootElement()&&(n=null),o.isSelected(n)),i=1<o.get().length,e=di(e)||(t=ui(e=e)||e,fi(e)&&t.shiftKey);if(r&&i)return e?o.deselect(n):o.select(n);r?o.deselect(n):o.select(n,e)}})}function Ei(e){return!e.hidden}xi.$inject=["canvas","eventBus","selection"],xi.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline"),n=(qn(t),1<e.length);Fn(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n&&(e={x:(n=ur(e)).x-6,y:n.y-6,width:n.width+12,height:n.height+12},x(n=k("rect"),w({rx:3},e)),Fn(n).add("djs-selection-outline"),_(t,n))},ki.$inject=["eventBus","selection","canvas","elementRegistry"];vi={__init__:["selectionVisuals","selectionBehavior"],__depends__:[vi,bi],selection:["type",wi],selectionVisuals:["type",xi],selectionBehavior:["type",ki]};function Ci(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}Ci.prototype.next=function(){return this._prefix+ ++this._counter};var Oi=new Ci("ov");function v(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=Oi,this._overlayDefaults=w({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(t=n.getContainer(),Jt(r=hn('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),t.insertBefore(r,t.firstChild),r),this._init()}function Si(e,t,n){Jt(e,{left:t+"px",top:n+"px"})}function ji(e,t){e.style.display=!1===t?"none":""}function Ni(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}v.$inject=["config.overlays","eventBus","canvas","elementRegistry"],v.prototype.get=function(e){var t;return J(e)&&(e={id:e}),J(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element?(t=this._getOverlayContainer(e.element,!0))?e.type?te(t.overlays,ie({type:e.type})):t.overlays.slice():[]:e.type?te(this._overlays,ie({type:e.type})):e.id?this._overlays[e.id]:null},v.prototype.add=function(e,t,n){if(Y(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");var r;if(e)return r=this._ids.next(),n=w({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r;throw new Error("invalid element specified")},v.prototype.remove=function(e){var e=this.get(e)||[],n=(X(e)||(e=[e]),this);g(e,function(e){var t=n._getOverlayContainer(e.element,!0);e&&(yn(e.html),yn(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t&&-1!==(e=t.overlays.indexOf(e))&&t.overlays.splice(e,1)})},v.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},v.prototype.show=function(){ji(this._overlayRoot)},v.prototype.hide=function(){ji(this._overlayRoot,!1)},v.prototype.clear=function(){this._overlays={},this._overlayContainers=[],on(this._overlayRoot)},v.prototype._updateOverlayContainer=function(e){var t,n=e.element,r=e.html,i=n.x,o=n.y;n.waypoints&&(i=(t=ur(n)).x,o=t.y),Si(r,i,o),en(e.html,"data-container-id",n.id)},v.prototype._updateOverlay=function(e){var t,n=e.position,r=e.htmlContainer,i=e.element,o=n.left,a=n.top;void 0!==n.right&&(t=(i.waypoints?ur(i):i).width,o=-1*n.right+t),void 0!==n.bottom&&(t=(i.waypoints?ur(i):i).height,a=-1*n.bottom+t),Si(r,o||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},v.prototype._createOverlayContainer=function(e){var t=hn('<div class="djs-overlays" />'),t=(Jt(t,{position:"absolute"}),this._overlayRoot.appendChild(t),{html:t,element:e,overlays:[]});return this._updateOverlayContainer(t),this._overlayContainers.push(t),t},v.prototype._updateRoot=function(e){var t=e.scale||1,e="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Ni(this._overlayRoot,e)},v.prototype._getOverlayContainer=function(t,e){var n=ee(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},v.prototype._addOverlay=function(e){var t,n,r=e.id,i=e.element,o=e.html,o=(J(o=o.get&&o.constructor.prototype.jquery?o.get(0):o)&&(o=hn(o)),n=this._getOverlayContainer(i),Jt(t=hn('<div class="djs-overlay" data-overlay-id="'+r+'">'),{position:"absolute"}),t.appendChild(o),e.type&&nn(t).add("djs-overlay-"+e.type),this._canvas.findRoot(i));ji(t,o===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[r]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},v.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,o=n&&n.maxZoom,a=!0;ji(e.htmlContainer,a=r!==this._canvas.getRootElement()||n&&(K(i)&&i>t.scale||K(o)&&o<t.scale)?!1:a),this._updateOverlayScale(e,t)},v.prototype._updateOverlayScale=function(e,t){var n,r,i=e.scale,e=e.htmlContainer,o="";!0!==i&&(i=!1===i?n=1:(n=i.min,i.max),K(n)&&t.scale<n&&(r=(1/t.scale||1)*n),K(i))&&t.scale>i&&(r=(1/t.scale||1)*i),Ni(e,o=K(r)?"scale("+r+","+r+")":o)},v.prototype._updateOverlaysVisibilty=function(t){var n=this;g(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},v.prototype._init=function(){var e=this._eventBus,n=this;e.on("canvas.viewbox.changing",function(e){n.hide()}),e.on("canvas.viewbox.changed",function(e){e=e.viewbox,n._updateRoot(e),n._updateOverlaysVisibilty(e),n.show()}),e.on(["shape.remove","connection.remove"],function(e){var e=e.element,e=(g(n.get({element:e}),function(e){n.remove(e.id)}),n._getOverlayContainer(e));e&&(yn(e.html),-1!==(e=n._overlayContainers.indexOf(e)))&&n._overlayContainers.splice(e,1)}),e.on("element.changed",500,function(e){e=e.element,e=n._getOverlayContainer(e,!0);e&&(g(e.overlays,function(e){n._updateOverlay(e)}),n._updateOverlayContainer(e))}),e.on("element.marker.update",function(e){var t=n._getOverlayContainer(e.element,!0);t&&nn(t.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){n._updateOverlaysVisibilty(n._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};bi={__init__:["overlays"],overlays:["type",v]};function Mi(e,t,n){this._eventBus=e,this._canvas=t,this._translate=n,e.on("diagram.init",function(){this._init()},this),e.on("import.done",function(e){e.error||this.update()},this),this.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="'+this._translate("Definition Name")+'" spellcheck="false"></div><div class="dmn-definitions-id" title="'+this._translate("Definition ID")+'" spellcheck="false"></div></div>'}function Di(e,n){function t(e,t){nn(n.getContainer()).toggle(e,t)}e.on("palette.create",function(){t("with-palette",!0)}),e.on("palette.changed",function(e){t("with-palette-two-column",e.twoColumn)})}Mi.$inject=["eventBus","canvas","translate"],Mi.prototype._init=function(){var e=this._canvas,t=this._eventBus,e=e.getContainer(),n=this._container=hn(this.HTML_MARKUP);e.appendChild(n),this.nameElement=mn(".dmn-definitions-name",this._container),this.idElement=mn(".dmn-definitions-id",this._container),dn.bind(n,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(e){e.stopPropagation()}),t.fire("definitionIdView.create",{html:n})},Mi.prototype.update=function(){var e=this._canvas.getRootElement().businessObject;this.nameElement.textContent=e.name,this.idElement.textContent=e.id},Di.$inject=["eventBus","canvas"];var Pi={__depends__:[ci],__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",Mi],definitionPropertiesPaletteAdapter:["type",Di]},Ri=[{className:"dmn-icon-decision-table",matches:function(e){e=e.businessObject;return E(e,"dmn:Decision")&&E(e.decisionLogic,"dmn:DecisionTable")}},{className:"dmn-icon-literal-expression",matches:function(e){e=e.businessObject;return E(e,"dmn:Decision")&&E(e.decisionLogic,"dmn:LiteralExpression")}}],Ai=function(){function i(e,t,n,r){var o=this;s(this,i),this._injector=e,this._eventBus=t,this._overlays=n,this._config=r||{enabled:!0},t.on(["shape.added"],function(e){for(var t=e.element,n=0;n<Ri.length;n++){var r=Ri[n],i=r.matches,r=r.className;i&&i(t)&&o.addOverlay(t,r)}})}return l(i,[{key:"addOverlay",value:function(e,t){var t=hn('\n      <div class="drill-down-overlay">\n        <span class="'.concat(t,'"></span>\n      </div>\n    ')),n=this._overlays.add(e,{position:{top:2,left:2},html:t});!1!==this._config.enabled&&(nn(t).add("interactive"),this.bindEventListener(e,t,n))}},{key:"bindEventListener",value:function(e,t,n){var r=this,i=this._overlays,o=this._eventBus,i=i._overlayRoot;dn.bind(i,'[data-overlay-id="'+n+'"]',"click",function(){!1!==o.fire("drillDown.click",{element:e})&&r.drillDown(e)})}},{key:"drillDown",value:function(e){var t=this._injector.get("_parent",!1);return!!t&&!!(e=t.getView(e.businessObject))&&(t.open(e),!0)}}]),i}(),Ai=(Ai.$inject=["injector","eventBus","overlays","config.drillDown"],{__depends__:[bi],__init__:["drillDown"],drillDown:["type",Ai]}),Bi='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="#000000" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="#000000" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function Ii(e){return e.join(";")}var Ti,Li='<div class="bjs-powered-by-lightbox" style="'+Ii(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Ii(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+Ii(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;">'+Bi+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';var $i=["additionalModules","canvas"];function Vi(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function zi(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vi(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],(e=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Vi(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Ui(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function b(e){
/**
   * Adds the project logo to the diagram container as
   * required by the bpmn.io license.
   *
   * @see http://bpmn.io/license
   *
   * @param {Element} container
   */
var t,n;this._container=this._createContainer(),t=this._container,n=hn('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100;">'+Bi+"</a>"),t.appendChild(n),un.bind(n,"click",function(e){Ti||(Ti=hn(Li),dn.bind(Ti,".backdrop","click",function(e){document.body.removeChild(Ti)})),document.body.appendChild(Ti),e.preventDefault()}),this._init(this._container,e)}In(b,Vr),b.prototype.saveSVG=vn(function(e){var i=this;return new Promise(function(e){var t=i.get("canvas"),n=t.getActiveLayer(),t=mn("defs",t._svg),r=function(e,t){if(void 0===t)return ir(e);try{rr(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}(n),t=t&&t.outerHTML||"",n=n.getBBox();e({svg:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+n.width+'" height="'+n.height+'" viewBox="'+n.x+" "+n.y+" "+n.width+" "+n.height+'" version="1.1">'+t+r+"</svg>"})})}),b.prototype.getModules=function(){return this._modules},b.prototype.destroy=function(){Vr.prototype.destroy.call(this),yn(this._container)},b.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)},b.prototype.off=function(e,t){this.get("eventBus").off(e,t)},b.prototype._init=function(e,t){var n=t.additionalModules,r=t.canvas,i=Ui(t,$i),o=t.modules||this.getModules(),o=[].concat([{drd:["value",this]}],p(o),p(n||[])),n=zi(zi({},i),{},{canvas:zi(zi({},r),{},{container:e}),modules:o});Vr.call(this,n),t&&t.container&&this.attachTo(t.container)},b.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},b.prototype._createContainer=function(){return hn('<div class="dmn-drd-container"></div>')},b.prototype.open=function(e){var i=this;return new Promise(function(n,r){var t;try{return i._definitions&&i.clear(),i._definitions=e,Gr(i,e,function(e,t){e?(e.warnings=t||[],r(e)):n({warnings:t||[]})})}catch(e){t=e}t?(t.warnings=t.warnings||[],r(t)):n({warnings:[]})})},b.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{}),this.get("canvas").resized()},b.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},b.prototype._modules=[e,ci,vi,bi,Pi,Ai];var Fi=l(function e(t){s(this,e),w(this,t),Wi(this,"businessObject",{writable:!0})}),Gi={root:function(){o(n,Fi);var t=c(n);function n(e){return s(this,n),Wi(a(e=t.call(this,e)),"rows",{enumerable:!0,value:e.rows||[]}),Wi(a(e),"cols",{enumerable:!0,value:e.cols||[]}),e}return l(n)}(),row:function(){o(n,Fi);var t=c(n);function n(e){return s(this,n),Wi(a(e=t.call(this,e)),"root",{writable:!0}),Wi(a(e),"cells",{enumerable:!0,value:e.cells||[]}),e}return l(n)}(),col:function(){o(n,Fi);var t=c(n);function n(e){return s(this,n),Wi(a(e=t.call(this,e)),"root",{writable:!0}),Wi(a(e),"cells",{enumerable:!0,value:e.cells||[]}),e}return l(n)}(),cell:function(){o(n,Fi);var t=c(n);function n(e){return s(this,n),Wi(a(e=t.call(this,e)),"row",{writable:!0}),Wi(a(e),"col",{writable:!0}),e}return l(n)}()};function Wi(e,t,n){Object.defineProperty(e,t,n)}e=function(){function e(){s(this,e),this._uid=12}return l(e,[{key:"create",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(t.id||(t.id=e+"_"+this._uid++),Gi[e]);if(n)return new n(t);throw new Error("unknown type "+e)}},{key:"createRoot",value:function(e){return this.create("root",e)}},{key:"createRow",value:function(e){return this.create("row",e)}},{key:"createCol",value:function(e){return this.create("col",e)}},{key:"createCell",value:function(e){return this.create("cell",e)}}]),e}(),vi=function(){function t(e){s(this,t),this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}return l(t,[{key:"add",value:function(e,t){var n=e.id;this._elements[n]=e}},{key:"remove",value:function(e){e=e.id||e;delete this._elements[e]}},{key:"get",value:function(e){return this._elements[e]}},{key:"getAll",value:function(){return qi(this._elements)}},{key:"forEach",value:function(t){qi(this._elements).forEach(function(e){return t(e)})}},{key:"filter",value:function(t){return qi(this._elements).filter(function(e){return t(e)})}},{key:"clear",value:function(){this._elements={}}},{key:"updateId",value:function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}},{key:"_validateId",value:function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}}]),t}();function qi(t){return Object.keys(t).map(function(e){return t[e]})}vi.$inject=["eventBus"];var bi=function(){function e(n){var r=this;s(this,e),this._listeners={},n.on("elements.changed",function(e){e=e.elements;r.elementsChanged(e)}),n.on("root.remove",function(e){var t=e.root.id;r._listeners[t]&&n.once("root.add",function(e){e=e.root.id;r.updateId(t,e)})}),n.on("element.updateId",function(e){var t=e.element,e=e.newId;r.updateId(t.id,e)})}return l(e,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,r=0;r<n;r++){var i=e[r].id;if(t[i])return;t[i]=!0;var o=this._listeners[i]&&this._listeners[i].length;if(o)for(var a=0;a<o;a++)this._listeners[i][a]&&this._listeners[i][a]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){this._listeners[e]&&(t?-1!==(t=this._listeners[e].indexOf(t))&&this._listeners[e].splice(t,1):this._listeners[e].length=0)}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),e}(),Pi=(bi.$inject=["eventBus"],function(){function e(){s(this,e),this._listeners={}}return l(e,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var r,i=0;i<n.length&&!(r=n[i].callback(t));i++);return r}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e],r=[];if(n)for(var i=0;i<n.length;i++){var o=n[i].callback(t);o&&r.push(o)}return r}},{key:"onGetComponent",value:function(e,t,n){if(Z(t)&&(n=t,t=1e3),!Q(t))throw new Error("priority must be a number");for(var r,i=this._getListeners(e),o={priority:t,callback:n},a=0;r=i[a];a++)if(r.priority<t)return void i.splice(a,0,o);i.push(o)}},{key:"offGetComponent",value:function(e,t){var n,r,i=this._getListeners(e);if(t)for(r=i.length-1;n=i[r];r--)n.callback===t&&i.splice(r,1);else i.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),e}()),Hi="$NO_OP",Ki="a runtime error occured! Use Inferno in development environment to find the error.",Ai=!("undefined"==typeof window||!window.document),Xi=Array.isArray;function Yi(e){e=m(e);return"string"===e||"number"===e}function S(e){return eo(e)||C(e)}function Qi(e){return C(e)||!1===e||!0===e||eo(e)}function j(e){return"function"==typeof e}function Zi(e){return"string"==typeof e}function Ji(e){return"number"==typeof e}function C(e){return null===e}function eo(e){return void 0===e}function N(e){throw e=e||Ki,new Error("Inferno Error: "+e)}function to(e){console.error(e)}function no(e,t){var n={};if(e)for(var r in e)n[r]=e[r];if(t)for(var i in t)n[i]=t[i];return n}function ro(e){var t;return">> "+(Xi(e)?"Array("+(3<e.length?e.slice(0,3).toString()+",...":e.toString())+")":Yi(e)?"Text("+e+")":Qi(e)?"InvalidVNode("+e+")":481&(t=e.flags)?"<"+e.type+(e.className?' class="'+e.className+'"':"")+">":16&t?"Text("+e.children+")":1024&t?"Portal*":"<"+((t=e.type).name||t.displayName||t.constructor.name||(t.toString().match(/^function\s*([^\s(]+)/)||[])[1])+" />")+"\n"}function io(e){var t;1&e.childFlags||(64&e.flags&&N("input elements can't have children."),128&e.flags&&N("textarea elements can't have children."),481&e.flags&&(t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],"media"===(e=e.type.toLowerCase())&&N("media elements can't have children."),-1!==(e=t.indexOf(e)))&&N(t[e]+" elements can't have children."))}function oo(e){var t;!1===e.isValidated&&e.children&&481&e.flags&&(t=function e(t,n){for(var r={},i=0,o=t.length;i<o;i++){var a=t[i];if(Xi(a))return"Encountered ARRAY in mount, array must be flattened, or normalize used. Location: \n"+ro(a);if(Qi(a)){if(n)return"Encountered invalid node when preparing to keyed algorithm. Location: \n"+ro(a);if(0!==Object.keys(r).length)return"Encountered invalid node with mixed keys. Location: \n"+ro(a)}else{"object"===m(a)&&(a.isValidated=!0);var s=a.key;if(!S(s)&&!Yi(s))return"Encountered child vNode where key property is not string or number. Location: \n"+ro(a);var l=a.children,c=a.childFlags;if(!Qi(l)){var u=void 0;if(12&c?u=e(l,8&a.childFlags):2===c&&(u=e([l],8&a.childFlags)),u)return u+=ro(a)}if(n&&S(s))return"Encountered child without key during keyed algorithm. If this error points to Array make sure children is flat list. Location: \n"+ro(a);if(!n&&S(s)){if(0!==Object.keys(r).length)return"Encountered children with key missing. Location: \n"+ro(a)}else{if(r[s])return"Encountered two children with same key: {"+s+"}. Location: \n"+ro(a);r[s]=!0}}}}(Array.isArray(e.children)?e.children:[e.children],0<(8&e.childFlags)))&&N(t+ro(e)),e.isValidated=!0}var ao="$";function so(e,t,n,r,i,o,a,s){return{childFlags:e,children:t,className:n,dom:null,flags:r,isValidated:!1,key:void 0===i?null:i,parentVNode:null,props:void 0===o?null:o,ref:void 0===a?null:a,type:s}}function O(e,t,n,r,i,o,a,s){14&e&&N("Creating Component vNodes using createVNode is not allowed. Use Inferno.createComponentVNode method.");i=void 0===i?1:i,r=so(i,r,n,e,a,o,s,t),n=fo.createVNode;return"function"==typeof n&&n(r),0===i&&po(r,r.children),io(r),r}function M(e,t,n,r,i){1&e&&N("Creating element vNodes using createComponentVNode is not allowed. Use Inferno.createVNode method."),0<(2&e)&&(e=t.prototype&&j(t.prototype.render)?4:8);var o=t.defaultProps;if(!S(o))for(var a in n=n||{},o)eo(n[a])&&(n[a]=o[a]);if(0<(8&e)){var s=t.defaultHooks;if(!S(s))if(i)for(var l in s)eo(i[l])&&(i[l]=s[l]);else i=s}e=so(1,null,null,e,r,n,i,t),r=fo.createVNode;return j(r)&&r(e),e}function lo(e,t){return so(1,S(e)?"":e,null,16,t,null,null,null)}function co(e){var t,n=e.props;return n&&(481&(t=e.flags)&&(void 0!==n.children&&S(e.children)&&po(e,n.children),void 0!==n.className)&&(e.className=n.className||null,n.className=void 0),void 0!==n.key&&(e.key=n.key,n.key=void 0),void 0!==n.ref)&&(e.ref=8&t?no(e.ref,n.ref):n.ref,n.ref=void 0),e}function q(e){var t,n=e.flags;if(14&n){var r,i=e.props;if(!C(i))for(var o in r={},i)r[o]=i[o];t=M(n,e.type,r,e.key,e.ref)}else 481&n?t=O(n,e.type,e.className,e.children,e.childFlags,e.props,e.key,e.ref):16&n?t=lo(e.children,e.key):1024&n&&(t=e);return t}function uo(){return lo("",null)}function po(e,t){var n,r=1;if(Qi(t))n=t;else if(Zi(t))r=2,n=lo(t);else if(Ji(t))r=2,n=lo(t+"");else if(Xi(t)){var i=t.length;if(0===i)n=null,r=1;else{!Object.isFrozen(t)&&!0!==t.$||(t=t.slice());for(var r=8,o=0;o<i;o++){var a,s,l,c=t[o];if(Qi(c)||Xi(c)){n=n||t.slice(0,o),!function e(t,n,r,i){for(var o=t.length;r<o;r++){var a,s,l,c=t[r];Qi(c)||(a=i+ao+r,Xi(c)?e(c,n,0,a):(Yi(c)?c=lo(c,a):(l=Zi(s=c.key)&&s[0]===ao,C(c.dom)&&!l||(c=q(c)),C(s)||l?c.key=a:c.key=i+s),n.push(c)))}}(t,n,o,"");break}Yi(c)?(n=n||t.slice(0,o)).push(lo(c,ao+o)):(l=c.key,a=C(c.dom),l=!(s=C(l))&&Zi(l)&&l[0]===ao,!a||s||l?(n=n||t.slice(0,o),a&&!l||(c=q(c)),(s||l)&&(c.key=ao+o),n.push(c)):n&&n.push(c))}(n=n||t).$=!0}}else C((n=t).dom)||(n=q(t)),r=2;e.children=n,e.childFlags=r,io(e)}var fo={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},D="http://www.w3.org/1999/xlink",ho="http://www.w3.org/XML/1998/namespace",mo="http://www.w3.org/2000/svg",yo={"xlink:actuate":D,"xlink:arcrole":D,"xlink:href":D,"xlink:role":D,"xlink:show":D,"xlink:title":D,"xlink:type":D,"xml:base":ho,"xml:lang":ho,"xml:space":ho},P={},vo=[];function go(e,t){e.appendChild(t)}function bo(e,t,n){S(n)?go(e,t):e.insertBefore(t,n)}function wo(e,t,n){e.replaceChild(t,n)}function _o(e){for(var t;void 0!==(t=e.shift());)t()}Object.freeze(P);var xo={},ko={};function Eo(e,t,n){var c,r=xo[e],i=n.$EV;function o(e){var t=e.type;if((t="click"===t||"dblclick"===t)&&0!==e.button)return e.stopPropagation(),!1;e.stopPropagation=Oo;for(var n={dom:document},r=(Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return n.dom}}),e),e=e.target,i=t,o=c,a=n,s=e;!C(s);){if(i&&s.disabled)return;var l=s.$EV;if(l){l=l[o];if(l&&(a.dom=s,l.event?l.event(l.data,r):l(r),r.cancelBubble))return}s=s.parentNode}}t?(r||(ko[e]=(c=e,document.addEventListener(Co(c),o),o),xo[e]=0),(i=i||(n.$EV={}))[e]||xo[e]++,i[e]=t):i&&i[e]&&(xo[e]--,1===r&&(document.removeEventListener(Co(e),ko[e]),ko[e]=null),i[e]=t)}function Co(e){return e.substr(2).toLowerCase()}function Oo(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function So(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function jo(e,t,n){var r;e[t]?(r=e[t]).event?r.event(r.data,n):r(n):e[r=t.toLowerCase()]&&e[r](n)}function No(a,s){function e(e){if(e.stopPropagation(),i=this.$V){var t,n,r=i.props||P,i=i.dom;if(Zi(a))jo(r,a,e);else for(var o=0;o<a.length;o++)jo(r,a[o],e);j(s)&&(n=(t=this.$V).props||P,s(n,i,!1,t))}}return Object.defineProperty(e,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),e}function Mo(e){return"checkbox"===e||"radio"===e}var Do=No("onInput",Ao),Po=No(["onClick","onChange"],Ao);function Ro(e){e.stopPropagation()}function Ao(e,t){var n=e.type,r=e.value,i=e.checked,o=e.multiple,e=e.defaultValue,a=!S(r);n&&n!==t.type&&t.setAttribute("type",n),S(o)||o===t.multiple||(t.multiple=o),S(e)||a||(t.defaultValue=e+""),Mo(n)?(a&&(t.value=r),S(i)||(t.checked=i)):a&&t.value!==r?(t.defaultValue=r,t.value=r):S(i)||(t.checked=i)}function Bo(e,t){if("optgroup"===e.type){var n=e.children,r=e.childFlags;if(12&r)for(var i=0,o=n.length;i<o;i++)Io(n[i],t);else 2===r&&Io(n,t)}else Io(e,t)}function Io(e,t){var n=e.props||P,e=e.dom;e.value=n.value,Xi(t)&&-1!==t.indexOf(n.value)||n.value===t?e.selected=!0:S(t)&&S(n.selected)||(e.selected=n.selected||!1)}Ro.wrapped=!0;var To=No("onChange",Lo);function Lo(e,t,n,r){var i=Boolean(e.multiple),t=(S(e.multiple)||i===t.multiple||(t.multiple=i),r.childFlags);if(0==(1&t)){var o=r.children,a=e.value;if(n&&S(a)&&(a=e.defaultValue),12&t)for(var s=0,l=o.length;s<l;s++)Bo(o[s],a);else 2===t&&Bo(o,a)}}var $o=No("onInput",zo),Vo=No("onChange");function zo(e,t,n){var r=e.value,i=t.value;S(r)?n&&!S(n=e.defaultValue)&&n!==i&&(t.defaultValue=n,t.value=n):i!==r&&(t.defaultValue=r,t.value=r)}function Uo(e,t,n,r,i,o){64&e?Ao(r,n):256&e?Lo(r,n,i,t):128&e&&zo(r,n,i),o&&(n.$V=t)}function Fo(e,t,n){var r;64&e?(r=t,Mo(n.type)?(r.onchange=Po,r.onclick=Ro):r.oninput=Do):256&e?t.onchange=To:128&e&&(r=n,(e=t).oninput=$o,r.onChange)&&(e.onchange=Vo)}function Go(e){return e.type&&Mo(e.type)?!S(e.checked):!S(e.value)}function Wo(e,t){var n;qo(e),t&&e.dom&&(n=e.dom,t.removeChild(n),e.dom=null)}function qo(e){var t=e.flags;if(481&t){var n=e.ref,r=e.props,n=(j(n)&&n(null),e.children),i=e.childFlags;if(12&i?Ho(n):2===i&&qo(n),!C(r))for(var o in r)switch(o){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Eo(o,null,e.dom)}}else{i=e.children;i&&(14&t?(n=e.ref,4&t?(j(i.componentWillUnmount)&&i.componentWillUnmount(),j(n)&&n(null),i.$UN=!0,i.$LI&&qo(i.$LI)):(!S(n)&&j(n.onComponentWillUnmount)&&n.onComponentWillUnmount(e.dom,e.props||P),qo(i))):1024&t&&Wo(i,e.type))}}function Ho(e){for(var t=0,n=e.length;t<n;t++)qo(e[t])}function Ko(e,t){Ho(t),e.textContent=""}function Xo(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function Yo(e,t,n,r,i,o,a){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Eo(e,n,r);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":r.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":r[e]=!!n;break;case"defaultChecked":case"value":case"volume":o&&"value"===e||(s=S(n)?"":n,r[e]!==s&&(r[e]=s));break;case"dangerouslySetInnerHTML":var s=t&&t.__html||"",l=n&&n.__html||"";s===l||S(l)||So(r,l)||(C(a)||(12&a.childFlags?Ho(a.children):2===a.childFlags&&qo(a.children),a.children=null,a.childFlags=1),r.innerHTML=l);break;default:if("o"===e[0]&&"n"===e[1])s=n,l=r,g=(h=e).toLowerCase(),j(s)||S(s)?(m=l[g])&&m.wrapped||(l[g]=s):(m=s.event)&&j(m)?l[g]=(y=m,v=s,function(e){y(v.data,e)}):N('an event on a VNode "'+h+'". was not a function or a valid linkEvent.');else if(S(n))r.removeAttribute(e);else if("style"===e){var c,u,p=t,f=n,d=r.style;if(Zi(f))d.cssText=f;else if(S(p)||Zi(p))for(c in f)u=f[c],d[c]=Ji(u)?Xo(c,u):u;else{for(c in f)(u=f[c])!==p[c]&&(d[c]=Ji(u)?Xo(c,u):u);for(c in p)S(f[c])&&(d[c]="")}}else i&&yo[e]?r.setAttributeNS(yo[e],e,n):r.setAttribute(e,n)}var h,m,y,v,g}function Qo(e,t,n,r,i){var o,a=!1,s=0<(448&t);for(o in s&&(a=Go(n))&&Fo(t,r,n),n)Yo(o,null,n[o],r,i,a,null);s&&Uo(t,e,r,n,!0,a)}function Zo(e,t,n,r){t=new t(n,r);if((e.children=t).$V=e,t.$BS=!1,t.context=r,t.props===P&&(t.props=n),t.$UN=!1,j(t.componentWillMount)){if(t.$BR=!0,t.componentWillMount(),t.$PSS){var i=t.state,o=t.$PS;if(C(i))t.state=o;else for(var a in o)i[a]=o[a];t.$PSS=!1,t.$PS=null}t.$BR=!1}j(fo.beforeRender)&&fo.beforeRender(t);var s,n=Jo(t.render(n,t.state,r),e);return S(s=j(t.getChildContext)?t.getChildContext():s)?t.$CX=r:t.$CX=no(r,s),j(fo.afterRender)&&fo.afterRender(t),t.$LI=n,t}function Jo(e,t){return Xi(e)&&N("a valid Inferno VNode (or null) must be returned from a component render. You may have returned an array or an invalid object."),Qi(e)?e=uo():Yi(e)?e=lo(e,null):14&(e=e.dom?q(e):e).flags&&(e.parentVNode=t),e}function H(e,t,n,r){var i,o,a,s,l,c,u,p,f=e.flags;return 481&f?ta(e,t,n,r):14&f?(o=t,a=n,r=r,s=0<(4&f),c=(i=e).type,u=i.props||P,p=i.ref,s?(s=Zo(i,c,u,a),i.dom=l=H(s.$LI,null,s.$CX,r),ra(i,p,s),s.$UPD=!1):(s=Jo(c(u,a),i),i.children=s,i.dom=l=H(s,null,a,r),ia(u,p,l)),C(o)||go(o,l),l):512&f||16&f?ea(e,t):1024&f?(H(e.children,e.type,n,!1),e.dom=ea(uo(),t)):void("object"===m(e)?N("mount() received an object that's not a valid VNode, you should stringify it first, fix createVNode flags or call normalizeChildren. Object: \""+JSON.stringify(e)+'".'):N('mount() expects a valid VNode, instead it received an object with the type "'+m(e)+'".'))}function ea(e,t){e=e.dom=document.createTextNode(e.children);return C(t)||go(t,e),e}function ta(e,t,n,r){var i=e.flags,o=e.children,a=e.props,s=e.className,l=e.ref,c=e.childFlags,u=(r=r||0<(32&i),u=e.type,r?document.createElementNS(mo,u):document.createElement(u));return e.dom=u,S(s)||""===s||(r?u.setAttribute("class",s):u.className=s),oo(e),C(t)||go(t,u),0==(1&c)&&(s=!0===r&&"foreignObject"!==e.type,2===c?H(o,u,n,s):12&c&&na(o,u,n,s)),C(a)||Qo(e,i,a,u,r),Zi(l)&&N('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'),j(l)&&oa(u,l),u}function na(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i];C(a.dom)||(e[i]=a=q(a)),H(a,t,n,r)}}function ra(e,t,n){var r;j(t)?t(n):Yi(t)?N('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'):!S(t)&&"object"===m(t)&&4&e.flags&&N("functional component lifecycle events are not supported on ES2015 class components."),j(n.componentDidMount)&&vo.push((r=n,function(){r.$UPD=!0,r.componentDidMount(),r.$UPD=!1}))}function ia(e,t,n){var r,i,o;S(t)||(j(t.onComponentWillMount)&&t.onComponentWillMount(e),j(t.onComponentDidMount)&&vo.push((r=t,i=n,o=e,function(){return r.onComponentDidMount(i,o)})))}function oa(e,t){vo.push(function(){return t(e)})}function aa(e,t,n,r){var i,o=e.children,a=e.props,s=e.className,l=e.flags,c=e.ref;if(r=r||0<(32&l),1!==t.nodeType||t.tagName.toLowerCase()!==e.type){to("Inferno hydration: Server-side markup doesn't match client-side markup or Initial render target is not empty");var u=ta(e,null,n,r);e.dom=u,wo(t.parentNode,u,t)}else{var p=(e.dom=t).firstChild,u=e.childFlags;if(0==(1&u)){for(var f=null;p;)f=p.nextSibling,8===p.nodeType&&("!"===p.data?t.replaceChild(document.createTextNode(""),p):t.removeChild(p)),p=f;if(p=t.firstChild,2===u)C(p)?H(o,t,n,r):(f=p.nextSibling,sa(o,p,n,r),p=f);else if(12&u)for(var d=0,h=o.length;d<h;d++){var m=o[d];C(p)?H(m,t,n,r):(f=p.nextSibling,sa(m,p,n,r),p=f)}for(;p;)f=p.nextSibling,t.removeChild(p),p=f}else C(t.firstChild)||(u=t,i=a,Boolean(i&&i.dangerouslySetInnerHTML&&i.dangerouslySetInnerHTML.__html&&So(u,i.dangerouslySetInnerHTML.__html)))||(t.textContent="",448&l&&(t.defaultValue=""));C(a)||Qo(e,l,a,t,r),S(s)?""!==t.className&&t.removeAttribute("class"):r?t.setAttribute("class",s):t.className=s,j(c)?oa(t,c):Zi(c)&&N('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}function sa(e,t,n,r){var i,o,a,s,l,c,u,p,f,d,h=e.flags;14&h?(a=t,s=n,l=r,c=0<(4&h),p=(o=e).type,f=o.ref,d=o.props||P,c?(sa(u=(c=Zo(o,p,d,s)).$LI,a,c.$CX,l),o.dom=u.dom,ra(o,f,c),c.$UPD=!1):(sa(u=Jo(p(d,s),o),a,s,l),o.children=u,o.dom=u.dom,ia(d,f,a))):481&h?aa(e,t,n,r):16&h?(c=e,3!==(p=t).nodeType?(i=ea(c,null),c.dom=i,wo(p.parentNode,i,p)):(i=c.children,p.nodeValue!==i&&(p.nodeValue=i),c.dom=p)):512&h?e.dom=t:(N('hydrate() expects a valid VNode, instead it received an object with the type "'+m(e)+'".'),N())}function la(e,t,n,r,i){qo(e),wo(n,H(t,null,r,i),e.dom)}function ca(e,t,n,r,i){var o,a=0|t.flags;if(e.flags!==a||2048&a)la(e,t,n,r,i);else if(481&a){var s,l=e,c=t,u=n,p=r,f=i,d=a,h=c.type;if(l.type!==h)la(l,c,u,p,f);else{var m=l.dom,u=l.props,y=c.props,v=!1,g=!1;if(c.dom=m,f=f||0<(32&d),u!==y){var b=u||P;if((s=y||P)!==P)for(var w in(v=0<(448&d))&&(g=Go(s)),s){var _=b[w],x=s[w];_!==x&&Yo(w,_,x,m,f,g,l)}if(b!==P)for(var k in b)s.hasOwnProperty(k)||S(b[k])||Yo(k,b[k],null,m,f,g,l)}var u=l.children,y=c.children,E=c.ref,C=l.className,O=c.className;oo(c),4096&d?function(e,t){e.textContent!==t.children&&(e.textContent=t.children)}(m,y):ua(l.childFlags,c.childFlags,u,y,m,p,f&&"foreignObject"!==h),v&&Uo(d,c,m,s,!1,g),C!==O&&(S(O)?m.removeAttribute("class"):f?m.setAttribute("class",O):m.className=O),j(E)&&l.ref!==E?oa(m,E):Zi(E)&&N('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}else 14&a?(u=e,y=n,p=r,h=i,v=0<(4&a),c=(d=t).type,C=u.key,O=d.key,u.type!==c||C!==O?la(u,d,y,p,h):(C=d.props||P,v?((O=u.children).$UPD=!0,O.$V=d,pa(O,O.state,d,C,y,p,h,!1,!1),O.$UPD=!1):(v=!0,O=u.props,E=d.ref,n=!S(E),i=u.children,d.dom=u.dom,d.children=i,!1!==(v=n&&j(E.onComponentShouldUpdate)?E.onComponentShouldUpdate(O,C):v)?(n&&j(E.onComponentWillUpdate)&&E.onComponentWillUpdate(O,C),(u=c(C,p))!==Hi&&(u=Jo(u,d),ca(i,u,y,p,h),d.children=u,d.dom=u.dom,n)&&j(E.onComponentDidUpdate)&&E.onComponentDidUpdate(O,C)):14&i.flags&&(i.parentVNode=d)))):16&a?(i=(n=t).children,o=e.dom,i!==e.children&&(o.nodeValue=i),n.dom=o):512&a?t.dom=e.dom:(i=t,n=r,a=(o=e).type,t=i.type,r=i.children,ua(o.childFlags,i.childFlags,o.children,r,a,n,!1),i.dom=o.dom,a===t||Qi(r)||(n=r.dom,a.removeChild(n),t.appendChild(n)))}function ua(I,e,t,n,r,i,o){switch(I){case 2:switch(e){case 2:ca(t,n,r,i,o);break;case 1:Wo(t,r);break;default:Wo(t,r),na(n,r,i,o)}break;case 1:switch(e){case 2:H(n,r,i,o);break;case 1:break;default:na(n,r,i,o)}break;default:if(12&e){var a=t.length,s=n.length;if(0===a)0<s&&na(n,r,i,o);else if(0===s)Ko(r,t);else if(8===e&&8===I){var l,c,u=t,p=n,f=r,d=i,h=o,T=a,m=s,y=T-1,v=m-1,g=0,b=u[g],w=p[g];e:{for(;b.key===w.key;){if(w.dom&&(p[g]=w=q(w)),ca(b,w,f,d,h),u[g]=w,y<++g||v<g)break e;b=u[g],w=p[g]}for(b=u[y],w=p[v];b.key===w.key;){if(w.dom&&(p[v]=w=q(w)),ca(b,w,f,d,h),u[y]=w,v--,--y<g||v<g)break e;b=u[y],w=p[v]}}if(y<g){if(g<=v)for(var L=(c=v+1)<m?p[c].dom:null;g<=v;)(w=p[g]).dom&&(p[g]=w=q(w)),g++,bo(f,H(w,null,d,h),L)}else if(v<g)for(;g<=y;)Wo(u[g++],f);else{var _=g,x=g,$=y-g+1,k=v-g+1,E=[];for(l=0;l<k;l++)E.push(0);var C=$===T,O=!1,S=0,j=0;if(m<4||($|k)<32)for(l=_;l<=y;l++)if(b=u[l],j<k){for(g=x;g<=v;g++)if(w=p[g],b.key===w.key){if(E[g-x]=l+1,C)for(C=!1;_<l;)Wo(u[_++],f);g<S?O=!0:S=g,w.dom&&(p[g]=w=q(w)),ca(b,w,f,d,h),j++;break}!C&&v<g&&Wo(b,f)}else C||Wo(b,f);else{var V={};for(l=x;l<=v;l++)V[p[l].key]=l;for(l=_;l<=y;l++)if(b=u[l],j<k)if(void 0!==(g=V[b.key])){if(C)for(C=!1;_<l;)Wo(u[_++],f);w=p[g],E[g-x]=l+1,g<S?O=!0:S=g,w.dom&&(p[g]=w=q(w)),ca(b,w,f,d,h),j++}else C||Wo(b,f);else C||Wo(b,f)}if(C)Ko(f,u),na(p,f,d,h);else if(O){var z=function(e){var t,n,r,i,o,a=e.slice(),s=[0],l=e.length;for(t=0;t<l;t++){var c=e[t];if(0!==c)if(n=s[s.length-1],e[n]<c)a[t]=n,s.push(t);else{for(r=0,i=s.length-1;r<i;)e[s[o=(r+i)/2|0]]<c?r=1+o:i=o;c<e[s[r]]&&(0<r&&(a[t]=s[r-1]),s[r]=t)}}r=s.length,i=s[r-1];for(;0<r--;)s[r]=i,i=a[i];return s}(E);for(g=z.length-1,l=k-1;0<=l;l--)0===E[l]?((w=p[S=l+x]).dom&&(p[S]=w=q(w)),c=S+1,bo(f,H(w,null,d,h),c<m?p[c].dom:null)):g<0||l!==z[g]?(w=p[S=l+x],c=S+1,bo(f,w.dom,c<m?p[c].dom:null)):g--}else if(j!==k)for(l=k-1;0<=l;l--)0===E[l]&&((w=p[S=l+x]).dom&&(p[S]=w=q(w)),c=S+1,bo(f,H(w,null,d,h),c<m?p[c].dom:null))}}else{for(var N,U,M=t,D=n,P=r,F=i,G=o,R=a,A=s,W=A<R?A:R,B=0;B<W;B++)N=D[B],U=M[B],N.dom&&(N=D[B]=q(N)),ca(U,N,P,F,G),M[B]=N;if(R<A)for(B=W;B<A;B++)H(N=(N=D[B]).dom?D[B]=q(N):N,P,F,G);else if(A<R)for(B=W;B<R;B++)Wo(M[B],P)}}else 1===e?Ko(r,t):2===e&&(Ko(r,t),H(n,r,i,o))}}function pa(e,t,n,r,i,o,a,s,l){var c=e.state,u=e.props;if((n.children=e).$UN)to("Inferno Error: Can only update a mounted or mounting component. This usually means you called setState() or forceUpdate() on an unmounted component. This is a no-op.");else{if(u!==r||r===P){if(!l&&j(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(r,o),e.$UN)return;e.$BR=!1}e.$PSS&&(t=no(t,e.$PS),e.$PSS=!1,e.$PS=null)}var p,l=Boolean(e.shouldComponentUpdate);s||!l||l&&e.shouldComponentUpdate(r,t,o)?(j(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(r,t,o),e.$BS=!1),e.props=r,e.state=t,e.context=o,j(fo.beforeRender)&&fo.beforeRender(e),s=e.render(r,t,o),j(fo.afterRender)&&fo.afterRender(e),l=s!==Hi,p=S(p=j(e.getChildContext)?e.getChildContext():p)?o:no(o,p),e.$CX=p,l&&(ca(e.$LI,l=Jo(s,n),i,p,a),e.$LI=l,j(e.componentDidUpdate))&&e.componentDidUpdate(u,c)):(e.props=r,e.state=t,e.context=o),n.dom=e.$LI.dom}}Ai&&null===document.body&&to('Inferno warning: you cannot initialize inferno without "document.body". Wait on "DOMContentLoaded" event, add script to bottom of body, or use async/defer attributes on script tag.');var fa=Ai?document.body:null;function da(e,t,n){if(fa===t&&N('you cannot render() to the "document.body". Use an empty element as a container instead.'),e!==Hi){var r=t.$V;if(S(r)){if(!Qi(e)){if(e.dom&&(e=q(e)),C(t.firstChild))H(e,t,P,!1),t.$V=e;else{var i=e,o=t,a=void 0,s=o.firstChild;if(!C(s))for(Qi(i)||sa(i,s,P,!1),s=o.firstChild;s=s.nextSibling;)o.removeChild(s);0<vo.length&&_o(vo),o.$V=i,j(a)&&a()}r=e}}else S(e)?(Wo(r,t),t.$V=null):(ca(r,e=e.dom?q(e):e,t,P,!1),r=t.$V=e);0<vo.length&&_o(vo),j(n)&&n(),j(fo.renderComplete)&&fo.renderComplete(r),r&&14&r.flags&&r.children}}var ha="undefined"==typeof Promise?null:Promise.resolve(),ma="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function ya(e,t,n,r){j(t)&&(t=t(e.state,e.props,e.context));var i,o,a,s=e.$PS;if(S(s))e.$PS=t;else for(var l in t)s[l]=t[l];e.$PSS||e.$BR?(e.$PSS=!0,e.$BR&&j(n)&&vo.push(n.bind(e))):e.$UPD?(C(i=e.$QU)&&(i=e.$QU=[],function(e){if(ha)return ha.then(e);ma(e)}((o=e,a=i,function(){o.$QU=null,o.$UPD=!0,va(o,!1,function(){for(var e=0,t=a.length;e<t;e++)a[e].call(o)}),o.$UPD=!1}))),j(n)&&i.push(n)):(e.$PSS=!0,e.$UPD=!0,va(e,r,n),e.$UPD=!1)}function va(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var r=e.$PS,r=no(e.state,r),i=e.props,o=e.context,a=(e.$PS=null,e.$V),s=e.$LI;if(pa(e,r,a,i,s.dom&&s.dom.parentNode,o,0<(32&a.flags),t,!0),e.$UN)return;if(0==(1024&e.$LI.flags))for(var l=e.$LI.dom;!C(a=a.parentVNode);)0<(14&a.flags)&&(a.dom=l);0<vo.length&&_o(vo)}else e.state=e.$PS,e.$PS=null;j(n)&&n.call(e)}}function R(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||P,this.context=t||P}function ga(){}R.prototype.forceUpdate=function(e){this.$UN||ya(this,{},e,!0)},R.prototype.setState=function(e,t){this.$UN||(this.$BS?N("cannot update state via setState() in componentWillUpdate() or constructor."):ya(this,e,t,!1))},R.prototype.render=function(e,t,n){};console.info("Inferno is in development mode."),-1===(ga.name||ga.toString()).indexOf("testFn")&&to("It looks like you're using a minified copy of the development build of Inferno. When deploying Inferno apps to production, make sure to use the production build which skips development warnings and is faster. See http://infernojs.org for more details.");var ba=function(){o(r,R);var n=c(r);function r(e){s(this,r);var t,e=(t=n.call(this,e))._injector=e.injector,e=(t._sheet=e.get("sheet"),t._changeSupport=e.get("changeSupport"),t._components=e.get("components"),t._eventBus=e.get("eventBus"),e.get("throttle"));return t.onElementsChanged=t.onElementsChanged.bind(a(t)),t.onScroll=e(t.onScroll.bind(a(t))),t}return l(r,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"onScroll",value:function(){this._eventBus.fire("sheet.scroll")}},{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}},{key:"componentWillMount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.onElementsChanged(e,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.offElementsChanged(e,this.onElementsChanged)}},{key:"render",value:function(){var e=this._sheet.getRoot(),t=e.rows,e=e.cols,n=this._components.getComponents("table.before"),r=this._components.getComponents("table.after"),i=this._components.getComponent("table.head"),o=this._components.getComponent("table.body"),a=this._components.getComponent("table.foot");return O(1,"div","tjs-container",[n&&n.map(function(e,t){return M(2,e,null,t)}),O(1,"div","tjs-table-container",O(1,"table","tjs-table",[i&&M(2,i,{rows:t,cols:e}),o&&M(2,o,{rows:t,cols:e}),a&&M(2,a,{rows:t,cols:e})],0),2,{onScroll:this.onScroll}),r&&r.map(function(e,t){return M(2,e,null,t)})],0)}}]),r}(),D=function(){function a(e,t,n,r,i){s(this,a);var o=n.container;this._container=o,r.on("root.added",function(){da(M(2,ba,{injector:i}),o)}),r.on("root.remove",function(){da(null,o)})}return l(a,[{key:"getContainer",value:function(){return this._container}}]),a}(),ho=(D.$inject=["changeSupport","components","config.renderer","eventBus","injector"],{__init__:["changeSupport","components","renderer"],changeSupport:["type",bi],components:["type",Pi],renderer:["type",D]}),Ai=function(){function r(e,t){var n=this;s(this,r),this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",function(){n.setRoot(null)})}return l(r,[{key:"setRoot",value:function(e){var t;this._root&&(t=this._root,this._eventBus.fire("root.remove",{root:t}),this._root=null,this._eventBus.fire("root.removed",{root:t})),e&&this._eventBus.fire("root.add",{root:e}),(this._root=e)&&this._eventBus.fire("root.added",{root:e})}},{key:"getRoot",value:function(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}},{key:"addRow",value:function(n,r){var i=this,o=this.getRoot();if(o.cols.length!=n.cells.length)throw new Error("number of cells is not equal to number of cols");return wa(r=void 0===r?o.rows.length:r,o.rows,n),n.root=o,this._elementRegistry.add(n),n.cells.forEach(function(e,t){i._elementRegistry.add(e),e.row=n,e.col=o.cols[t],wa(r,o.cols[t].cells,e)}),this._eventBus.fire("row.add",{row:n}),n}},{key:"removeRow",value:function(e){var n=this,r=this.getRoot(),i=("string"==typeof e&&(e=this._elementRegistry.get(e)),r.rows.indexOf(e));-1!==i&&(_a(i,r.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.col=void 0,_a(i,r.cols[t].cells)}),this._eventBus.fire("row.remove",{row:e}))}},{key:"addCol",value:function(n,r){var i=this,o=this.getRoot();if(this._elementRegistry.add(n),o.rows.length!=n.cells.length)throw new Error("number of cells is not equal to number of rows");return wa(r=void 0===r?o.cols.length:r,o.cols,n),n.root=o,n.cells.forEach(function(e,t){i._elementRegistry.add(e),e.col=n,e.row=o.rows[t],wa(r,o.rows[t].cells,e)}),this._eventBus.fire("col.add",{col:n}),n}},{key:"removeCol",value:function(e){var n=this,r=this.getRoot(),i=("string"==typeof e&&(e=this._elementRegistry.get(e)),r.cols.indexOf(e));-1!==i&&(_a(i,r.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.row=void 0,_a(i,r.rows[t].cells)}),this._eventBus.fire("col.remove",{col:e}))}},{key:"resized",value:function(){this._eventBus.fire("sheet.resized")}}]),r}();function wa(e,t,n){t.splice(e,0,n)}function _a(e,t){t.splice(e,1)}function xa(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i="number"==typeof e?e:e?300:0;return i?function(e){return t=e,n=i,r=!1,function(){r||(t.apply(void 0,arguments),r=!0,setTimeout(function(){r=!1},n))};var t,n,r}:function(e){return e}}Ai.$inject=["elementRegistry","eventBus"],xa.$inject=["config.throttle"];var ka={__depends__:[ho],__init__:["elementFactory","sheet"],elementFactory:["type",e],elementRegistry:["type",vi],eventBus:["type",r],sheet:["type",Ai],throttle:["factory",xa]},Ea=["modules"],Ca=function(){function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(s(this,r),t.injector);n||(e=(t=this._init(t)).modules,n=function(e,t){e=new Bn([{config:["value",e]},ka].concat(t||[]));return e.init(),e}(t.config,e)),this.get=n.get,this.invoke=n.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}return l(r,[{key:"_init",value:function(e){return{modules:e.modules,config:V(e,Ea)}}},{key:"destroy",value:function(){var e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}},{key:"clear",value:function(){var e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}}]),r}();function Oa(e){var t;return e?(t=e.id?' id="'.concat(e.id,'"'):"","<".concat(e.$type).concat(t," />")):"<null>"}function Sa(o,e){function a(e,t,n){if(e.gfx)throw new Error("already rendered ".concat(Oa(e)));o.element(e,t,n)}function s(e,t,n){g(e,function(e){a(e,t,n)})}function l(e,t,n){g(e,function(e){a(e,t,n)})}return{handleDecision:function(e){e.id||(e.id="decision");var t=e.decisionLogic;if(!t)throw new Error("no table for ".concat(Oa(e)));if(!t.output)throw new Error("missing output for ".concat(Oa(t)));var n,r,i,e=o.table(t);t.input&&s(t.input,e,t),s(t.output,e,t),n=t.rule,r=e,i=t,g(n,function(e){a(e,r,i),l(e.inputEntry,e),l(e.outputEntry,e)})}}}function ja(e,t,n){var r,i=e.get("tableImporter"),o=e.get("eventBus"),a=e.get("sheet"),s=(e.get("modeling",!1),[]);o.fire("import.render.start",{decision:t});try{new Sa({create:function(e,t,n,r){return i.create(e,t,n,r)},table:function(e){return i.add(e)},element:function(e,t,n){return i.add(e,t,n)},error:function(e,t){s.push({message:e,context:t})}}).handleDecision(t)}catch(e){r=e}o.fire("import.render.complete",{error:r,warnings:s}),o.fire("elements.changed",{elements:[a.getRoot()]}),n(r,s)}function Na(e,t){var n=e.elements,r=e.index;return r[t]?e:{elements:[].concat(p(n),[t]),index:B(B({},r),{},T({},t,!0))}}function Ma(){for(var e,n={elements:[],index:{}},t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach(function(t){var e=m(t);"string"===e&&0<t.length?n=Na(n,t):"object"===e&&null!==t&&Object.keys(t).forEach(function(e){t[e]&&(n=Na(n,e))})}),e=" ",n.elements.join(e)}function Da(e){Pa(e.constructor,e)}function Pa(e,a){var t,s=e.$inject;s&&(e=a.context.injector,t=[].concat(p(s),[function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(e in n){var i=s[e],o=n[e];a[i]=o}}]),e.invoke(t))}function Ra(r,i){Object.keys(i).forEach(function(e){if("$inject"!==e&&"__init"!==e){var t=i[e],n=("constructor"===e&&t.call(r,r.props,r.context),r[e]);if(void 0!==n){if("function"!=typeof n)throw new Error("failed to mixin <".concat(e,">: cannot combine with non-fn component value"));r[e]=function(i){for(var e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return o.forEach(function(e){if(void 0!==(t=e.call.apply(e,[i].concat(n))))return!1}),t}.bind(i)}(r,n,t)}else r[e]=t.bind(r)}}),"$inject"in i&&Pa(i,r),"__init"in i&&i.__init.call(r,r.props,r.context)}var Aa={getSelectionClasses:function(){var e=this.state;return Ma({selected:e.selected,"selected-secondary":e.selectedSecondary,focussed:e.focussed})},selectionChanged:function(e){this.setState(e)},componentWillUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount:function(){this.updateSelectionSubscription(!0)},componentWillUnmount:function(){this.updateSelectionSubscription(!1)},updateSelectionSubscription:function(e){var t=this.props.elementId;t&&this.eventBus[e?"on":"off"]("selection.".concat(t,".changed"),this.selectionChanged)},$inject:["eventBus"]},Ba=["className","elementId","coords"],Ia=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),Ra(a(e=n.call(this,e,t)),Aa),Da(a(e)),e}return l(r,[{key:"getRenderProps",value:function(){for(var e=this.props,t=e.className,n=e.elementId,r=e.coords,e=V(e,Ba),i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t={className:Ma.apply(void 0,o.concat([this.getSelectionClasses(),t]))};return n&&(t["data-element-id"]=n),r&&(t["data-coords"]=r),B(B({},t),e)}}]),r}(),Ta=function(){o(r,Ia);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t)).state={},e}return l(r,[{key:"render",value:function(){return co(O(1,"td",null,this.props.children,0,B({},this.getRenderProps("cell"))))}}]),r}(),La=["type","context"],$a=["type","context"];function Va(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function za(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Va(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],(e=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Va(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Ua(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var Fa={slotFill:function(e,t){var n=e.type,r=e.context,e=Ua(e,La),n=this.components.getComponent(n,r)||t;return n?co(M(2,n,za(za({},r),e))):null},slotFills:function(e){var t=e.type,n=e.context,r=Ua(e,$a);return this.components.getComponents(t,n).map(function(e){return co(M(2,e,za(za({},n),r)))})}};function Ga(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}Fa.$inject=["components"];var Wa=function(){o(i,R);var r=c(i);function i(e,t){var n;return s(this,i),Ga(a(n=r.call(this,e,t)),"onElementsChanged",function(){n.forceUpdate()}),Ra(a(n),Fa),Da(a(n)),n}return l(i,[{key:"componentDidMount",value:function(){this.changeSupport.onElementsChanged(this.getRoot(),this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.getRoot(),this.onElementsChanged)}},{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"render",value:function(){var e=(this.getRoot().businessObject.get("annotationsWidth")||400)+"px";return O(1,"th","annotation header",[this.slotFills({type:"cell-inner",context:{cellType:"annotations",col:this.sheet.getRoot(),minWidth:400}}),this.translate("Annotations")],0,{style:{width:e}})}}]),i}();function qa(e){var e=e.row.businessObject,t=e.id,e=e.description;return M(2,Ta,{className:"annotation",elementId:t,children:e||"-"})}function Ha(e){e.onGetComponent("cell",function(e){e=e.cellType;return"after-label-cells"===e?Wa:"after-rule-cells"===e?qa:void 0})}Wa.$inject=["changeSupport","sheet","translate"],Ha.$inject=["components"];var Ka={__init__:["annotationsProvider"],annotationsProvider:["type",Ha]};function Xa(e,t){return w({id:e.id,type:e.$type,businessObject:e},t)}bi=function(){function r(e,t,n){s(this,r),this._elementFactory=e,this._eventBus=t,this._sheet=n}return l(r,[{key:"add",value:function(e){var t,n,r=this;return E(e,"dmn:DecisionTable")?(n=this._elementFactory.createRoot(Xa(e)),this._sheet.setRoot(n)):E(e,"dmn:InputClause")||E(e,"dmn:OutputClause")?(n=this._elementFactory.createCol(Xa(e)),this._sheet.addCol(n)):E(e,"dmn:DecisionRule")&&(e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]),t=[].concat(p(e.inputEntry),p(e.outputEntry)).map(function(e){return r._elementFactory.createCell(Xa(e))}),n=this._elementFactory.createRow(w(Xa(e),{cells:t})),this._sheet.addRow(n)),this._eventBus.fire("dmnElement.added",{element:n}),n}}]),r}();bi.$inject=["elementFactory","eventBus","sheet"];var Ya={__depends__:[{__depends__:[ci],tableImporter:["type",bi]},ho]};function Qa(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Za=function(){o(i,R);var r=c(i);function i(e,t){var n;return s(this,i),Qa(a(n=r.call(this,e,t)),"onElementsChanged",function(){n.forceUpdate()}),Ra(a(n),Fa),n._sheet=t.injector.get("sheet"),n._changeSupport=t.changeSupport,n}return l(i,[{key:"componentWillMount",value:function(){var e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var r,n,i=this,e=this._sheet.getRoot();return E(e,"dmn:DMNElement")?(e=zr(e),r=e.input,n=e.output,O(1,"thead",null,O(1,"tr",null,[O(1,"th","index-column"),this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),r&&r.map(function(e,t){var n=e.width||"192px";return i.slotFill({type:"cell",context:{cellType:"input-header",input:e,index:t,inputsLength:r.length,width:n},key:e.id},Ja)}),n.map(function(e,t){return i.slotFill({type:"cell",context:{cellType:"output-header",output:e,index:t,outputsLength:n.length},key:e.id},es)}),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),2)):null}}]),i}();function Ja(e,t){var n=e.input,r=e.className,e=e.index,i=n.label,o=n.inputExpression,a=n.inputValues,t=t.injector.get("translate");return O(1,"th",(r||"")+" input-cell",[O(1,"div","clause",t(0===e?"When":"And"),0),i?O(1,"div","input-label",i,0,{title:t("Input Label")}):O(1,"div","input-expression",o.text,0,{title:t("Input Expression")}),O(1,"div","input-variable",a&&a.text||o.typeRef,0,{title:a&&a.text?t("Input Values"):t("Input Type")})],0,{"data-col-id":n.id},n.id)}function es(e,t){var n=e.output,r=e.className,e=e.index,i=n.label,o=n.name,a=n.outputValues,s=n.typeRef,t=t.injector.get("translate");return O(1,"th",(r||"")+" output-cell",[O(1,"div","clause",t(0===e?"Then":"And"),0),i?O(1,"div","output-label",i,0,{title:t("Output Label")}):O(1,"div","output-name",o,0,{title:t("Output Name")}),O(1,"div","output-variable",a&&a.text||s,0,{title:a&&a.text?t("Output Values"):t("Output Type")})],0,null,n.id)}function ts(e){e.onGetComponent("table.head",function(){return Za})}ts.$inject=["components"];var ns={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",ts]},rs=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t))._translate=t.injector.get("translate"),Da(a(e)),e}return l(r,[{key:"render",value:function(){var e,t=this.sheet.getRoot();return E(t,"dmn:DMNElement")?(t=t.businessObject.$parent.name,e=this.components.getComponent("hit-policy")||is,O(1,"div","decision-table-properties",[O(1,"div","decision-table-name",t,0,{title:this._translate("Decision Name: ")+t}),O(1,"div","decision-table-header-separator"),M(2,e)],4)):null}}]),r}();function is(){return null}rs.$inject=["sheet","components"];var Pi=l(function e(t){s(this,e),t.onGetComponent("table.before",500,function(){return rs})}),os=(Pi.$inject=["components"],{__init__:["decisionTableProperties"],decisionTableProperties:["type",Pi]}),as=function(){o(t,R);var e=c(t);function t(){return s(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(){var e=this.props,t=e.row,n=e.rowIndex,e=this.context.components.getComponents("cell-inner",{cellType:"rule-index",row:t,rowIndex:n});return O(1,"td","rule-index",[e&&e.map(function(e){return M(2,e,{row:t,rowIndex:n})}),n+1],0,{"data-element-id":t.id,"data-row-id":t.id})}}]),t}(),D=l(function e(t){s(this,e),t.onGetComponent("cell",function(e){if("before-rule-cells"===e.cellType)return as})}),ss=(D.$inject=["components"],{__init__:["decisionRuleIndices"],decisionRuleIndices:["type",D]}),ls=[{label:"FEEL",value:"feel"}],e=function(){function n(e){s(this,n);var e=(this._injector=e).get("config.expressionLanguages")||{},t=(this._config={options:ls,defaults:{editor:"feel"}},e.options&&(this._config.options=e.options),this._getLegacyDefaults());w(this._config.defaults,t,e.defaults)}return l(n,[{key:"getDefault",value:function(e){var t=this._config.defaults,e=t[e]||t.editor;return this._getLanguageByValue(e)||this.getAll()[0]}},{key:"getLabel",value:function(e){var t=this._getLanguageByValue(e);return t?t.label:e}},{key:"getAll",value:function(){return this._config.options}},{key:"_getLegacyDefaults",value:function(){var e={},t=this._injector,n=t.get("config.defaultInputExpressionLanguage"),t=t.get("config.defaultOutputExpressionLanguage");return n&&(e.inputCell=n),t&&(e.outputCell=t),e}},{key:"_getLanguageByValue",value:function(t){return ee(this.getAll(),function(e){return t===e.value})}}]),n}(),vi=(e.$inject=["injector"],{__init__:["expressionLanguages"],expressionLanguages:["type",e]}),cs=function(){o(t,R);var e=c(t);function t(){return s(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(e){var t=e.rows,r=e.cols,i=this.context.components;return O(1,"tbody",null,t.map(function(e,t){var n=i.getComponent("row",{rowType:"rule"});return n&&M(2,n,{row:e,rowIndex:t,cols:r},e.id)}),0)}}]),t}(),us=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),Ra(a(e=n.call(this,e,t)),Fa),e}return l(r,[{key:"render",value:function(){var n=this,e=this.props,r=e.row,i=e.rowIndex,o=e.cols,e=r.cells;return O(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:r,rowIndex:i}}),e.map(function(e,t){return n.slotFill({type:"cell",context:{cellType:"rule",cell:e,rowIndex:i,colIndex:t},key:e.id,row:r,col:o[t]})}),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:r,rowIndex:i}})],0)}}]),r}(),ps=function(){o(t,R);var e=c(t);function t(){return s(this,t),e.apply(this,arguments)}return l(t,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.row,e=e.col;return E(t,"dmn:UnaryTests")?M(2,Ta,{className:"input-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":e.id,children:t.businessObject.text}):M(2,Ta,{className:"output-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":e.id,children:t.businessObject.text})}}]),t}(),Ai=l(function e(t){s(this,e),t.onGetComponent("table.body",function(){return cs}),t.onGetComponent("row",function(e){if("rule"===e.rowType)return us}),t.onGetComponent("cell",function(e){if("rule"===e.cellType)return ps})}),fs=(Ai.$inject=["components"],{__depends__:[vi],__init__:["decisionRules"],decisionRules:["type",Ai]}),ds=[{label:"Unique",value:{hitPolicy:"UNIQUE",aggregation:void 0},explanation:"No overlap is possible and all rules are disjoint. Only a single rule can be matched"},{label:"First",value:{hitPolicy:"FIRST",aggregation:void 0},explanation:"Rules may overlap. The first matching rule will be chosen"},{label:"Priority",value:{hitPolicy:"PRIORITY",aggregation:void 0},explanation:"Rules may overlap. The one with the highest priority will be chosen"},{label:"Any",value:{hitPolicy:"ANY",aggregation:void 0},explanation:"Rules may overlap. Their output have to match"},{label:"Collect",value:{hitPolicy:"COLLECT",aggregation:void 0},explanation:"Collects the values of all matching rules"},{label:"Collect (Sum)",value:{hitPolicy:"COLLECT",aggregation:"SUM"},explanation:"Collects the values of all matching rules and sums up to a single value"},{label:"Collect (Min)",value:{hitPolicy:"COLLECT",aggregation:"MIN"},explanation:"Collects the values of all matching rules and uses the lowest value"},{label:"Collect (Max)",value:{hitPolicy:"COLLECT",aggregation:"MAX"},explanation:"Collects the values of all matching rules and uses the highest value"},{label:"Collect (Count)",value:{hitPolicy:"COLLECT",aggregation:"COUNT"},explanation:"Collects the values of all matching rules and counts the number of them"},{label:"Rule order",value:{hitPolicy:"RULE ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in rule order"},{label:"Output order",value:{hitPolicy:"OUTPUT ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in decreasing output priority order"}],hs=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t))._translate=t.injector.get("translate"),Da(a(e)),e}return l(r,[{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"render",value:function(){var e=this.getRoot().businessObject,n=e.aggregation,r=e.hitPolicy,e=ee(ds,function(e){return e=e.value,t={aggregation:n,hitPolicy:r},e.hitPolicy===t.hitPolicy&&e.aggregation===t.aggregation;var t});return O(1,"div","hit-policy header",[O(1,"label","dms-label",this._translate("Hit Policy:"),0),O(1,"span","hit-policy-value",this._translate(e.label),0)],4,{title:this._translate(e.explanation)})}}]),r}();function ms(e){e.onGetComponent("hit-policy",function(){return hs})}hs.$inject=["sheet"],ms.$inject=["components"];var ys={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",ms]};function vs(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var gs=function(){o(i,R);var r=c(i);function i(e,t){s(this,i),vs(a(n=r.call(this,e,t)),"onClick",function(){n._eventBus.fire("showDrd")});var n,e=t.injector;return n._translate=e.get("translate"),n._eventBus=e.get("eventBus"),n}return l(i,[{key:"render",value:function(){var t=this;return O(1,"div","view-drd",O(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),i}(),bi=function(){function o(e,t,n,r){var i=this;s(this,o),this._injector=n,this._sheet=r,e.onGetComponent("table.before",function(){if(i.canViewDrd())return gs}),t.on("showDrd",function(){var e=n.get("_parent",!1),t=bs(r.getRoot());t&&(t=e.getView(t),e.open(t))})}return l(o,[{key:"canViewDrd",value:function(){var e,t=this._injector.get("_parent",!1);return!!t&&(e=bs(this._sheet.getRoot()),!!t.getView(e))}}]),o}();function bs(e){e=e.businessObject;if(e)return e.$parent.$parent}bi.$inject=["components","eventBus","injector","sheet"];var ws={__init__:["viewDrd"],viewDrd:["type",bi]};function _s(){return O(32,"svg",null,[O(1,"path",null,null,1,{fill:"#000000",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),O(1,"path",null,null,1,{fill:"#000000",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"})],4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:"vertical-align:middle"})}function xs(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var ks=function(){o(i,R);var r=c(i);function i(e,t){s(this,i),xs(a(n=r.call(this,e,t)),"onClick",function(){n._eventBus.fire("poweredBy.show")});var n,e=t.injector;return n._eventBus=e.get("eventBus"),n}return l(i,[{key:"render",value:function(){var t=this;return O(1,"div","powered-by",O(1,"div","powered-by__logo",M(2,_s),2,{title:"Powered by bpmn.io",onClick:this.onClick},null,function(e){return t.node=e}),2)}}]),i}(),Es=function(){o(n,R);var t=c(n);function n(e){return s(this,n),(e=t.call(this,e)).state={show:!1},e.onClick=e.onClick.bind(a(e)),e.onShow=e.onShow.bind(a(e)),e}return l(n,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&O(1,"div","powered-by-overlay",O(1,"div","powered-by-overlay-content",[O(1,"a","logo",M(2,_s),2,{href:"https://bpmn.io",target:"_blank",rel:"noopener"}),O(1,"span",null,[lo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),O(1,"a",null,lo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),lo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),n}(),ho=l(function e(t,n){s(this,e),t.onGetComponent("table.before",function(){return ks}),t.onGetComponent("table.before",function(){return Es})}),Cs=(ho.$inject=["components","eventBus"],{__init__:["poweredBy"],poweredBy:["type",ho]}),Os=["modules","additionalModules"];function Ss(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var js=function(){o(r,Ca);var n=c(r);function r(){s(this,r);var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=r._createContainer(),e=n.call(this,w(e,{renderer:{container:t}}));return e._container=t,e}return l(r,[{key:"open",value:function(e){var i=this;return new Promise(function(n,r){var t;try{return i._decision&&i.clear(),i._decision=e,ja(i,e,function(e,t){e?(e.warnings=t||[],r(e)):n({warnings:t||[]})})}catch(e){t=e}t?(t.warnings=t.warnings||[],r(t)):n({warnings:[]})})}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,e=Ss(e,Os),t=t||this.getModules(),n=n||[],r=[{decisionTable:["value",this]}];return{modules:[Cs].concat(p(t),p(n),r),config:e}}},{key:"on",value:function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),yn(e))}},{key:"destroy",value:function(){z(L(r.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return r._getModules()}}],[{key:"_getModules",value:function(){return[Ka,Ya,ci,ns,os,ss,fs,ys,ws]}},{key:"_createContainer",value:function(){return hn('<div class="dmn-decision-table-container"></div>')}}]),r}(),Pi=function(){function t(e){var n=this;s(this,t),this._listeners={},e.on("elements.changed",function(e){e=e.elements;n.elementsChanged(e)}),e.on("element.updateId",function(e){var t=e.element,e=e.newId;n.updateId(t.id,e)})}return l(t,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,r=0;r<n;r++){var i=e[r].id;if(t[i])return;t[i]=!0;var o=this._listeners[i]&&this._listeners[i].length;if(o)for(var a=0;a<o;a++)this._listeners[i][a]&&this._listeners[i][a]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){this._listeners[e]&&(t?-1!==(t=this._listeners[e].indexOf(t))&&this._listeners[e].splice(t,1):this._listeners[e].length=0)}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),t}(),D=(Pi.$inject=["eventBus"],function(){function e(){s(this,e),this._listeners={}}return l(e,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var r,i=0;i<n.length&&!(r=n[i].callback(t));i++);return r}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e];if(n){for(var r=[],i=0;i<n.length;i++){var o=n[i].callback(t);o&&r.push(o)}if(r.length)return r}}},{key:"onGetComponent",value:function(e,t,n){if(Z(t)&&(n=t,t=1e3),!Q(t))throw new Error("priority must be a number");for(var r,i=this._getListeners(e),o={priority:t,callback:n},a=0;r=i[a];a++)if(r.priority<t)return void i.splice(a,0,o);i.push(o)}},{key:"offGetComponent",value:function(e,t){var n,r,i=this._getListeners(e);if(t)for(r=i.length-1;n=i[r];r--)n.callback===t&&i.splice(r,1);else i.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),e}()),Ns=function(){o(r,R);var n=c(r);function r(e){s(this,r);var t,e=(t=n.call(this,e))._injector=e.injector;return t._changeSupport=e.get("changeSupport"),t._components=e.get("components"),t._renderer=e.get("renderer"),t}return l(r,[{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}},{key:"render",value:function(){var e=this._components.getComponents("viewer");return O(1,"div","viewer-container",e&&e.map(function(e,t){return M(2,e,null,t)}),0)}}]),r}(),e=function(){function a(e,t,n,r,i){s(this,a);var o=n.container;this._container=o,r.on("renderer.mount",function(){da(M(2,Ns,{injector:i}),o)}),r.on("renderer.unmount",function(){da(null,o)})}return l(a,[{key:"getContainer",value:function(){return this._container}}]),a}(),Ms=(e.$inject=["changeSupport","components","config.renderer","eventBus","injector"],{__init__:["changeSupport","components","renderer"],changeSupport:["type",Pi],components:["type",D],eventBus:["type",r],renderer:["type",e]}),Ds=["modules"];function Ps(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var Rs=function(){function r(){s(this,r);var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.injector;n||(e=(t=this._init(t)).modules,n=function(e,t){e=new Bn([{config:["value",e]},Ms].concat(t||[]));return e.init(),e}(t.config,e)),this.get=n.get,this.invoke=n.invoke,this.get("eventBus").fire("viewer.init")}return l(r,[{key:"_init",value:function(e){return{modules:e.modules,config:Ps(e,Ds)}}},{key:"destroy",value:function(){this.get("eventBus").fire("viewer.destroy")}},{key:"clear",value:function(){this.get("eventBus").fire("viewer.clear")}}]),r}();var vi=function(){function n(e,t){s(this,n),this._eventBus=t,this._viewer=e}return l(n,[{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"updateId",value:function(e,t){if(e!==this.getDecision())throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}]),n}(),As=(vi.$inject=["viewer","eventBus"],{__init__:["elementRegistry"],elementRegistry:["type",vi]}),Bs=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t))._viewer=t.injector.get("viewer"),e}return l(r,[{key:"render",value:function(){return O(1,"div","decision-properties",O(1,"h3","decision-name",this._viewer.getDecision().name,0),2)}}]),r}(),Ai=l(function e(t){s(this,e),t.onGetComponent("viewer",1500,function(){return Bs})}),Is=(Ai.$inject=["components"],{__init__:["decisionProperties"],decisionProperties:["type",Ai]}),Ts=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t))._translate=t.injector.get("translate"),e._viewer=t.injector.get("viewer"),e}return l(r,[{key:"render",value:function(){var e=this._viewer.getDecision(),t=e.decisionLogic,e=e.variable;return O(1,"div","literal-expression-properties",O(1,"table",null,[O(1,"tr",null,[O(1,"td",null,this._translate("Variable Name:"),0),O(1,"td",null,O(1,"span",null,e.name||"-",0),2)],4),O(1,"tr",null,[O(1,"td",null,this._translate("Variable Type:"),0),O(1,"td",null,O(1,"span",null,this._translate(e.typeRef)||"-",0),2)],4),O(1,"tr",null,[O(1,"td",null,this._translate("Expression Language:"),0),O(1,"td",null,O(1,"span",null,t.expressionLanguage||"-",0),2)],4)],4),2)}}]),r}(),bi=l(function e(t){s(this,e),t.onGetComponent("viewer",500,function(){return Ts})}),Ls=(bi.$inject=["components"],{__depends__:[],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",bi]});function $s(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Vs=function(){o(i,R);var r=c(i);function i(e,t){s(this,i),$s(a(n=r.call(this,e,t)),"onClick",function(){n._eventBus.fire("poweredBy.show")});var n,e=t.injector;return n._eventBus=e.get("eventBus"),n}return l(i,[{key:"render",value:function(){var t=this;return O(1,"div","powered-by",O(1,"div","powered-by__logo",M(2,_s),2),2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(e){return t.node=e})}}]),i}(),zs=function(){o(n,R);var t=c(n);function n(e){return s(this,n),(e=t.call(this,e)).state={show:!1},e.onClick=e.onClick.bind(a(e)),e.onShow=e.onShow.bind(a(e)),e}return l(n,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&O(1,"div","powered-by-overlay",O(1,"div","powered-by-overlay-content",[O(1,"a","logo",M(2,_s),2,{href:"https://bpmn.io",target:"_blank",rel:"noopener"}),O(1,"span",null,[lo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),O(1,"a",null,lo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),lo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),n}(),ho=l(function e(t,n){s(this,e),t.onGetComponent("viewer",2e3,function(){return Vs}),t.onGetComponent("viewer",function(){return zs})}),Us=(ho.$inject=["components","eventBus"],{__init__:["poweredBy"],poweredBy:["type",ho]}),Fs=function(){o(r,R);var n=c(r);function r(e,t){return s(this,r),(e=n.call(this,e,t))._viewer=t.injector.get("viewer"),e}return l(r,[{key:"render",value:function(){return O(1,"div","textarea",O(1,"div","content",this._viewer.getDecision().decisionLogic.text,0),2)}}]),r}(),Pi=l(function e(t){s(this,e),t.onGetComponent("viewer",function(){return Fs})}),Gs=(Pi.$inject=["components"],{__init__:["textarea"],textarea:["type",Pi]});function Ws(e,t,n){(t=function(e){e=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===m(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var qs=function(){o(i,R);var r=c(i);function i(e,t){s(this,i),Ws(a(n=r.call(this,e,t)),"onClick",function(){n._eventBus.fire("showDrd")});var n,e=t.injector;return n._translate=e.get("translate"),n._eventBus=e.get("eventBus"),n}return l(i,[{key:"render",value:function(){var t=this;return O(1,"div","view-drd",O(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),i}(),D=(qs.$inject=["translate"],function(){function o(e,t,n,r){var i=this;s(this,o),this._injector=r,this._viewer=t,e.onGetComponent("viewer",2e3,function(){if(i.canViewDrd())return qs}),n.on("showDrd",function(){var e=r.get("_parent",!1),t=i.getDefinitions(),t=e.getView(t);e.open(t)})}return l(o,[{key:"canViewDrd",value:function(){var e,t=this._injector.get("_parent",!1);if(t)return e=this.getDefinitions(),!!t.getView(e)}},{key:"getDefinitions",value:function(){return this._viewer.getDecision().$parent}}]),o}());D.$inject=["components","viewer","eventBus","injector"];var Hs={__init__:["viewDrd"],viewDrd:["type",D]},Ks=["modules","additionalModules"];function Xs(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var Ys=function(){o(r,Rs);var n=c(r);function r(){s(this,r);var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=r._createContainer(),e=n.call(this,w(e,{renderer:{container:t}}));return e._container=t,e}return l(r,[{key:"open",value:function(r){var i=this;return new Promise(function(e,t){var n;try{i._decision&&(i.clear(),i.get("eventBus").fire("renderer.unmount")),i._decision=r,i.get("eventBus").fire("import",r),i.get("eventBus").fire("renderer.mount")}catch(e){n=e}n?(n.warnings=n.warnings||[],t(n)):e({warnings:[]})})}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,e=Xs(e,Ks),t=t||this.getModules(),n=n||[],r=[{viewer:["value",this]}];return{modules:[].concat(p(t),p(n),r),config:e}}},{key:"on",value:function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"getDecision",value:function(){return this._decision}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),yn(e))}},{key:"destroy",value:function(){z(L(r.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return r._getModules()}}],[{key:"_getModules",value:function(){return[As,ci,Is,Ls,Us,Gs,Hs]}},{key:"_createContainer",value:function(){return hn('<div class="dmn-literal-expression-container"></div>')}}]),r}();return function(){o(t,xn);var e=c(t);function t(){return s(this,t),e.apply(this,arguments)}return l(t,[{key:"_getViewProviders",value:function(){return[{id:"drd",constructor:b,opens:function(e){return E(e,"dmn:Definitions")&&(e=e).dmnDI&&e.dmnDI.diagrams&&e.dmnDI.diagrams[0]}},{id:"decisionTable",constructor:js,opens:function(e){return E(e,"dmn:Decision")&&E(e.decisionLogic,"dmn:DecisionTable")}},{id:"literalExpression",constructor:Ys,opens:function(e){return E(e,"dmn:Decision")&&E(e.decisionLogic,"dmn:LiteralExpression")}}]}}]),t}()});
